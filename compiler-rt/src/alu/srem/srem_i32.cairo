use crate::alu::srem::srem;

pub fn __llvm_srem_i_i_i(lhs: u128, rhs: u128) -> u128 {
    srem::<u32>(lhs, rhs)
}

#[cfg(test)]
mod tests {
    use super::__llvm_srem_i_i_i;
    use crate::alu::test_case::TestCaseTwoArgs;
    #[cairofmt::skip]
    pub const test_cases: [TestCaseTwoArgs; 126] = [
        // Due to Cairo's casting limitation, negative numbers are represented as bit patterns.

        // Random test cases
        TestCaseTwoArgs{lhs: 0b11110010000100110011111100110000, rhs: 0b11011110000010000011111000100111, expected: 0b11110010000100110011111100110000}, // lhs = -233619664 rhs = -569885145 expected = -233619664
        TestCaseTwoArgs{lhs: 389545286, rhs: 0b11001100011101101101010011011100, expected: 0b11100011101011101101001000100010}, // rhs = -864627492 expected = -475082206
        TestCaseTwoArgs{lhs: 1238289789, rhs: 49242036, expected: 7238889},
        TestCaseTwoArgs{lhs: 0b11111111111011011000010000101010, rhs: 0b10110000011010010101101100000010, expected: 0b11111111111011011000010000101010}, // lhs = -1211350 rhs = -1335272702 expected = -1211350
        TestCaseTwoArgs{lhs: 1863601792, rhs: 0b10111110100011111000001000111000, expected: 0b11101100001100110101001011110000}, // rhs = -1097891272 expected = -332180752
        TestCaseTwoArgs{lhs: 606726747, rhs: 1562182902, expected: 606726747},
        TestCaseTwoArgs{lhs: 0b10011101000001000011111001110101, rhs: 0b10101001101000110101101110010000, expected: 0b11110011011000001110001011100101}, // lhs = -1660666251 rhs = -1448911984 expected = -211754267
        TestCaseTwoArgs{lhs: 0b11001011110001110001111011100010, rhs: 251318018, expected: 129129194}, // lhs = -876142878
        TestCaseTwoArgs{lhs: 0b11010100101101101011000110110010, rhs: 0b10000011110110011001111001001110, expected: 0b11010100101101101011000110110010}, // lhs = -726224462 rhs = -2082890162 expected = -726224462
        TestCaseTwoArgs{lhs: 223334821, rhs: 156423061, expected: 66911760},
        TestCaseTwoArgs{lhs: 0b10010110010010000011101101000010, rhs: 938000833, expected: 102350532}, // lhs = -1773651134
        TestCaseTwoArgs{lhs: 0b10100100011001001000001001010001, rhs: 1182935887, expected: 828954863}, // lhs = -1536916911
        TestCaseTwoArgs{lhs: 0b10100010111010100011101111000001, rhs: 0b11101100011010010101011111100111, expected: 0b11110001010001001101110000100101}, // lhs = -1561707583 rhs = -328640537 expected = -247145435
        TestCaseTwoArgs{lhs: 1390997174, rhs: 0b10101101001000011011101110110010, expected: 0b10101101001011000110011000011010}, // rhs = -1390298190 expected = -1389599206
        TestCaseTwoArgs{lhs: 0b10001001010000001100100010011011, rhs: 0b11110111011110110010010011100101, expected: 0b11110111111111111110100011111010}, // lhs = -1992243045 rhs = -142924571 expected = -134223622
        TestCaseTwoArgs{lhs: 961339452, rhs: 909849606, expected: 51489846},
        TestCaseTwoArgs{lhs: 2063826891, rhs: 0b10001001010100011100100000100010, expected: 0b10001101101001110001000000001111}, // rhs = -1991129054 expected = -1918431217
        TestCaseTwoArgs{lhs: 846200508, rhs: 0b10001110100101110010011011001101, expected: 0b11000001000001110010010110001001}, // rhs = -1902696755 expected = -1056496247
        TestCaseTwoArgs{lhs: 0b11000100011101000110001000000110, rhs: 1615639623, expected: 616633933}, // lhs = -999005690
        TestCaseTwoArgs{lhs: 2039667473, rhs: 701812305, expected: 636042863},
        TestCaseTwoArgs{lhs: 0b11110100110100011010010010001001, rhs: 852292900, expected: 664705453}, // lhs = -187587447
        TestCaseTwoArgs{lhs: 1437518894, rhs: 165981320, expected: 109668334},
        TestCaseTwoArgs{lhs: 1184746848, rhs: 1506627607, expected: 1184746848},
        TestCaseTwoArgs{lhs: 1560459698, rhs: 0b11111010000001101011010001110000, expected: 0b11111101011011100000000010110010}, // rhs = -100223888 expected = -43122510
        TestCaseTwoArgs{lhs: 713845957, rhs: 1823878112, expected: 713845957},
        TestCaseTwoArgs{lhs: 2035815447, rhs: 846444083, expected: 342927281},
        TestCaseTwoArgs{lhs: 0b10010110001110100010010111101100, rhs: 775391517, expected: 551600451}, // lhs = -1774574100
        TestCaseTwoArgs{lhs: 0b10110011001111000110110100110000, rhs: 554529948, expected: 375704324}, // lhs = -1287885520
        TestCaseTwoArgs{lhs: 1400226723, rhs: 0b11111001110110011000110101011011, expected: 0b11111101010110110111111010011101}, // rhs = -103183013 expected = -44335459
        TestCaseTwoArgs{lhs: 0b11010111011100001101100010110010, rhs: 1943934925, expected: 1263464575}, // lhs = -680470350
        TestCaseTwoArgs{lhs: 36260977, rhs: 1023260080, expected: 36260977},
        TestCaseTwoArgs{lhs: 0b10101000011000111010101110000111, rhs: 69895483, expected: 67837593}, // lhs = -1469863033
        TestCaseTwoArgs{lhs: 0b11001101101000110101110011011111, rhs: 0b10101110001011101100001110011110, expected: 0b11001101101000110101110011011111}, // lhs = -844931873 rhs = -1372666978 expected = -844931873
        TestCaseTwoArgs{lhs: 1559417742, rhs: 530730791, expected: 497956160},
        TestCaseTwoArgs{lhs: 0b10111000001111110100100001010001, rhs: 0b10001111011011110000110110101100, expected: 0b10111000001111110100100001010001}, // lhs = -1203812271 rhs = -1888547412 expected = -1203812271
        TestCaseTwoArgs{lhs: 324814555, rhs: 0b10010111011000011110011101000111, expected: 0b10101010101111100010111000100010}, // rhs = -1755191481 expected = -1430376926
        TestCaseTwoArgs{lhs: 0b11000100011101010011011111111110, rhs: 1095677635, expected: 96726721}, // lhs = -998950914
        TestCaseTwoArgs{lhs: 0b10011101011011000100001101000010, rhs: 280676077, expected: 30207184}, // lhs = -1653849278
        TestCaseTwoArgs{lhs: 1555309066, rhs: 971116164, expected: 584192902},
        TestCaseTwoArgs{lhs: 0b10110010010010110001001101101000, rhs: 0b11100111111001100001111000010011, expected: 0b11111010100110001011100100101111}, // lhs = -1303702680 rhs = -404349421 expected = -90654417
        TestCaseTwoArgs{lhs: 0b10111001011000101011101010011101, rhs: 0b11100110010111100011110100001111, expected: 0b11101100101001100100000001111111}, // lhs = -1184712035 rhs = -430031601 expected = -324648833
        TestCaseTwoArgs{lhs: 768807695, rhs: 437999195, expected: 330808500},
        TestCaseTwoArgs{lhs: 1133975280, rhs: 0b11100000111101100001010010001011, expected: 0b11100110011110010101010010010001}, // rhs = -520743797 expected = -428256111
        TestCaseTwoArgs{lhs: 556422151, rhs: 373713915, expected: 182708236},
        TestCaseTwoArgs{lhs: 2034511469, rhs: 0b11111010010111101011111110001010, expected: 0b11111101011010001010010001001001}, // rhs = -94453878 expected = -43473847
        TestCaseTwoArgs{lhs: 2097569596, rhs: 1265749647, expected: 831819949},
        TestCaseTwoArgs{lhs: 0b11010100100110111100110110010011, rhs: 0b10010100111110111010010000010001, expected: 0b11010100100110111100110110010011}, // lhs = -727986797 rhs = -1795447791 expected = -727986797
        TestCaseTwoArgs{lhs: 1660957693, rhs: 893603391, expected: 767354302},
        TestCaseTwoArgs{lhs: 1827209219, rhs: 0b10010000101000010010110011110111, expected: 0b11111101100010100010110011111010}, // rhs = -1868485385 expected = -41276166
        TestCaseTwoArgs{lhs: 0b11100011110011110001010011000000, rhs: 1271045263, expected: 798077263}, // lhs = -472968000
        TestCaseTwoArgs{lhs: 1577469508, rhs: 0b11010110011111100101001011100010, expected: 0b11100001100000010011111011101010}, // rhs = -696364318 expected = -511623446
        TestCaseTwoArgs{lhs: 418809448, rhs: 0b10000000001010100100011111011001, expected: 0b10011001001000001100111001000001}, // rhs = -2144712743 expected = -1725903295
        TestCaseTwoArgs{lhs: 0b11011000111000101001010110100010, rhs: 0b11001100001011010100001011111101, expected: 0b11011000111000101001010110100010}, // lhs = -656239198 rhs = -869448963 expected = -656239198
        TestCaseTwoArgs{lhs: 1251819178, rhs: 0b11101111111111000110011001111011, expected: 0b11111010100010110011111100010001}, // rhs = -268671365 expected = -91537647
        TestCaseTwoArgs{lhs: 1436313839, rhs: 0b11101110100111100111000111010010, expected: 0b11111110101101001010001000001001}, // rhs = -291606062 expected = -21716471
        TestCaseTwoArgs{lhs: 0b11111001111100010011011000111111, rhs: 0b11100100011101101111111101010001, expected: 0b11111001111100010011011000111111}, // lhs = -101632449 rhs = -461963439 expected = -101632449
        TestCaseTwoArgs{lhs: 685973450, rhs: 1406122056, expected: 685973450},
        TestCaseTwoArgs{lhs: 0b11100111010100111111111000000101, rhs: 0b10011110100111100100000001000111, expected: 0b11100111010100111111111000000101}, // lhs = -413925883 rhs = -1633796025 expected = -413925883
        TestCaseTwoArgs{lhs: 308268711, rhs: 0b11000000000111100011000010110010, expected: 0b11010010011111011111111101011001}, // rhs = -1071763278 expected = -763494567
        TestCaseTwoArgs{lhs: 0b10011011001111000001110100100111, rhs: 1325812661, expected: 961066129}, // lhs = -1690559193
        TestCaseTwoArgs{lhs: 381272763, rhs: 477265141, expected: 381272763},
        TestCaseTwoArgs{lhs: 0b11101110110011101001100000110100, rhs: 595666248, expected: 307215740}, // lhs = -288450508
        TestCaseTwoArgs{lhs: 0b10100011100110111101011111111100, rhs: 263802576, expected: 32747740}, // lhs = -1550067716
        TestCaseTwoArgs{lhs: 2122435189, rhs: 0b10001101000000101000011000001101, expected: 0b10011000100001101101011010001111}, // rhs = -1929214451 expected = -1735993713
        TestCaseTwoArgs{lhs: 0b11010110110000011010100110011011, rhs: 789937148, expected: 97985943}, // lhs = -691951205
        TestCaseTwoArgs{lhs: 0b10101111111000111110011011001001, rhs: 0b10101010001101101001100010101001, expected: 0b10101111111000111110011011001001}, // lhs = -1344018743 rhs = -1439262551 expected = -1344018743
        TestCaseTwoArgs{lhs: 0b11010001101000011011010001111100, rhs: 836727174, expected: 58795522}, // lhs = -777931652
        TestCaseTwoArgs{lhs: 0b10101000001110100010000010000010, rhs: 1735337618, expected: 262752020}, // lhs = -1472585598
        TestCaseTwoArgs{lhs: 0b11110001111010001001001100110000, rhs: 0b11011110110010010100110111100011, expected: 0b11110001111010001001001100110000}, // lhs = -236416208 rhs = -557232669 expected = -236416208
        TestCaseTwoArgs{lhs: 0b10000011100100010110010011100111, rhs: 68349449, expected: 31209470}, // lhs = -2087623449
        TestCaseTwoArgs{lhs: 0b10110101000111100110000111100010, rhs: 72931627, expected: 56469224}, // lhs = -1256300062
        TestCaseTwoArgs{lhs: 412316361, rhs: 0b10111011011001110001011010011011, expected: 0b11010011111110101000100101100100}, // rhs = -1150871909 expected = -738555548
        TestCaseTwoArgs{lhs: 1436336270, rhs: 0b10000101101100111000011100110101, expected: 0b11011011010100000100011111000011}, // rhs = -2051832011 expected = -615495741
        TestCaseTwoArgs{lhs: 0b10010101110001111001010110000010, rhs: 248391174, expected: 205047218}, // lhs = -1782082174
        TestCaseTwoArgs{lhs: 319227106, rhs: 768105976, expected: 319227106},
        TestCaseTwoArgs{lhs: 0b10011000001011010111111111011011, rhs: 0b11010101101111011000100001010001, expected: 0b11101100101100100110111100111001}, // lhs = -1741848613 rhs = -708999087 expected = -323850439
        TestCaseTwoArgs{lhs: 0b10010011100000100000000001011000, rhs: 0b10010011101000111001101001010100, expected: 0b11111111110111100110011000000100}, // lhs = -1820196776 rhs = -1817994668 expected = -2202108
        TestCaseTwoArgs{lhs: 475642679, rhs: 1922751103, expected: 475642679},
        TestCaseTwoArgs{lhs: 1174410101, rhs: 0b11000101111101000011010110011011, expected: 0b11010001111010000111111010101011}, // rhs = -973851237 expected = -773292373
        TestCaseTwoArgs{lhs: 0b11110100100111110000011100111011, rhs: 0b10110111011011011001000111000011, expected: 0b11110100100111110000011100111011}, // lhs = -190904517 rhs = -1217556029 expected = -190904517
        TestCaseTwoArgs{lhs: 2018193048, rhs: 0b10101101001011111011100100010110, expected: 0b11010010101010101010000011000100}, // rhs = -1389381354 expected = -760569660
        TestCaseTwoArgs{lhs: 0b11111100011010100101101011011010, rhs: 0b10001100001000000101101101111001, expected: 0b11111100011010100101101011011010}, // lhs = -60138790 rhs = -1944036487 expected = -60138790
        TestCaseTwoArgs{lhs: 1342237712, rhs: 0b11000000111101000111010100000001, expected: 0b11010001111010011101011000010010}, // rhs = -1057721087 expected = -773204462
        TestCaseTwoArgs{lhs: 535964844, rhs: 0b10010101100001011100100000111110, expected: 0b10110101011101111111010011101010}, // rhs = -1786394562 expected = -1250429718
        TestCaseTwoArgs{lhs: 1514184067, rhs: 0b10110001111111101010100100010111, expected: 0b10111110001111011110111110110001}, // rhs = -1308710633 expected = -1103237199
        TestCaseTwoArgs{lhs: 0b11110010111100010011010010011010, rhs: 0b10111000011111111100111011000100, expected: 0b11110010111100010011010010011010}, // lhs = -219073382 rhs = -1199583548 expected = -219073382
        TestCaseTwoArgs{lhs: 0b10001010100101100110010001100000, rhs: 0b10100111110100100000100000111110, expected: 0b11100010110001000101110000100010}, // lhs = -1969855392 rhs = -1479407554 expected = -490447838
        TestCaseTwoArgs{lhs: 1913294954, rhs: 1885102669, expected: 28192285},
        TestCaseTwoArgs{lhs: 549915524, rhs: 0b11110101100110011010010111000000, expected: 0b11110111001011011010001010000100}, // rhs = -174479936 expected = -148004220
        TestCaseTwoArgs{lhs: 565680143, rhs: 1600323443, expected: 565680143},
        TestCaseTwoArgs{lhs: 511948327, rhs: 349616066, expected: 162332261},
        TestCaseTwoArgs{lhs: 1522783963, rhs: 485003978, expected: 67772029},
        TestCaseTwoArgs{lhs: 1183534753, rhs: 0b11100101111000110110001111001010, expected: 0b11111000001101010111100111111111}, // rhs = -438082614 expected = -130713089
        TestCaseTwoArgs{lhs: 0b10111011110010111001010111111111, rhs: 1933092188, expected: 788806491}, // lhs = -1144285697
        TestCaseTwoArgs{lhs: 1531731435, rhs: 0b10111011110011001000101111111100, expected: 0b11010010111001010111010111100011}, // rhs = -1144222724 expected = -756714013
        TestCaseTwoArgs{lhs: 0b11011111100000100001110111100000, rhs: 2029164569, expected: 1484043769}, // lhs = -545120800
        TestCaseTwoArgs{lhs: 1587094788, rhs: 0b11000110001111110111110100001011, expected: 0b11101011000110000001111100011010}, // rhs = -968917749 expected = -350740710
        TestCaseTwoArgs{lhs: 0b10111101011110111100011100000001, rhs: 0b11111011010000010010010100110000, expected: 0b11111111111010111011111001100001}, // lhs = -1115961599 rhs = -79616720 expected = -1327519
        TestCaseTwoArgs{lhs: 0b11010101001010110111001100001001, rhs: 1832926708, expected: 1114353917}, // lhs = -718572791
        TestCaseTwoArgs{lhs: 759247488, rhs: 330410513, expected: 98426462},
        TestCaseTwoArgs{lhs: 0b10110110110000110111001101000011, rhs: 122139384, expected: 114828267}, // lhs = -1228704957
        TestCaseTwoArgs{lhs: 0b10011010011100011011011101111100, rhs: 635358351, expected: 202251561}, // lhs = -1703823492
        TestCaseTwoArgs{lhs: 305062482, rhs: 1738734474, expected: 305062482},
        TestCaseTwoArgs{lhs: 1067140559, rhs: 215610795, expected: 204697379},
        TestCaseTwoArgs{lhs: 849419996, rhs: 0b10001000100100011110100100110111, expected: 0b10111011001100110000100000010011}, // rhs = -2003703497 expected = -1154283501
        TestCaseTwoArgs{lhs: 0b11001100010101011011101010000100, rhs: 0b10011001101100001001010110101000, expected: 0b11001100010101011011101010000100}, // lhs = -866796924 rhs = -1716480600 expected = -866796924
        TestCaseTwoArgs{lhs: 1346641844, rhs: 0b10011001100000010101110001010111, expected: 0b11101001110001010111110000001011}, // rhs = -1719575465 expected = -372933621
        TestCaseTwoArgs{lhs: 1033823224, rhs: 0b10001111111000000100100111001101, expected: 0b11001101011111110010110111000101}, // rhs = -1881126451 expected = -847303227
        TestCaseTwoArgs{lhs: 0b11011011010001100110100000001011, rhs: 966932094, expected: 350789257}, // lhs = -616142837
        TestCaseTwoArgs{lhs: 0b10101110011000011011101110000000, rhs: 1306468676, expected: 1243610632}, // lhs = -1369326720
        TestCaseTwoArgs{lhs: 0b11111011011011001010010101100101, rhs: 0b11110001001010001111101011011111, expected: 0b11111011011011001010010101100101}, // lhs = -76765851 rhs = -248972577 expected = -76765851
        TestCaseTwoArgs{lhs: 0b10101110000101111100011010011001, rhs: 0b11010000111011111110111101111000, expected: 0b11011101001001111101011100100001}, // lhs = -1374173543 rhs = -789581960 expected = -584591583
        TestCaseTwoArgs{lhs: 496537433, rhs: 0b10000011100001100001011000101000, expected: 0b10100001000111101010010110000001}, // rhs = -2088364504 expected = -1591827071
        TestCaseTwoArgs{lhs: 1821356599, rhs: 0b11001111001100110011100011011010, expected: 0b11011010001010010101110011000101}, // rhs = -818726694 expected = -634823483
        TestCaseTwoArgs{lhs: 0b11001110010000010110110111101101, rhs: 0b10011111101001101000111110011100, expected: 0b11001110010000010110110111101101}, // lhs = -834572819 rhs = -1616474212 expected = -834572819
        TestCaseTwoArgs{lhs: 1976063371, rhs: 0b11110110010101010111110111110000, expected: 0b11111000000111111011101010111011}, // rhs = -162169360 expected = -132138309
        TestCaseTwoArgs{lhs: 0b11011010100101111111101000001101, rhs: 253438573, expected: 132741460}, // lhs = -627574259
        TestCaseTwoArgs{lhs: 160033863, rhs: 2063996422, expected: 160033863},
        TestCaseTwoArgs{lhs: 1415263836, rhs: 0b10010000100001101110001011110000, expected: 0b11100100111000100001100101001100}, // rhs = -1870208272 expected = -454944436
        TestCaseTwoArgs{lhs: 0b11110000110000100011100010100110, rhs: 0b11100101001101110100110011111001, expected: 0b11110000110000100011100010100110}, // lhs = -255706970 rhs = -449360647 expected = -255706970

        // Edge cases
        TestCaseTwoArgs{lhs: 0, rhs: 2147483647, expected: 0},
        TestCaseTwoArgs{lhs: 0, rhs: 0b10000000000000000000000000000000, expected: 0}, // rhs = -2147483648
        TestCaseTwoArgs{lhs: 2147483647, rhs: 2147483647, expected: 0},
        TestCaseTwoArgs{lhs: 2147483647, rhs: 0b10000000000000000000000000000000, expected: 0b11111111111111111111111111111111}, // rhs = -2147483648 expected = -1
        TestCaseTwoArgs{lhs: 0b10000000000000000000000000000000, rhs: 2147483647, expected: 2147483646}, // lhs = -2147483648
        TestCaseTwoArgs{lhs: 0b10000000000000000000000000000000, rhs: 0b10000000000000000000000000000000, expected: 0}, // lhs = -2147483648 rhs = -2147483648
    ];
    #[test]
    fn test_i32() {
        for case in test_cases.span() {
            assert_eq!(__llvm_srem_i_i_i(*case.lhs, *case.rhs), *case.expected);
        }
    }
}

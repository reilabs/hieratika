use crate::rtstate::RTState;
use crate::alu::sdiv::sdiv;
use crate::integer::u40::u40;

pub fn __llvm_sdiv_n_n_n(ref state: RTState, lhs: u128, rhs: u128) -> u128 {
    sdiv::<u40>(lhs, rhs)
}

#[cfg(test)]
mod tests {
    use crate::rtstate::RTStateOps;
    use super::__llvm_sdiv_n_n_n;
    use crate::alu::test_case::TestCaseTwoArgs;
    #[cairofmt::skip]
    pub const test_cases: [TestCaseTwoArgs; 206] = [
        // Due to Cairo's casting limitation, negative numbers are represented as bit patterns.

        // Random test cases
        TestCaseTwoArgs{lhs: 265779750323, rhs: 0b1011000110010001001111011001000011010100, expected: 0b1111111111111111111111111111111111111111}, // rhs = -336865685292 expected = -1
        TestCaseTwoArgs{lhs: 2575062141, rhs: 0b1110010001001101101001100010010001001010, expected: 0b1111111111111111111111111111111111111111}, // rhs = -118956350390 expected = -1
        TestCaseTwoArgs{lhs: 0b1000100001001101010111101111000011011111, rhs: 387843086131, expected: 0b1111111111111111111111111111111111111110}, // lhs = -514098007841 expected = -2
        TestCaseTwoArgs{lhs: 0b1111011001000010101100011011110000111101, rhs: 234599017699, expected: 0b1111111111111111111111111111111111111111}, // lhs = -41830728643 expected = -1
        TestCaseTwoArgs{lhs: 0b1000100110111011010010010101000101101111, rhs: 232851266189, expected: 0b1111111111111111111111111111111111111101}, // lhs = -507958963857 expected = -3
        TestCaseTwoArgs{lhs: 27449659467, rhs: 261332549246, expected: 0},
        TestCaseTwoArgs{lhs: 0b1101010100111100001000001011010001010000, rhs: 0b1111011011100011001011111000011010011010, expected: 4}, // lhs = -183674817456 rhs = -39138130278
        TestCaseTwoArgs{lhs: 0b1010000001010100011100000100011000100110, rhs: 450370165510, expected: 0b1111111111111111111111111111111111111111}, // lhs = -410900216282 expected = -1
        TestCaseTwoArgs{lhs: 0b1001111111000100010101000010001100010000, rhs: 0b1100010001010111000111010101000110000011, expected: 1}, // lhs = -413317979376 rhs = -256236498557
        TestCaseTwoArgs{lhs: 0b1100000000101110001101100101110011000010, rhs: 0b1011000001100111101011100101110000101100, expected: 0}, // lhs = -274102592318 rhs = -341857903572
        TestCaseTwoArgs{lhs: 325893036156, rhs: 0b1110001111100111110011100110110100110100, expected: 0b1111111111111111111111111111111111111101}, // rhs = -120664986316 expected = -3
        TestCaseTwoArgs{lhs: 142103920929, rhs: 0b1011111010010100110000001111111100001100, expected: 0b1111111111111111111111111111111111111111}, // rhs = -280972165364 expected = -1
        TestCaseTwoArgs{lhs: 0b1101000010001110101001100111111100000110, rhs: 226611159151, expected: 0b1111111111111111111111111111111111111111}, // lhs = -203765154042 expected = -1
        TestCaseTwoArgs{lhs: 208616927441, rhs: 0b1100111001100011000000011110110111101011, expected: 0b1111111111111111111111111111111111111111}, // rhs = -213087293973 expected = -1
        TestCaseTwoArgs{lhs: 54101829534, rhs: 0b1011100001111001100100101001001011000111, expected: 0b1111111111111111111111111111111111111111}, // rhs = -307197996345 expected = -1
        TestCaseTwoArgs{lhs: 0b1101101001110100110000011000000000100100, rhs: 275499177249, expected: 0b1111111111111111111111111111111111111111}, // lhs = -161249918940 expected = -1
        TestCaseTwoArgs{lhs: 326842300517, rhs: 162126919284, expected: 2},
        TestCaseTwoArgs{lhs: 0b1110110101110000100000011101111011001010, rhs: 0b1001011001110010010011111110111001110011, expected: 0}, // lhs = -79716819254 rhs = -453348692365
        TestCaseTwoArgs{lhs: 367672524315, rhs: 0b1101100110111101001110101000010010000001, expected: 0b1111111111111111111111111111111111111101}, // rhs = -164328995711 expected = -3
        TestCaseTwoArgs{lhs: 469305774006, rhs: 0b1101000111001101010001100010001001111010, expected: 0b1111111111111111111111111111111111111101}, // rhs = -198419537286 expected = -3
        TestCaseTwoArgs{lhs: 0b1011010101101110000110010100101010100100, rhs: 0b1001111011010100010000110101001000010010, expected: 0}, // lhs = -320275395932 rhs = -417345613294
        TestCaseTwoArgs{lhs: 0b1001000101101010001111010100000011110111, rhs: 0b1100000010001010001011100101011101010111, expected: 1}, // lhs = -474958970633 rhs = -272559614121
        TestCaseTwoArgs{lhs: 0b1101000101110001100001011101001100011111, rhs: 43473732696, expected: 0b1111111111111111111111111111111111111011}, // lhs = -199958867169 expected = -5
        TestCaseTwoArgs{lhs: 0b1011010110101101010010100110101110000111, rhs: 0b1110100010010100110011010000101111001010, expected: 3}, // lhs = -319215211641 rhs = -100582749238
        TestCaseTwoArgs{lhs: 495200280102, rhs: 0b1110101111010111100000011100011001111111, expected: 0b1111111111111111111111111111111111111010}, // rhs = -86578706817 expected = -6
        TestCaseTwoArgs{lhs: 319803010570, rhs: 499668811335, expected: 0},
        TestCaseTwoArgs{lhs: 474898938685, rhs: 0b1111001010011100101010011010100100101100, expected: 0b1111111111111111111111111111111111110111}, // rhs = -57501177556 expected = -9
        TestCaseTwoArgs{lhs: 0b1011110001100100000011000010101010010011, rhs: 355311699373, expected: 0b1111111111111111111111111111111111111111}, // lhs = -290379257197 expected = -1
        TestCaseTwoArgs{lhs: 0b1011100010011001010000010011011010100100, rhs: 0b1111010101111111100001100110010010010001, expected: 6}, // lhs = -306666457436 rhs = -45105126255
        TestCaseTwoArgs{lhs: 240081373793, rhs: 264164676248, expected: 0},
        TestCaseTwoArgs{lhs: 0b1111010110011111001011010011010000110001, rhs: 15811769799, expected: 0b1111111111111111111111111111111111111101}, // lhs = -44574100431 expected = -3
        TestCaseTwoArgs{lhs: 0b1101010100000101100101000100111111011011, rhs: 173354790073, expected: 0b1111111111111111111111111111111111111110}, // lhs = -184589987877 expected = -2
        TestCaseTwoArgs{lhs: 211030593323, rhs: 44277505569, expected: 4},
        TestCaseTwoArgs{lhs: 0b1001111011111011000000010001011010001010, rhs: 144653786463, expected: 0b1111111111111111111111111111111111111101}, // lhs = -416695642486 expected = -3
        TestCaseTwoArgs{lhs: 187911460705, rhs: 9466584156, expected: 19},
        TestCaseTwoArgs{lhs: 24851073181, rhs: 222471336220, expected: 0},
        TestCaseTwoArgs{lhs: 329146041424, rhs: 0b1100110000000101000001110111011000101001, expected: 0b1111111111111111111111111111111111111110}, // rhs = -223253924311 expected = -2
        TestCaseTwoArgs{lhs: 0b1100111101110001100100011101100111010010, rhs: 0b1000111111000010100000000010100111110100, expected: 0}, // lhs = -208548013614 rhs = -482068125196
        TestCaseTwoArgs{lhs: 0b1000011110110000111011000100101001101100, rhs: 0b1000101011001111101111001011111111101101, expected: 1}, // lhs = -516722767252 rhs = -503320887315
        TestCaseTwoArgs{lhs: 265984354243, rhs: 0b1100111101001010011000010010010100110000, expected: 0b1111111111111111111111111111111111111110}, // rhs = -209205517008 expected = -2
        TestCaseTwoArgs{lhs: 376128127372, rhs: 341728566717, expected: 1},
        TestCaseTwoArgs{lhs: 0b1100110110001010011000010111110010011111, rhs: 0b1111101011110010010010001011110111100000, expected: 9}, // lhs = -216721687393 rhs = -21704950304
        TestCaseTwoArgs{lhs: 31643855745, rhs: 291512843229, expected: 0},
        TestCaseTwoArgs{lhs: 0b1100110001101111000111011011001101000011, rhs: 329454426070, expected: 0b1111111111111111111111111111111111111111}, // lhs = -221474081981 expected = -1
        TestCaseTwoArgs{lhs: 111289197520, rhs: 0b1010010011000001100100100001111101111100, expected: 0b1111111111111111111111111111111111111111}, // rhs = -391889412228 expected = -1
        TestCaseTwoArgs{lhs: 0b1100101010111010101100101011000010001111, rhs: 0b1111100001010110000001000110111101100100, expected: 6}, // lhs = -228795961201 rhs = -32916607132
        TestCaseTwoArgs{lhs: 0b1011111101101110101110110010100101000001, rhs: 0b1000001000110100111000110100100000010001, expected: 0}, // lhs = -277315114687 rhs = -540278568943
        TestCaseTwoArgs{lhs: 0b1100001110111010101111010011001111010101, rhs: 0b1000001010000011011110110110111000010011, expected: 0}, // lhs = -258860043307 rhs = -538959974893
        TestCaseTwoArgs{lhs: 0b1101010111000101000110011000001111100111, rhs: 0b1001110010110000111001111101001001010001, expected: 0}, // lhs = -181376810009 rhs = -426528746927
        TestCaseTwoArgs{lhs: 0b1000010000010101101111010000111110100111, rhs: 0b1010010101001100000001011110001001100101, expected: 1}, // lhs = -532211232857 rhs = -389566569883
        TestCaseTwoArgs{lhs: 0b1101010001101110000010110010000011110011, rhs: 0b1110110100011001001000101001000011011000, expected: 2}, // lhs = -187132337933 rhs = -81182682920
        TestCaseTwoArgs{lhs: 0b1011001000010111000011001011011101011000, rhs: 0b1110001110110101100011011001100110101011, expected: 2}, // lhs = -334620739752 rhs = -121508095573
        TestCaseTwoArgs{lhs: 219401402336, rhs: 0b1011100111111100101100110100010000100110, expected: 0b1111111111111111111111111111111111111111}, // rhs = -300703071194 expected = -1
        TestCaseTwoArgs{lhs: 502576141984, rhs: 0b1101111011111111010011101110001000001110, expected: 0b1111111111111111111111111111111111111100}, // rhs = -141745528306 expected = -4
        TestCaseTwoArgs{lhs: 0b1010101001001000011100101100010101001111, rhs: 0b1110000111001010101111011001001000111000, expected: 2}, // lhs = -368151706289 rhs = -129742564808
        TestCaseTwoArgs{lhs: 403236965562, rhs: 0b1100010011111001101110100010101101111000, expected: 0b1111111111111111111111111111111111111110}, // rhs = -253508310152 expected = -2
        TestCaseTwoArgs{lhs: 13984625294, rhs: 0b1110111001100001111011001101011101110000, expected: 0b1111111111111111111111111111111111111111}, // rhs = -75666499728 expected = -1
        TestCaseTwoArgs{lhs: 0b1100100111010000100010110011001011001100, rhs: 492755145633, expected: 0b1111111111111111111111111111111111111111}, // lhs = -232724417844 expected = -1
        TestCaseTwoArgs{lhs: 0b1011010000011001000000010100110100001111, rhs: 0b1010001001010010000001101110000011111110, expected: 0}, // lhs = -325997998833 rhs = -402350743298
        TestCaseTwoArgs{lhs: 14413016876, rhs: 0b1111100101011010010001111100010011001001, expected: 0b1111111111111111111111111111111111111111}, // rhs = -28550118199 expected = -1
        TestCaseTwoArgs{lhs: 0b1001001001011101001010100000011101000111, rhs: 0b1011010101000001010010101001011000001101, expected: 1}, // lhs = -470883367097 rhs = -321027140083
        TestCaseTwoArgs{lhs: 0b1011001010110010011001100001011110011011, rhs: 154940138285, expected: 0b1111111111111111111111111111111111111101}, // lhs = -332014413925 expected = -3
        TestCaseTwoArgs{lhs: 371653413095, rhs: 248554614181, expected: 1},
        TestCaseTwoArgs{lhs: 0b1011111011110011011110100001100100001111, rhs: 113156941193, expected: 0b1111111111111111111111111111111111111101}, // lhs = -279382976241 expected = -3
        TestCaseTwoArgs{lhs: 0b1100011110001010110111011101110111100100, rhs: 351363383958, expected: 0b1111111111111111111111111111111111111111}, // lhs = -242483339804 expected = -1
        TestCaseTwoArgs{lhs: 339637101057, rhs: 77136613325, expected: 4},
        TestCaseTwoArgs{lhs: 462890202666, rhs: 283067043353, expected: 1},
        TestCaseTwoArgs{lhs: 0b1011010001100110010010001010010111111000, rhs: 0b1001101001110100101011110011011100010001, expected: 0}, // lhs = -324701477384 rhs = -436129024239
        TestCaseTwoArgs{lhs: 303139045859, rhs: 2781992467, expected: 108},
        TestCaseTwoArgs{lhs: 41647730396, rhs: 37473686478, expected: 1},
        TestCaseTwoArgs{lhs: 0b1101100111010001101010110110011001101001, rhs: 85743338444, expected: 0b1111111111111111111111111111111111111110}, // lhs = -163986053527 expected = -2
        TestCaseTwoArgs{lhs: 0b1000101010000010010001000101101001011101, rhs: 0b1111011000011000100000111000000110001101, expected: 11}, // lhs = -504620623267 rhs = -42538401395
        TestCaseTwoArgs{lhs: 257842781699, rhs: 0b1000101000000100100010001111101111011000, expected: 0b1111111111111111111111111111111111111111}, // rhs = -506730054696 expected = -1
        TestCaseTwoArgs{lhs: 0b1000101101000000101111011101010101000000, rhs: 0b1000100100011111111100000101011111111010, expected: 0}, // lhs = -501424990912 rhs = -510565263366
        TestCaseTwoArgs{lhs: 504487911347, rhs: 351760753075, expected: 1},
        TestCaseTwoArgs{lhs: 305515922698, rhs: 456152944801, expected: 0},
        TestCaseTwoArgs{lhs: 371931610589, rhs: 83823457894, expected: 4},
        TestCaseTwoArgs{lhs: 0b1001001010011010101101110001010110111100, rhs: 0b1000111100011101111101011110110101001111, expected: 0}, // lhs = -469850712644 rhs = -484828648113
        TestCaseTwoArgs{lhs: 0b1110110111011111101111111111000101001001, rhs: 0b1100001111000011000110101101101100011110, expected: 0}, // lhs = -77850480311 rhs = -258719687906
        TestCaseTwoArgs{lhs: 0b1111101011110000010110111001111000111001, rhs: 409565459128, expected: 0b1111111111111111111111111111111111111111}, // lhs = -21737267655 expected = -1
        TestCaseTwoArgs{lhs: 0b1010001111010011110101001001110101011111, rhs: 0b1001000111010111101111101111010101110110, expected: 0}, // lhs = -395878032033 rhs = -473121753738
        TestCaseTwoArgs{lhs: 0b1100101100000110001101000010011011000010, rhs: 0b1011000100010001100111000010001111010111, expected: 0}, // lhs = -227529185598 rhs = -339006970921
        TestCaseTwoArgs{lhs: 528047114793, rhs: 326160617280, expected: 1},
        TestCaseTwoArgs{lhs: 0b1110010100110000011110000111011000111111, rhs: 228882561713, expected: 0b1111111111111111111111111111111111111111}, // lhs = -115150916033 expected = -1
        TestCaseTwoArgs{lhs: 108089446886, rhs: 150183638304, expected: 0},
        TestCaseTwoArgs{lhs: 0b1001000010001101100001110101110110110101, rhs: 117242093717, expected: 0b1111111111111111111111111111111111111011}, // lhs = -478661878347 expected = -5
        TestCaseTwoArgs{lhs: 466766739297, rhs: 0b1000111110011001111111001111110111111001, expected: 0b1111111111111111111111111111111111111111}, // rhs = -482747810311 expected = -1
        TestCaseTwoArgs{lhs: 0b1110101111110100010010111011011101010100, rhs: 0b1000111010010110010001100111010100000100, expected: 0}, // lhs = -86095710380 rhs = -487105071868
        TestCaseTwoArgs{lhs: 0b1111011001010000100110010000101001011110, rhs: 363506296163, expected: 0b1111111111111111111111111111111111111111}, // lhs = -41597466018 expected = -1
        TestCaseTwoArgs{lhs: 0b1101110110011110110010001011010100011000, rhs: 0b1111101110100110110100101101111001010010, expected: 7}, // lhs = -147659901672 rhs = -18675999150
        TestCaseTwoArgs{lhs: 242926595944, rhs: 0b1101011001011101111001111101111010100111, expected: 0b1111111111111111111111111111111111111110}, // rhs = -178813149529 expected = -2
        TestCaseTwoArgs{lhs: 0b1100011011001101000011001000100010011101, rhs: 0b1101000100001110111010101110101101100110, expected: 1}, // lhs = -245667952483 rhs = -201613186202
        TestCaseTwoArgs{lhs: 0b1111110001001100011001101001100000100011, rhs: 0b1111101010000001001010000010111011111001, expected: 0}, // lhs = -15898077149 rhs = -23602909447
        TestCaseTwoArgs{lhs: 494454034527, rhs: 467967827290, expected: 1},
        TestCaseTwoArgs{lhs: 0b1101011011011010001111011100111010111110, rhs: 0b1011000001100111110100100011001010011011, expected: 0}, // lhs = -176727142722 rhs = -341855554917
        TestCaseTwoArgs{lhs: 0b1100100100000101000111000001100110000010, rhs: 534549216566, expected: 0b1111111111111111111111111111111111111111}, // lhs = -236137473662 expected = -1
        TestCaseTwoArgs{lhs: 171915901552, rhs: 507483128760, expected: 0},
        TestCaseTwoArgs{lhs: 0b1100110010011100010010000111000011000010, rhs: 0b1110001011111111001010011110110101000101, expected: 1}, // lhs = -220716306238 rhs = -124568081083
        TestCaseTwoArgs{lhs: 21990446566, rhs: 416767804363, expected: 0},
        TestCaseTwoArgs{lhs: 0b1101111010101101101010101011100110111110, rhs: 212361791455, expected: 0b1111111111111111111111111111111111111111}, // lhs = -143115241026 expected = -1
        TestCaseTwoArgs{lhs: 290578762350, rhs: 0b1001010000011011110101001001011010101100, expected: 0b1111111111111111111111111111111111111111}, // rhs = -463389550932 expected = -1
        TestCaseTwoArgs{lhs: 291162493062, rhs: 0b1011000101011101011011010110110011100111, expected: 0b1111111111111111111111111111111111111111}, // rhs = -337734963993 expected = -1
        TestCaseTwoArgs{lhs: 0b1100101011100010111101001100011110001000, rhs: 389269575994, expected: 0b1111111111111111111111111111111111111111}, // lhs = -228120541304 expected = -1
        TestCaseTwoArgs{lhs: 0b1001100100101000011001110110101000111010, rhs: 184039128759, expected: 0b1111111111111111111111111111111111111101}, // lhs = -441703765446 expected = -3
        TestCaseTwoArgs{lhs: 192499051998, rhs: 0b1000011010010101011011000000010100001101, expected: 0b1111111111111111111111111111111111111111}, // rhs = -521479125747 expected = -1
        TestCaseTwoArgs{lhs: 347316520807, rhs: 0b1111111000011101010101000100000011110010, expected: 0b1111111111111111111111111111111111010101}, // rhs = -8097873678 expected = -43
        TestCaseTwoArgs{lhs: 0b1011010000100011011000001011111111110100, rhs: 0b1000011000000000111101111110011000100011, expected: 0}, // lhs = -325823971340 rhs = -523969763805
        TestCaseTwoArgs{lhs: 0b1101110010101001100111011111100001011011, rhs: 0b1011001000010100101000010010111101010011, expected: 0}, // lhs = -151773120421 rhs = -334661341357
        TestCaseTwoArgs{lhs: 87319698221, rhs: 0b1101011011001101111100100100010001111111, expected: 0b1111111111111111111111111111111111111111}, // rhs = -176933419905 expected = -1
        TestCaseTwoArgs{lhs: 358712935460, rhs: 0b1110111010011000000001000101110011111011, expected: 0b1111111111111111111111111111111111111011}, // rhs = -74758988549 expected = -5
        TestCaseTwoArgs{lhs: 392753496315, rhs: 196209644640, expected: 2},
        TestCaseTwoArgs{lhs: 195348992788, rhs: 439445408862, expected: 0},
        TestCaseTwoArgs{lhs: 205148721356, rhs: 409429081515, expected: 0},
        TestCaseTwoArgs{lhs: 0b1010101011011111101001001111011010111010, rhs: 0b1100000001101110100011010000011110111101, expected: 1}, // lhs = -365615057222 rhs = -273023170627
        TestCaseTwoArgs{lhs: 140661207490, rhs: 0b1100101011011001100000101101001011110101, expected: 0b1111111111111111111111111111111111111111}, // rhs = -228279004427 expected = -1
        TestCaseTwoArgs{lhs: 220712959695, rhs: 0b1000001010110000110001111111110111100110, expected: 0b1111111111111111111111111111111111111111}, // rhs = -538199982618 expected = -1
        TestCaseTwoArgs{lhs: 492490659115, rhs: 0b1111010010111100110100100010100001100010, expected: 0b1111111111111111111111111111111111110101}, // rhs = -48371718046 expected = -11
        TestCaseTwoArgs{lhs: 427407510269, rhs: 345880483418, expected: 1},
        TestCaseTwoArgs{lhs: 332559268009, rhs: 0b1011010100101111000010001100001011001010, expected: 0b1111111111111111111111111111111111111110}, // rhs = -321333443894 expected = -2
        TestCaseTwoArgs{lhs: 0b1110001000111111101111111101001010111111, rhs: 361243125610, expected: 0b1111111111111111111111111111111111111111}, // lhs = -127779482945 expected = -1
        TestCaseTwoArgs{lhs: 316612323236, rhs: 222121866125, expected: 1},
        TestCaseTwoArgs{lhs: 0b1110000111000101010111110011000001101100, rhs: 0b1110111010100011001100000100011101111011, expected: 1}, // lhs = -129832636308 rhs = -74571561093
        TestCaseTwoArgs{lhs: 0b1110111111000100110101111000011000011111, rhs: 0b1110101100101000001101111110011101100110, expected: 0}, // lhs = -69711985121 rhs = -89519560858
        TestCaseTwoArgs{lhs: 0b1110011000110000101000011100101111001101, rhs: 219806196849, expected: 0b1111111111111111111111111111111111111111}, // lhs = -110853239859 expected = -1
        TestCaseTwoArgs{lhs: 0b1010100010000010011101100001100101010001, rhs: 456930244758, expected: 0b1111111111111111111111111111111111111111}, // lhs = -375768344239 expected = -1
        TestCaseTwoArgs{lhs: 136556544286, rhs: 0b1000001011011101011010011011010110011110, expected: 0b1111111111111111111111111111111111111111}, // rhs = -537451186786 expected = -1
        TestCaseTwoArgs{lhs: 13251109552, rhs: 240743052803, expected: 0},
        TestCaseTwoArgs{lhs: 434156274634, rhs: 0b1011000100101001011101111011100010110110, expected: 0b1111111111111111111111111111111111111110}, // rhs = -338606704458 expected = -2
        TestCaseTwoArgs{lhs: 0b1010110110101010001101111101110001010000, rhs: 0b1101110100000111010001101101111110111011, expected: 2}, // lhs = -353626497968 rhs = -150201770053
        TestCaseTwoArgs{lhs: 37472296808, rhs: 0b1111001011110011001011101010111100011001, expected: 0b1111111111111111111111111111111111111111}, // rhs = -56049619175 expected = -1
        TestCaseTwoArgs{lhs: 0b1101101101100001111100111011110110000100, rhs: 0b1011100111011110101111111001101110111001, expected: 0}, // lhs = -157270426236 rhs = -301205578823
        TestCaseTwoArgs{lhs: 92165460407, rhs: 0b1001000100101100111010010011011110001100, expected: 0b1111111111111111111111111111111111111111}, // rhs = -475987888244 expected = -1
        TestCaseTwoArgs{lhs: 460528731319, rhs: 0b1011110111111001000100000110110101000101, expected: 0b1111111111111111111111111111111111111110}, // rhs = -283584205499 expected = -2
        TestCaseTwoArgs{lhs: 528053055926, rhs: 330345538857, expected: 1},
        TestCaseTwoArgs{lhs: 273330844076, rhs: 185981372749, expected: 1},
        TestCaseTwoArgs{lhs: 0b1000111001001111100001001110001000111010, rhs: 28372168152, expected: 0b1111111111111111111111111111111111101110}, // lhs = -488292163014 expected = -18
        TestCaseTwoArgs{lhs: 375496942792, rhs: 0b1001011100111100110010101101010111111101, expected: 0b1111111111111111111111111111111111111111}, // rhs = -449951640067 expected = -1
        TestCaseTwoArgs{lhs: 20754194703, rhs: 0b1011110000001011010111111001100100110011, expected: 0b1111111111111111111111111111111111111111}, // rhs = -291866961613 expected = -1
        TestCaseTwoArgs{lhs: 0b1011011110110000000111111010111100101101, rhs: 0b1111100011010010011000010111111110001110, expected: 10}, // lhs = -310577746131 rhs = -30830133362
        TestCaseTwoArgs{lhs: 0b1001011001100100011001000010001110011011, rhs: 0b1100110000101111011000011000101110001111, expected: 2}, // lhs = -453582249061 rhs = -222543377521
        TestCaseTwoArgs{lhs: 121532862500, rhs: 0b1001111010100010101111001010000101110100, expected: 0b1111111111111111111111111111111111111111}, // rhs = -418176523916 expected = -1
        TestCaseTwoArgs{lhs: 335657415511, rhs: 447921755291, expected: 0},
        TestCaseTwoArgs{lhs: 0b1011110000010000011110001010010111011111, rhs: 0b1100010001101100110010110011011000111111, expected: 1}, // lhs = -291781433889 rhs = -255872780737
        TestCaseTwoArgs{lhs: 471240662700, rhs: 25222805948, expected: 18},
        TestCaseTwoArgs{lhs: 412020840670, rhs: 504797002810, expected: 0},
        TestCaseTwoArgs{lhs: 44391672022, rhs: 0b1011010111001010100011010011111011000011, expected: 0b1111111111111111111111111111111111111111}, // rhs = -318724292925 expected = -1
        TestCaseTwoArgs{lhs: 0b1010100101001111111100011111011010000001, rhs: 0b1101111110100101110101101101111011100110, expected: 2}, // lhs = -372320897407 rhs = -138951598362
        TestCaseTwoArgs{lhs: 321785623117, rhs: 542404598325, expected: 0},
        TestCaseTwoArgs{lhs: 0b1100001111011101101001110100111100100110, rhs: 0b1111001111011010110010011110110110100001, expected: 4}, // lhs = -258274275546 rhs = -52163908191
        TestCaseTwoArgs{lhs: 82010006110, rhs: 0b1111100011000110101001101000111100000110, expected: 0b1111111111111111111111111111111111111101}, // rhs = -31026934010 expected = -3
        TestCaseTwoArgs{lhs: 353502319353, rhs: 0b1000011000111001100100001011100001101110, expected: 0b1111111111111111111111111111111111111111}, // rhs = -523020224402 expected = -1
        TestCaseTwoArgs{lhs: 0b1100101011001110101111100000001000011001, rhs: 81065274105, expected: 0b1111111111111111111111111111111111111101}, // lhs = -228459675111 expected = -3
        TestCaseTwoArgs{lhs: 0b1010011101101111011111000001101011100101, rhs: 0b1100001011100110111101101011000010111101, expected: 1}, // lhs = -380381685019 rhs = -262413045571
        TestCaseTwoArgs{lhs: 0b1000011000101001110110111111110000011100, rhs: 485374052445, expected: 0b1111111111111111111111111111111111111110}, // lhs = -523283727332 expected = -2
        TestCaseTwoArgs{lhs: 530913391588, rhs: 0b1111011100000010011010010111111001101001, expected: 0b1111111111111111111111111111111111110010}, // rhs = -38614237591 expected = -14
        TestCaseTwoArgs{lhs: 0b1000100001000110000101001110111110001111, rhs: 0b1101001111100101100101001010000111110010, expected: 2}, // lhs = -514220298353 rhs = -189421805070
        TestCaseTwoArgs{lhs: 0b1010001111111111001100100111010000111001, rhs: 225133932842, expected: 0b1111111111111111111111111111111111111110}, // lhs = -395150461895 expected = -2
        TestCaseTwoArgs{lhs: 0b1101100100111011000001001010010000001111, rhs: 157229720929, expected: 0b1111111111111111111111111111111111111110}, // lhs = -166513564657 expected = -2
        TestCaseTwoArgs{lhs: 0b1001110011111100000010110010001011011110, rhs: 0b1010000011011001101001011111001010100111, expected: 1}, // lhs = -425268141346 rhs = -408665328985
        TestCaseTwoArgs{lhs: 122970721233, rhs: 0b1000101111111000111110100100110000000100, expected: 0b1111111111111111111111111111111111111111}, // rhs = -498334020604 expected = -1
        TestCaseTwoArgs{lhs: 0b1110011011011011011000010001001011000011, rhs: 0b1101111101110001000001000110010110101000, expected: 0}, // lhs = -107988577597 rhs = -139837807192
        TestCaseTwoArgs{lhs: 96109193725, rhs: 393224498473, expected: 0},
        TestCaseTwoArgs{lhs: 0b1000100000010100110000001101011000011101, rhs: 537128864704, expected: 0b1111111111111111111111111111111111111111}, // lhs = -515047893475 expected = -1
        TestCaseTwoArgs{lhs: 322061661512, rhs: 0b1000100001011100101000110110010011000000, expected: 0b1111111111111111111111111111111111111111}, // rhs = -513841863488 expected = -1
        TestCaseTwoArgs{lhs: 0b1010011111110000100110111110011101110111, rhs: 0b1100111110010111100000101100101000000111, expected: 1}, // lhs = -378215340169 rhs = -207911466489
        TestCaseTwoArgs{lhs: 520233837046, rhs: 0b1100011010101111000101101101111111010100, expected: 0b1111111111111111111111111111111111111101}, // rhs = -246170591276 expected = -3
        TestCaseTwoArgs{lhs: 390240407292, rhs: 162518287840, expected: 2},
        TestCaseTwoArgs{lhs: 302885067939, rhs: 0b1001111011011010000110000010101000010101, expected: 0b1111111111111111111111111111111111111111}, // rhs = -417247778283 expected = -1
        TestCaseTwoArgs{lhs: 0b1001111111111101111111000100011010011001, rhs: 489836150079, expected: 0b1111111111111111111111111111111111111111}, // lhs = -412350658919 expected = -1
        TestCaseTwoArgs{lhs: 0b1011001001000100111100110011100110110011, rhs: 290571927488, expected: 0b1111111111111111111111111111111111111110}, // lhs = -333850658381 expected = -2
        TestCaseTwoArgs{lhs: 349451315046, rhs: 0b1010011001101111111101000011111110010010, expected: 0b1111111111111111111111111111111111111111}, // rhs = -384668778606 expected = -1
        TestCaseTwoArgs{lhs: 321780362365, rhs: 0b1111101010001101011001111111111101001010, expected: 0b1111111111111111111111111111111111110010}, // rhs = -23397400758 expected = -14
        TestCaseTwoArgs{lhs: 476159180263, rhs: 374440775241, expected: 1},
        TestCaseTwoArgs{lhs: 0b1110110111000000111011101111111000010000, rhs: 97185195086, expected: 0b1111111111111111111111111111111111111111}, // lhs = -78367490544 expected = -1
        TestCaseTwoArgs{lhs: 443760614804, rhs: 0b1101011110001001111010000101010110001100, expected: 0b1111111111111111111111111111111111111101}, // rhs = -173779954292 expected = -3
        TestCaseTwoArgs{lhs: 421295878163, rhs: 357879691256, expected: 1},
        TestCaseTwoArgs{lhs: 0b1100110110001100010000100100000111100010, rhs: 237246873491, expected: 0b1111111111111111111111111111111111111111}, // lhs = -216690179614 expected = -1
        TestCaseTwoArgs{lhs: 125671741869, rhs: 0b1111111100110011101100010001010110011111, expected: 0b1111111111111111111111111111111111011011}, // rhs = -3427723873 expected = -37
        TestCaseTwoArgs{lhs: 0b1110000100101010110100001100111101100001, rhs: 0b1111011111001011110001001100011011011001, expected: 3}, // lhs = -132425658527 rhs = -35236034855
        TestCaseTwoArgs{lhs: 320662505243, rhs: 0b1110001011001111000100111110110001011111, expected: 0b1111111111111111111111111111111111111101}, // rhs = -125374829473 expected = -3
        TestCaseTwoArgs{lhs: 18549805196, rhs: 0b1010010110010011010100011000010010100001, expected: 0b1111111111111111111111111111111111111111}, // rhs = -388370430815 expected = -1
        TestCaseTwoArgs{lhs: 343363630916, rhs: 0b1110101111100111101000100010110111001011, expected: 0b1111111111111111111111111111111111111100}, // rhs = -86308147765 expected = -4
        TestCaseTwoArgs{lhs: 481802119386, rhs: 0b1100110101000010110001101010001100100010, expected: 0b1111111111111111111111111111111111111101}, // rhs = -217923017950 expected = -3
        TestCaseTwoArgs{lhs: 0b1000111111111010100110011110011110100000, rhs: 0b1111101011000100110010000101001100001000, expected: 21}, // lhs = -481126914144 rhs = -22468340984
        TestCaseTwoArgs{lhs: 0b1010000110011010110111000111100101001010, rhs: 339929034625, expected: 0b1111111111111111111111111111111111111110}, // lhs = -405423752886 expected = -2
        TestCaseTwoArgs{lhs: 0b1011011010011000011011100001010111100100, rhs: 165279265431, expected: 0b1111111111111111111111111111111111111110}, // lhs = -315270228508 expected = -2
        TestCaseTwoArgs{lhs: 504693167469, rhs: 333872487735, expected: 1},
        TestCaseTwoArgs{lhs: 0b1101100011110001111111100111101010000111, rhs: 495274435728, expected: 0b1111111111111111111111111111111111111111}, // lhs = -167738705273 expected = -1
        TestCaseTwoArgs{lhs: 224900225239, rhs: 0b1111111111011111101011010101111001111101, expected: 0b1111111111111111111111111111111001100001}, // rhs = -542286211 expected = -415
        TestCaseTwoArgs{lhs: 5178327209, rhs: 321781604195, expected: 0},
        TestCaseTwoArgs{lhs: 0b1000110100001001011101101001101101011001, rhs: 0b1100101111000000011001101011110100010111, expected: 2}, // lhs = -493762471079 rhs = -224405308137
        TestCaseTwoArgs{lhs: 0b1001010010100010011101101110110101100010, rhs: 0b1110000000110000010011101010000111010010, expected: 3}, // lhs = -461130764958 rhs = -136628493870
        TestCaseTwoArgs{lhs: 0b1100001000111001001001100110101101110100, rhs: 117839576785, expected: 0b1111111111111111111111111111111111111101}, // lhs = -265329153164 expected = -3
        TestCaseTwoArgs{lhs: 365896660327, rhs: 292146908126, expected: 1},
        TestCaseTwoArgs{lhs: 0b1001111011000011000100011111001111101100, rhs: 188191469863, expected: 0b1111111111111111111111111111111111111101}, // lhs = -417634061332 expected = -3
        TestCaseTwoArgs{lhs: 0b1100100110001011010101110000111001000011, rhs: 162228446812, expected: 0b1111111111111111111111111111111111111110}, // lhs = -233885462973 expected = -2
        TestCaseTwoArgs{lhs: 18757041485, rhs: 0b1011110011110000011010101100100000011011, expected: 0b1111111111111111111111111111111111111111}, // rhs = -288024246245 expected = -1
        TestCaseTwoArgs{lhs: 0b1100111001110111101111100100110001101111, rhs: 0b1000000001111111010000100000001001110011, expected: 0}, // lhs = -212739404689 rhs = -547620781453
        TestCaseTwoArgs{lhs: 0b1011001001100110011110001111011000101101, rhs: 0b1000010111000101100000110001101100100010, expected: 0}, // lhs = -333288245715 rhs = -524967273694
        TestCaseTwoArgs{lhs: 317577646116, rhs: 0b1011001100000100010010111001001110110101, expected: 0b1111111111111111111111111111111111111111}, // rhs = -330640419915 expected = -1

        // Edge cases
        TestCaseTwoArgs{lhs: 0, rhs: 549755813887, expected: 0},
        TestCaseTwoArgs{lhs: 0, rhs: 0b1000000000000000000000000000000000000000, expected: 0}, // rhs = -549755813888
        TestCaseTwoArgs{lhs: 549755813887, rhs: 549755813887, expected: 1},
        TestCaseTwoArgs{lhs: 549755813887, rhs: 0b1000000000000000000000000000000000000000, expected: 0b1111111111111111111111111111111111111111}, // rhs = -549755813888 expected = -1
        TestCaseTwoArgs{lhs: 0b1000000000000000000000000000000000000000, rhs: 549755813887, expected: 0b1111111111111111111111111111111111111110}, // lhs = -549755813888 expected = -2
        TestCaseTwoArgs{lhs: 0b1000000000000000000000000000000000000000, rhs: 0b1000000000000000000000000000000000000000, expected: 1}, // lhs = -549755813888 rhs = -549755813888
    ];

    #[test]
    fn test_i40() {
        for case in test_cases.span() {
            let mut state = RTStateOps::new();
            assert_eq!(__llvm_sdiv_n_n_n(ref state, *case.lhs, *case.rhs), *case.expected);
        }
    }
}

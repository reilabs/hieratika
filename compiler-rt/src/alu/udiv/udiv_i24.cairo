use crate::alu::udiv::udiv;
use crate::integer::u24::u24;

pub fn __llvm_udiv_x_x_x(lhs: u128, rhs: u128) -> u128 {
    udiv::<u24>(lhs, rhs)
}

#[cfg(test)]
mod tests {
    use super::__llvm_udiv_x_x_x;
    use crate::alu::test_case::TestCaseTwoArgs;
    #[cairofmt::skip]
    pub const test_cases: [TestCaseTwoArgs; 242] = [
        // Random test cases
        TestCaseTwoArgs{lhs: 3511883, rhs: 7577050, expected: 0},
        TestCaseTwoArgs{lhs: 3429199, rhs: 14473292, expected: 0},
        TestCaseTwoArgs{lhs: 9328865, rhs: 4767068, expected: 1},
        TestCaseTwoArgs{lhs: 15738117, rhs: 289320, expected: 54},
        TestCaseTwoArgs{lhs: 15019971, rhs: 2308207, expected: 6},
        TestCaseTwoArgs{lhs: 16303789, rhs: 2397906, expected: 6},
        TestCaseTwoArgs{lhs: 3501098, rhs: 5906652, expected: 0},
        TestCaseTwoArgs{lhs: 1627528, rhs: 11228207, expected: 0},
        TestCaseTwoArgs{lhs: 4250230, rhs: 7367739, expected: 0},
        TestCaseTwoArgs{lhs: 8808467, rhs: 6856659, expected: 1},
        TestCaseTwoArgs{lhs: 16066665, rhs: 9952658, expected: 1},
        TestCaseTwoArgs{lhs: 16398124, rhs: 5141142, expected: 3},
        TestCaseTwoArgs{lhs: 8902332, rhs: 13952072, expected: 0},
        TestCaseTwoArgs{lhs: 8909327, rhs: 6530038, expected: 1},
        TestCaseTwoArgs{lhs: 9229434, rhs: 5908381, expected: 1},
        TestCaseTwoArgs{lhs: 8324654, rhs: 9026480, expected: 0},
        TestCaseTwoArgs{lhs: 15917029, rhs: 2393862, expected: 6},
        TestCaseTwoArgs{lhs: 12742734, rhs: 6166313, expected: 2},
        TestCaseTwoArgs{lhs: 14957771, rhs: 4508009, expected: 3},
        TestCaseTwoArgs{lhs: 4480723, rhs: 3605590, expected: 1},
        TestCaseTwoArgs{lhs: 15810709, rhs: 12362664, expected: 1},
        TestCaseTwoArgs{lhs: 10247554, rhs: 2596274, expected: 3},
        TestCaseTwoArgs{lhs: 11872143, rhs: 14155829, expected: 0},
        TestCaseTwoArgs{lhs: 1768613, rhs: 1593193, expected: 1},
        TestCaseTwoArgs{lhs: 14178129, rhs: 10725617, expected: 1},
        TestCaseTwoArgs{lhs: 16504462, rhs: 2355662, expected: 7},
        TestCaseTwoArgs{lhs: 2345591, rhs: 11610001, expected: 0},
        TestCaseTwoArgs{lhs: 3885403, rhs: 7672872, expected: 0},
        TestCaseTwoArgs{lhs: 15011849, rhs: 12922466, expected: 1},
        TestCaseTwoArgs{lhs: 1992072, rhs: 1923253, expected: 1},
        TestCaseTwoArgs{lhs: 5295047, rhs: 14419446, expected: 0},
        TestCaseTwoArgs{lhs: 4848857, rhs: 3023876, expected: 1},
        TestCaseTwoArgs{lhs: 13292698, rhs: 6168075, expected: 2},
        TestCaseTwoArgs{lhs: 7299991, rhs: 10610885, expected: 0},
        TestCaseTwoArgs{lhs: 2119334, rhs: 5896918, expected: 0},
        TestCaseTwoArgs{lhs: 6485370, rhs: 12498039, expected: 0},
        TestCaseTwoArgs{lhs: 6724744, rhs: 12649994, expected: 0},
        TestCaseTwoArgs{lhs: 10097040, rhs: 2535342, expected: 3},
        TestCaseTwoArgs{lhs: 873390, rhs: 11278662, expected: 0},
        TestCaseTwoArgs{lhs: 1344693, rhs: 4603015, expected: 0},
        TestCaseTwoArgs{lhs: 8143870, rhs: 9679872, expected: 0},
        TestCaseTwoArgs{lhs: 14975544, rhs: 9173000, expected: 1},
        TestCaseTwoArgs{lhs: 8864532, rhs: 10527194, expected: 0},
        TestCaseTwoArgs{lhs: 1342458, rhs: 767185, expected: 1},
        TestCaseTwoArgs{lhs: 1474087, rhs: 13273442, expected: 0},
        TestCaseTwoArgs{lhs: 3280012, rhs: 11679523, expected: 0},
        TestCaseTwoArgs{lhs: 10691870, rhs: 10459069, expected: 1},
        TestCaseTwoArgs{lhs: 15581332, rhs: 1384052, expected: 11},
        TestCaseTwoArgs{lhs: 2482485, rhs: 12705944, expected: 0},
        TestCaseTwoArgs{lhs: 6667108, rhs: 15722668, expected: 0},
        TestCaseTwoArgs{lhs: 11474228, rhs: 8484982, expected: 1},
        TestCaseTwoArgs{lhs: 6178158, rhs: 4181011, expected: 1},
        TestCaseTwoArgs{lhs: 413395, rhs: 2550149, expected: 0},
        TestCaseTwoArgs{lhs: 12226421, rhs: 9208415, expected: 1},
        TestCaseTwoArgs{lhs: 11167490, rhs: 15354041, expected: 0},
        TestCaseTwoArgs{lhs: 7743314, rhs: 2825832, expected: 2},
        TestCaseTwoArgs{lhs: 9585059, rhs: 9683648, expected: 0},
        TestCaseTwoArgs{lhs: 3480556, rhs: 4447234, expected: 0},
        TestCaseTwoArgs{lhs: 7007029, rhs: 7367387, expected: 0},
        TestCaseTwoArgs{lhs: 11433708, rhs: 9649799, expected: 1},
        TestCaseTwoArgs{lhs: 2430040, rhs: 11075178, expected: 0},
        TestCaseTwoArgs{lhs: 12992569, rhs: 12610888, expected: 1},
        TestCaseTwoArgs{lhs: 12627514, rhs: 9393954, expected: 1},
        TestCaseTwoArgs{lhs: 7242453, rhs: 2583451, expected: 2},
        TestCaseTwoArgs{lhs: 2760931, rhs: 8202810, expected: 0},
        TestCaseTwoArgs{lhs: 3127407, rhs: 7876779, expected: 0},
        TestCaseTwoArgs{lhs: 16307070, rhs: 1578634, expected: 10},
        TestCaseTwoArgs{lhs: 2380365, rhs: 9719368, expected: 0},
        TestCaseTwoArgs{lhs: 15322105, rhs: 11202465, expected: 1},
        TestCaseTwoArgs{lhs: 5796100, rhs: 6525564, expected: 0},
        TestCaseTwoArgs{lhs: 15537001, rhs: 8778049, expected: 1},
        TestCaseTwoArgs{lhs: 3717894, rhs: 10890508, expected: 0},
        TestCaseTwoArgs{lhs: 2760730, rhs: 8632569, expected: 0},
        TestCaseTwoArgs{lhs: 10539123, rhs: 3076868, expected: 3},
        TestCaseTwoArgs{lhs: 1922845, rhs: 16335235, expected: 0},
        TestCaseTwoArgs{lhs: 7470460, rhs: 13268739, expected: 0},
        TestCaseTwoArgs{lhs: 10555560, rhs: 12102645, expected: 0},
        TestCaseTwoArgs{lhs: 12122551, rhs: 10258856, expected: 1},
        TestCaseTwoArgs{lhs: 13768670, rhs: 60051, expected: 229},
        TestCaseTwoArgs{lhs: 10043047, rhs: 2742278, expected: 3},
        TestCaseTwoArgs{lhs: 3664730, rhs: 11212664, expected: 0},
        TestCaseTwoArgs{lhs: 6621363, rhs: 10603601, expected: 0},
        TestCaseTwoArgs{lhs: 8162586, rhs: 4577401, expected: 1},
        TestCaseTwoArgs{lhs: 8268401, rhs: 15246559, expected: 0},
        TestCaseTwoArgs{lhs: 9653446, rhs: 15156546, expected: 0},
        TestCaseTwoArgs{lhs: 12555232, rhs: 13590698, expected: 0},
        TestCaseTwoArgs{lhs: 16597949, rhs: 1754706, expected: 9},
        TestCaseTwoArgs{lhs: 14707001, rhs: 8308472, expected: 1},
        TestCaseTwoArgs{lhs: 8012379, rhs: 13611367, expected: 0},
        TestCaseTwoArgs{lhs: 2586248, rhs: 12640614, expected: 0},
        TestCaseTwoArgs{lhs: 8996688, rhs: 6189648, expected: 1},
        TestCaseTwoArgs{lhs: 14311527, rhs: 11546494, expected: 1},
        TestCaseTwoArgs{lhs: 246053, rhs: 15387455, expected: 0},
        TestCaseTwoArgs{lhs: 4663671, rhs: 3357307, expected: 1},
        TestCaseTwoArgs{lhs: 6084609, rhs: 80712, expected: 75},
        TestCaseTwoArgs{lhs: 6449559, rhs: 739472, expected: 8},
        TestCaseTwoArgs{lhs: 5988955, rhs: 6031811, expected: 0},
        TestCaseTwoArgs{lhs: 1920927, rhs: 5409388, expected: 0},
        TestCaseTwoArgs{lhs: 5462273, rhs: 3644308, expected: 1},
        TestCaseTwoArgs{lhs: 14967059, rhs: 2743311, expected: 5},
        TestCaseTwoArgs{lhs: 10376782, rhs: 12405778, expected: 0},
        TestCaseTwoArgs{lhs: 5224716, rhs: 7359923, expected: 0},
        TestCaseTwoArgs{lhs: 4627827, rhs: 5269103, expected: 0},
        TestCaseTwoArgs{lhs: 8493777, rhs: 16335269, expected: 0},
        TestCaseTwoArgs{lhs: 638508, rhs: 8731085, expected: 0},
        TestCaseTwoArgs{lhs: 13729730, rhs: 1336700, expected: 10},
        TestCaseTwoArgs{lhs: 15510626, rhs: 2124510, expected: 7},
        TestCaseTwoArgs{lhs: 4882961, rhs: 89319, expected: 54},
        TestCaseTwoArgs{lhs: 11187202, rhs: 629203, expected: 17},
        TestCaseTwoArgs{lhs: 2947116, rhs: 1730927, expected: 1},
        TestCaseTwoArgs{lhs: 1341933, rhs: 11622176, expected: 0},
        TestCaseTwoArgs{lhs: 5419225, rhs: 14664299, expected: 0},
        TestCaseTwoArgs{lhs: 1183816, rhs: 9801809, expected: 0},
        TestCaseTwoArgs{lhs: 4704780, rhs: 6166245, expected: 0},
        TestCaseTwoArgs{lhs: 15102149, rhs: 8188529, expected: 1},
        TestCaseTwoArgs{lhs: 3413889, rhs: 2008169, expected: 1},
        TestCaseTwoArgs{lhs: 1360565, rhs: 12742341, expected: 0},
        TestCaseTwoArgs{lhs: 15410368, rhs: 3391658, expected: 4},
        TestCaseTwoArgs{lhs: 1715882, rhs: 2120937, expected: 0},
        TestCaseTwoArgs{lhs: 14488331, rhs: 3468446, expected: 4},
        TestCaseTwoArgs{lhs: 8641858, rhs: 15691761, expected: 0},
        TestCaseTwoArgs{lhs: 3317316, rhs: 10867658, expected: 0},
        TestCaseTwoArgs{lhs: 1890549, rhs: 12818213, expected: 0},
        TestCaseTwoArgs{lhs: 909610, rhs: 5540362, expected: 0},
        TestCaseTwoArgs{lhs: 5685967, rhs: 10620704, expected: 0},
        TestCaseTwoArgs{lhs: 12431110, rhs: 9006876, expected: 1},
        TestCaseTwoArgs{lhs: 12683543, rhs: 10813831, expected: 1},
        TestCaseTwoArgs{lhs: 12931335, rhs: 16394610, expected: 0},
        TestCaseTwoArgs{lhs: 5561748, rhs: 13281906, expected: 0},
        TestCaseTwoArgs{lhs: 11970186, rhs: 13948958, expected: 0},
        TestCaseTwoArgs{lhs: 2549451, rhs: 5344374, expected: 0},
        TestCaseTwoArgs{lhs: 9222226, rhs: 1031661, expected: 8},
        TestCaseTwoArgs{lhs: 13520775, rhs: 6972524, expected: 1},
        TestCaseTwoArgs{lhs: 12529486, rhs: 11729676, expected: 1},
        TestCaseTwoArgs{lhs: 1291013, rhs: 3184689, expected: 0},
        TestCaseTwoArgs{lhs: 12928961, rhs: 624935, expected: 20},
        TestCaseTwoArgs{lhs: 7391812, rhs: 13575723, expected: 0},
        TestCaseTwoArgs{lhs: 1300947, rhs: 3643119, expected: 0},
        TestCaseTwoArgs{lhs: 5366861, rhs: 9092845, expected: 0},
        TestCaseTwoArgs{lhs: 4323033, rhs: 14484702, expected: 0},
        TestCaseTwoArgs{lhs: 8252802, rhs: 11792866, expected: 0},
        TestCaseTwoArgs{lhs: 11346807, rhs: 12472991, expected: 0},
        TestCaseTwoArgs{lhs: 11005625, rhs: 11093106, expected: 0},
        TestCaseTwoArgs{lhs: 11492090, rhs: 10839935, expected: 1},
        TestCaseTwoArgs{lhs: 1213114, rhs: 5553060, expected: 0},
        TestCaseTwoArgs{lhs: 13598738, rhs: 9698471, expected: 1},
        TestCaseTwoArgs{lhs: 10794975, rhs: 13386310, expected: 0},
        TestCaseTwoArgs{lhs: 9907636, rhs: 8645944, expected: 1},
        TestCaseTwoArgs{lhs: 8690416, rhs: 10202989, expected: 0},
        TestCaseTwoArgs{lhs: 4436515, rhs: 4823857, expected: 0},
        TestCaseTwoArgs{lhs: 10884498, rhs: 6630465, expected: 1},
        TestCaseTwoArgs{lhs: 3831234, rhs: 10232394, expected: 0},
        TestCaseTwoArgs{lhs: 4369491, rhs: 15971837, expected: 0},
        TestCaseTwoArgs{lhs: 16295841, rhs: 2794921, expected: 5},
        TestCaseTwoArgs{lhs: 10871219, rhs: 1055845, expected: 10},
        TestCaseTwoArgs{lhs: 10679772, rhs: 12395016, expected: 0},
        TestCaseTwoArgs{lhs: 14814391, rhs: 9077466, expected: 1},
        TestCaseTwoArgs{lhs: 1993719, rhs: 11950583, expected: 0},
        TestCaseTwoArgs{lhs: 6976941, rhs: 15405909, expected: 0},
        TestCaseTwoArgs{lhs: 15343287, rhs: 4660707, expected: 3},
        TestCaseTwoArgs{lhs: 14932903, rhs: 6916302, expected: 2},
        TestCaseTwoArgs{lhs: 13662927, rhs: 7476473, expected: 1},
        TestCaseTwoArgs{lhs: 7301505, rhs: 3633273, expected: 2},
        TestCaseTwoArgs{lhs: 15525131, rhs: 16745001, expected: 0},
        TestCaseTwoArgs{lhs: 15019503, rhs: 12168688, expected: 1},
        TestCaseTwoArgs{lhs: 4146590, rhs: 7869189, expected: 0},
        TestCaseTwoArgs{lhs: 5300245, rhs: 15501322, expected: 0},
        TestCaseTwoArgs{lhs: 14989054, rhs: 5958768, expected: 2},
        TestCaseTwoArgs{lhs: 1979280, rhs: 1644484, expected: 1},
        TestCaseTwoArgs{lhs: 12961278, rhs: 10740162, expected: 1},
        TestCaseTwoArgs{lhs: 873384, rhs: 6173922, expected: 0},
        TestCaseTwoArgs{lhs: 9977897, rhs: 12566967, expected: 0},
        TestCaseTwoArgs{lhs: 4582238, rhs: 16617380, expected: 0},
        TestCaseTwoArgs{lhs: 10258920, rhs: 13790595, expected: 0},
        TestCaseTwoArgs{lhs: 11408540, rhs: 1330229, expected: 8},
        TestCaseTwoArgs{lhs: 12393947, rhs: 6450789, expected: 1},
        TestCaseTwoArgs{lhs: 4149583, rhs: 9144570, expected: 0},
        TestCaseTwoArgs{lhs: 10649743, rhs: 5901089, expected: 1},
        TestCaseTwoArgs{lhs: 10743605, rhs: 8710004, expected: 1},
        TestCaseTwoArgs{lhs: 12376163, rhs: 16226251, expected: 0},
        TestCaseTwoArgs{lhs: 4183965, rhs: 1972851, expected: 2},
        TestCaseTwoArgs{lhs: 392669, rhs: 4783981, expected: 0},
        TestCaseTwoArgs{lhs: 9464254, rhs: 6205286, expected: 1},
        TestCaseTwoArgs{lhs: 1824170, rhs: 5589401, expected: 0},
        TestCaseTwoArgs{lhs: 14738185, rhs: 8951657, expected: 1},
        TestCaseTwoArgs{lhs: 16221690, rhs: 10205335, expected: 1},
        TestCaseTwoArgs{lhs: 3471676, rhs: 2515597, expected: 1},
        TestCaseTwoArgs{lhs: 6311778, rhs: 995132, expected: 6},
        TestCaseTwoArgs{lhs: 11419833, rhs: 5755679, expected: 1},
        TestCaseTwoArgs{lhs: 11576909, rhs: 16437812, expected: 0},
        TestCaseTwoArgs{lhs: 1716612, rhs: 9627215, expected: 0},
        TestCaseTwoArgs{lhs: 13270134, rhs: 4212713, expected: 3},
        TestCaseTwoArgs{lhs: 9775394, rhs: 1298374, expected: 7},
        TestCaseTwoArgs{lhs: 10540093, rhs: 5558051, expected: 1},
        TestCaseTwoArgs{lhs: 3901015, rhs: 11947580, expected: 0},
        TestCaseTwoArgs{lhs: 13094881, rhs: 9899075, expected: 1},
        TestCaseTwoArgs{lhs: 8473387, rhs: 6359548, expected: 1},
        TestCaseTwoArgs{lhs: 3950708, rhs: 11123765, expected: 0},
        TestCaseTwoArgs{lhs: 106738, rhs: 12537316, expected: 0},
        TestCaseTwoArgs{lhs: 10620853, rhs: 7264907, expected: 1},
        TestCaseTwoArgs{lhs: 11876844, rhs: 15304738, expected: 0},
        TestCaseTwoArgs{lhs: 13254551, rhs: 11517075, expected: 1},
        TestCaseTwoArgs{lhs: 5821196, rhs: 10001133, expected: 0},
        TestCaseTwoArgs{lhs: 10795477, rhs: 2351093, expected: 4},
        TestCaseTwoArgs{lhs: 4980369, rhs: 13944468, expected: 0},
        TestCaseTwoArgs{lhs: 5885138, rhs: 11904688, expected: 0},
        TestCaseTwoArgs{lhs: 6509011, rhs: 16117889, expected: 0},
        TestCaseTwoArgs{lhs: 12551582, rhs: 6561409, expected: 1},
        TestCaseTwoArgs{lhs: 11919448, rhs: 11054385, expected: 1},
        TestCaseTwoArgs{lhs: 2243546, rhs: 15185282, expected: 0},
        TestCaseTwoArgs{lhs: 10066410, rhs: 11172885, expected: 0},
        TestCaseTwoArgs{lhs: 6559946, rhs: 14800890, expected: 0},
        TestCaseTwoArgs{lhs: 12904110, rhs: 13751200, expected: 0},
        TestCaseTwoArgs{lhs: 3121529, rhs: 7854673, expected: 0},
        TestCaseTwoArgs{lhs: 13519491, rhs: 11403059, expected: 1},
        TestCaseTwoArgs{lhs: 9091134, rhs: 6083891, expected: 1},
        TestCaseTwoArgs{lhs: 3907992, rhs: 10682563, expected: 0},
        TestCaseTwoArgs{lhs: 13979741, rhs: 11330892, expected: 1},
        TestCaseTwoArgs{lhs: 1166980, rhs: 14793350, expected: 0},
        TestCaseTwoArgs{lhs: 15235927, rhs: 6868330, expected: 2},
        TestCaseTwoArgs{lhs: 6801530, rhs: 16043151, expected: 0},
        TestCaseTwoArgs{lhs: 10075261, rhs: 3516453, expected: 2},
        TestCaseTwoArgs{lhs: 2321654, rhs: 13716039, expected: 0},
        TestCaseTwoArgs{lhs: 716731, rhs: 2619361, expected: 0},
        TestCaseTwoArgs{lhs: 10705369, rhs: 8976678, expected: 1},
        TestCaseTwoArgs{lhs: 793424, rhs: 10843208, expected: 0},
        TestCaseTwoArgs{lhs: 6265806, rhs: 6186424, expected: 1},
        TestCaseTwoArgs{lhs: 8876432, rhs: 11633996, expected: 0},
        TestCaseTwoArgs{lhs: 724366, rhs: 14862361, expected: 0},
        TestCaseTwoArgs{lhs: 6025694, rhs: 12148769, expected: 0},
        TestCaseTwoArgs{lhs: 1885356, rhs: 10250218, expected: 0},
        TestCaseTwoArgs{lhs: 8377609, rhs: 8588994, expected: 0},
        TestCaseTwoArgs{lhs: 14413713, rhs: 8550219, expected: 1},
        TestCaseTwoArgs{lhs: 3674591, rhs: 4556001, expected: 0},
        TestCaseTwoArgs{lhs: 14543041, rhs: 12919122, expected: 1},
        TestCaseTwoArgs{lhs: 16005375, rhs: 14018656, expected: 1},
        TestCaseTwoArgs{lhs: 5454009, rhs: 8466796, expected: 0},
        TestCaseTwoArgs{lhs: 16008850, rhs: 11755942, expected: 1},
        TestCaseTwoArgs{lhs: 13245842, rhs: 11581338, expected: 1},
        TestCaseTwoArgs{lhs: 12466080, rhs: 8545046, expected: 1},

        // Edge cases
        TestCaseTwoArgs{lhs: 16777215, rhs: 16777215, expected: 1},
        TestCaseTwoArgs{lhs: 0, rhs: 16777215, expected: 0},
    ];

    #[test]
    fn test_i24() {
        for case in test_cases.span() {
            assert_eq!(__llvm_udiv_x_x_x(*case.lhs, *case.rhs), *case.expected);
        }
    }

    #[test]
    #[should_panic(expected: ('Division by 0',))]
    fn test_div_by_zero() {
        __llvm_udiv_x_x_x(1, 0);
    }
}

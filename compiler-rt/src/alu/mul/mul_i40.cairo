use crate::rtstate::RTState;
use crate::alu::mul::mul;
use crate::integer::u40::u40;

pub fn __llvm_mul_n_n_n(ref state: RTState, lhs: u128, rhs: u128) -> u128 {
    mul::<u40>(lhs, rhs)
}

#[cfg(test)]
mod tests {
    use crate::rtstate::RTStateOps;
    use super::__llvm_mul_n_n_n;
    use crate::alu::test_case::TestCaseTwoArgs;
    #[cairofmt::skip]
    pub const test_cases: [TestCaseTwoArgs; 209] = [
        // Due to Cairo's casting limitation, negative numbers are represented as bit patterns.

        // Random test cases
        TestCaseTwoArgs{lhs: 58530954145, rhs: 24777581199, expected: 282534424815},
        TestCaseTwoArgs{lhs: 87721821274, rhs: 0b1101010011000101101010011011001001010111, expected: 255895752342}, // rhs = -185662328233
        TestCaseTwoArgs{lhs: 518885739681, rhs: 225623078828, expected: 307512070956},
        TestCaseTwoArgs{lhs: 0b1100001000000011100001011101011010110111, rhs: 248979419486, expected: 507258576434}, // lhs = -266228869449
        TestCaseTwoArgs{lhs: 411324657302, rhs: 0b1011110101001111000111110010000011100001, expected: 0b1000111101111001100000011011000111010110}, // rhs = -286435368735 expected = -483292761642
        TestCaseTwoArgs{lhs: 124435594149, rhs: 114048011398, expected: 0b1110101101000010101100001111010001011110}, // expected = -89075420066
        TestCaseTwoArgs{lhs: 0b1111010000010010010100101111100010110001, rhs: 185595237213, expected: 275656473421}, // lhs = -51232180047
        TestCaseTwoArgs{lhs: 0b1000010011100010101011101101011101011111, rhs: 0b1111000110010001011011111010111111001001, expected: 0b1000011010110001101100100000101010010111}, // lhs = -528772835489 rhs = -61984493623 expected = -521004774761
        TestCaseTwoArgs{lhs: 363150271943, rhs: 16091001618, expected: 510877682942},
        TestCaseTwoArgs{lhs: 0b1000000100100111000000011100101111110101, rhs: 0b1101010100011011111100101111101000001110, expected: 234207865190}, // lhs = -544806417419 rhs = -184214685170
        TestCaseTwoArgs{lhs: 208000513667, rhs: 381709930552, expected: 109021748392},
        TestCaseTwoArgs{lhs: 497612093359, rhs: 0b1100001011110010110110010001110011000000, expected: 0b1111110100100110111001111110011101000000}, // rhs = -262213657408 expected = -12232169664
        TestCaseTwoArgs{lhs: 0b1000111100011001111000111011001111001100, rhs: 0b1100111011111001111100001100000111011001, expected: 359029289964}, // lhs = -484896951348 rhs = -210555059751
        TestCaseTwoArgs{lhs: 0b1011011000100111101010011110110011110100, rhs: 0b1100001110010101010110101011100111001111, expected: 511913422156}, // lhs = -317162132236 rhs = -259487254065
        TestCaseTwoArgs{lhs: 0b1011000111001101001101100000001010010010, rhs: 28435989332, expected: 34076757480}, // lhs = -335859547502
        TestCaseTwoArgs{lhs: 91140127919, rhs: 514750470653, expected: 0b1100100110110101010010010000111111110011}, // expected = -233181736973
        TestCaseTwoArgs{lhs: 0b1001011010001100111000000101100100000010, rhs: 0b1101100011100000001100101100010001111111, expected: 0b1110111011001001110101011010111111111110}, // lhs = -452903020286 rhs = -168037268353 expected = -73923186690
        TestCaseTwoArgs{lhs: 368098235415, rhs: 521654215481, expected: 352532782623},
        TestCaseTwoArgs{lhs: 0b1111011100111010000101111001010011110101, rhs: 247698070164, expected: 439793844132}, // lhs = -37680081675
        TestCaseTwoArgs{lhs: 0b1101110101110011010100101011010111110110, rhs: 0b1001000110101111000011100101101000100110, expected: 0b1010100101001111101100110111111010000100}, // lhs = -148389054986 rhs = -473804416474 expected = -372324991356
        TestCaseTwoArgs{lhs: 0b1111100110100011100010111001000011000111, rhs: 241773412063, expected: 304410791769}, // lhs = -27320938297
        TestCaseTwoArgs{lhs: 100462067668, rhs: 547823474954, expected: 0b1111110111111001010100011011001001001000}, // expected = -8702021048
        TestCaseTwoArgs{lhs: 0b1111100111011111111000000010000001101100, rhs: 196731499062, expected: 0b1111110101111011100001101110111011001000}, // lhs = -26308763540 expected = -10812461368
        TestCaseTwoArgs{lhs: 0b1110011010110100010101111111110011101000, rhs: 339077576655, expected: 0b1010010000110001001000110101011110011000}, // lhs = -108643484440 expected = -394312591464
        TestCaseTwoArgs{lhs: 241826266829, rhs: 70149824066, expected: 0b1000011011101100100010111111011011011010}, // expected = -520017414438
        TestCaseTwoArgs{lhs: 268772377810, rhs: 0b1110001101010010000100001010001011010101, expected: 0b1101100000010011101010011110011010111010}, // rhs = -123177229611 expected = -171468790086
        TestCaseTwoArgs{lhs: 509163324867, rhs: 0b1011001011011001110111011010111111001100, expected: 40036263012}, // rhs = -331352264756
        TestCaseTwoArgs{lhs: 431415983336, rhs: 0b1010010101110011010011111110110101001110, expected: 517864871600}, // rhs = -388907406002
        TestCaseTwoArgs{lhs: 77940857400, rhs: 0b1011111001100000111000101110100000010111, expected: 134601120520}, // rhs = -281842358249
        TestCaseTwoArgs{lhs: 294433402803, rhs: 0b1001011101011010101001100010100101010110, expected: 429331820834}, // rhs = -449450727082
        TestCaseTwoArgs{lhs: 501718414297, rhs: 42883190641, expected: 0b1001000011000100110110010101100111001001}, // expected = -477733758519
        TestCaseTwoArgs{lhs: 375222536641, rhs: 147674488979, expected: 42668653011},
        TestCaseTwoArgs{lhs: 0b1111111010101111110001010011001111110101, rhs: 347441350078, expected: 0b1000110011011011000100111001100011010110}, // lhs = -5640997899 expected = -494540711722
        TestCaseTwoArgs{lhs: 0b1110000101001010111011011111011000100100, rhs: 0b1011001111101010000110010100010011011101, expected: 0b1100101011010110010100110000110100010100}, // lhs = -131886877148 rhs = -326784957219 expected = -228332466924
        TestCaseTwoArgs{lhs: 0b1111001111100010010000000110111010001001, rhs: 0b1111001110101111101001010001011011100000, expected: 0b1111100101100111001011010111110111100000}, // lhs = -52038701431 rhs = -52887742752 expected = -28333736480
        TestCaseTwoArgs{lhs: 245357913093, rhs: 184323763694, expected: 139431222694},
        TestCaseTwoArgs{lhs: 41443904342, rhs: 275596692964, expected: 176225711768},
        TestCaseTwoArgs{lhs: 20885302053, rhs: 0b1100101100001100010001011110011100101101, expected: 0b1110101101010100011001100011100010000001}, // rhs = -227427358931 expected = -88778327935
        TestCaseTwoArgs{lhs: 75611052603, rhs: 0b1000110000000010110011100100011100110011, expected: 0b1000001000010001000001001001011011000001}, // rhs = -498169133261 expected = -540880365887
        TestCaseTwoArgs{lhs: 0b1101100111110100001100011111001010100001, rhs: 87455736575, expected: 0b1010010101111000100011101001000001011111}, // lhs = -163406810463 expected = -388819414945
        TestCaseTwoArgs{lhs: 0b1000011010110000100110001110111111101010, rhs: 0b1100011011101010000011101011000000000111, expected: 0b1011110011111011111010110110111101100110}, // lhs = -521023197206 rhs = -245181272057 expected = -287831265434
        TestCaseTwoArgs{lhs: 0b1001100000101110110001000000110100111111, rhs: 213008582421, expected: 0b1010011110010110011001001100111100101011}, // lhs = -445891998401 expected = -379728900309
        TestCaseTwoArgs{lhs: 0b1010000110001110100011100100110101001011, rhs: 0b1101110010101100111100101000001101010001, expected: 0b1111100001100001011110011101010110111011}, // lhs = -405630202549 rhs = -151717248175 expected = -32724363845
        TestCaseTwoArgs{lhs: 5545300700, rhs: 0b1110110110100011101010101001100010101010, expected: 0b1010011011111110101010000010011000011000}, // rhs = -78858512214 expected = -382274623976
        TestCaseTwoArgs{lhs: 0b1111100111010000000011000110111110010000, rhs: 0b1001101100010110011001100100001000000010, expected: 350714855200}, // lhs = -26574295152 rhs = -433415896574
        TestCaseTwoArgs{lhs: 301130210310, rhs: 0b1101011011011010011001010111100101110000, expected: 360188287136}, // rhs = -176724543120
        TestCaseTwoArgs{lhs: 0b1100010110101001100001001001110111000010, rhs: 257946492622, expected: 275399159324}, // lhs = -250559029822
        TestCaseTwoArgs{lhs: 0b1011001101111100011010000001110101001001, rhs: 455011170376, expected: 137418077320}, // lhs = -328625283767
        TestCaseTwoArgs{lhs: 57736888331, rhs: 0b1000010010100101111111011001101001001010, expected: 0b1010001001110110100000111010000100101110}, // rhs = -529791083958 expected = -401738587858
        TestCaseTwoArgs{lhs: 0b1111001001111010010010111011010100111010, rhs: 0b1111101001111000110101000010111000100101, expected: 337348500834}, // lhs = -58077760198 rhs = -23742632411
        TestCaseTwoArgs{lhs: 0b1000001111111100000101100011100000111010, rhs: 404113340356, expected: 278080750184}, // lhs = -532641597382
        TestCaseTwoArgs{lhs: 0b1010000010101111110010111100001011010001, rhs: 0b1110000000000110000000001111110101011100, expected: 0b1110110001110010110000101001000000011100}, // lhs = -409367493935 rhs = -137338225316 expected = -83973992420
        TestCaseTwoArgs{lhs: 495347904582, rhs: 273579886282, expected: 378973993788},
        TestCaseTwoArgs{lhs: 32541254160, rhs: 24800910833, expected: 0b1010010010000001010100111110000100010000}, // expected = -392967233264
        TestCaseTwoArgs{lhs: 168141147203, rhs: 49984159457, expected: 0b1000111010001001001101011100000011100011}, // expected = -487324270365
        TestCaseTwoArgs{lhs: 0b1111111101001010010100001110010101111010, rhs: 0b1111000010001110001010010000001011001011, expected: 0b1010001011111100011110101110101110111110}, // lhs = -3048151686 rhs = -66334424373 expected = -399491011650
        TestCaseTwoArgs{lhs: 0b1101100010111001011100100001110011001010, rhs: 0b1010100000111011100001000011110010000100, expected: 273866960936}, // lhs = -168687428406 rhs = -376958600060
        TestCaseTwoArgs{lhs: 27382836240, rhs: 237289527742, expected: 264281048032},
        TestCaseTwoArgs{lhs: 77891014660, rhs: 0b1111101100100010001110111100111011111011, expected: 38487616492}, // rhs = -20900491525
        TestCaseTwoArgs{lhs: 0b1011111001100010111100111011101001010111, rhs: 169424509166, expected: 0b1100011110100011111101001010010011100010}, // lhs = -281807701417 expected = -242062416670
        TestCaseTwoArgs{lhs: 94952512574, rhs: 380723115209, expected: 175961932974},
        TestCaseTwoArgs{lhs: 0b1010110010011100100010110001000000000010, rhs: 0b1011011101111100010100011010111111100110, expected: 303827238860}, // lhs = -358150893566 rhs = -311446884378
        TestCaseTwoArgs{lhs: 106753573226, rhs: 199715497526, expected: 0b1111000010011101100101001000100001011100}, // expected = -66075719588
        TestCaseTwoArgs{lhs: 0b1100011101100110000100000110010001011010, rhs: 0b1010000001010010111010110111101001001010, expected: 0b1011100001000011001011011110011000000100}, // lhs = -243100785574 rhs = -410925696438 expected = -308110563836
        TestCaseTwoArgs{lhs: 353288726025, rhs: 0b1101001001010101000000011001101001011000, expected: 470953721112}, // rhs = -196142327208
        TestCaseTwoArgs{lhs: 0b1110101100011011010010011010110001111110, rhs: 0b1011101001010011010000111110111100011110, expected: 0b1100011111111001101001011101100011000100}, // lhs = -89736500098 rhs = -299250749666 expected = -240624740156
        TestCaseTwoArgs{lhs: 0b1110011000111110000011100010111101100110, rhs: 251451394316, expected: 0b1101011000010111000000110100111011001000}, // lhs = -110628032666 expected = -180002533688
        TestCaseTwoArgs{lhs: 476053025144, rhs: 0b1000001111000000100111111110100101110000, expected: 131531005056}, // rhs = -533639206544
        TestCaseTwoArgs{lhs: 0b1100111101001110111000001101000111101001, rhs: 390307528444, expected: 410117541724}, // lhs = -209130040855
        TestCaseTwoArgs{lhs: 0b1011011001101000110101000100011001110100, rhs: 0b1001110101100100010000010011111110011011, expected: 0b1100110011101001010100010011010000111100}, // lhs = -316068837772 rhs = -423519764581 expected = -219423886276
        TestCaseTwoArgs{lhs: 365400245355, rhs: 0b1010111101001100111101111001100110111101, expected: 277636478463}, // rhs = -346601055811
        TestCaseTwoArgs{lhs: 0b1001100101100000100100110101001011001111, rhs: 0b1010110011100010000100100111001000110010, expected: 0b1000000100001000001101000101101001101110}, // lhs = -440761363761 rhs = -356984393166 expected = -545323197842
        TestCaseTwoArgs{lhs: 177306171479, rhs: 2063252184, expected: 0b1000100001101111000000101011111101101000}, // expected = -513533624472
        TestCaseTwoArgs{lhs: 296372551145, rhs: 537330184676, expected: 30634048644},
        TestCaseTwoArgs{lhs: 0b1111110001000100110011100000110001010001, rhs: 0b1011010111010111001101010001101111100001, expected: 273941159473}, // lhs = -16025514927 rhs = -318511965215
        TestCaseTwoArgs{lhs: 0b1001100100000101011010100100111100110001, rhs: 47326814568, expected: 400465804520}, // lhs = -442290778319
        TestCaseTwoArgs{lhs: 99890955328, rhs: 0b1110111110011110101100111100101011111000, expected: 0b1010110001001001011001101001111000000000}, // rhs = -70351861000 expected = -359545790976
        TestCaseTwoArgs{lhs: 0b1001110111000110011001101110010000010101, rhs: 0b1101000010111010100011101011100100001101, expected: 262860358161}, // lhs = -421873130475 rhs = -203028514547
        TestCaseTwoArgs{lhs: 0b1000011000110100101010110100001100000011, rhs: 0b1101100000100111111100101100111011011111, expected: 0b1110110001111110111100011100100110011101}, // lhs = -523102371069 rhs = -171128467745 expected = -83769570915
        TestCaseTwoArgs{lhs: 0b1001110011001101100101011101111010101100, rhs: 140779591266, expected: 0b1101100101100000101010100000010111011000}, // lhs = -426047578452 expected = -165881969192
        TestCaseTwoArgs{lhs: 244748311515, rhs: 32972934219, expected: 0b1110110000110110111100011010110100101001}, // expected = -84977537751
        TestCaseTwoArgs{lhs: 0b1001110010101011000101110011000100101100, rhs: 350144336038, expected: 0b1011111000101000101010101010001010001000}, // lhs = -426626305748 expected = -282785570168
        TestCaseTwoArgs{lhs: 70685254083, rhs: 0b1100101010100011111101010101011111111000, expected: 433672092136}, // rhs = -229177468936
        TestCaseTwoArgs{lhs: 0b1001111001100111010010011100000110101001, rhs: 37637492930, expected: 19761582610}, // lhs = -419173908055
        TestCaseTwoArgs{lhs: 0b1001000011011111000100010111000101101010, rhs: 0b1011110001011110100111000100010001101100, expected: 535899144376}, // lhs = -477293874838 rhs = -290470476692
        TestCaseTwoArgs{lhs: 0b1010111000101110011100100100100000011110, rhs: 0b1001110010010010111111001101111000010110, expected: 168340764308}, // lhs = -351408076770 rhs = -427030684138
        TestCaseTwoArgs{lhs: 0b1110010010011011011011010111110101101000, rhs: 160186979813, expected: 0b1111011000001110110011001011011000001000}, // lhs = -117651440280 expected = -42701375992
        TestCaseTwoArgs{lhs: 0b1100001000111110000000111010010011000010, rhs: 391100291198, expected: 0b1111011101010010100101101100011101111100}, // lhs = -265247546174 expected = -37269092484
        TestCaseTwoArgs{lhs: 0b1101010111001010000100110001101001101111, rhs: 418706433114, expected: 0b1010000111100110100001011110011100000110}, // lhs = -181293344145 expected = -404154358010
        TestCaseTwoArgs{lhs: 0b1000111001011000000001011010011011111001, rhs: 447682732650, expected: 0b1011111111000000011110100111010100011010}, // lhs = -488149506311 expected = -275943623398
        TestCaseTwoArgs{lhs: 85531245555, rhs: 420747776002, expected: 451191121894},
        TestCaseTwoArgs{lhs: 518580155017, rhs: 0b1010111011010110010001100111110111100110, expected: 0b1000011000010111111001100100110000010110}, // rhs = -348592374298 expected = -523585041386
        TestCaseTwoArgs{lhs: 0b1111010111010101010000111101111011110011, rhs: 0b1010101110110101100011010001110110111100, expected: 25382895988}, // lhs = -43666645261 rhs = -362026295876
        TestCaseTwoArgs{lhs: 456667987023, rhs: 0b1000011111110011011001010010111101111001, expected: 105537094231}, // rhs = -515607548039
        TestCaseTwoArgs{lhs: 0b1111011001011011100001101101101010101011, rhs: 0b1001000011100111010000001100000100011111, expected: 54625527221}, // lhs = -41414108501 rhs = -477156556513
        TestCaseTwoArgs{lhs: 0b1101111100110111111001000010000111110010, rhs: 127918942638, expected: 0b1110110110101110100111101101010001111100}, // lhs = -140796222990 expected = -78674733956
        TestCaseTwoArgs{lhs: 0b1111010110001011001000100110010010101010, rhs: 88809963024, expected: 0b1100101101000100000010011111011010100000}, // lhs = -44910353238 expected = -226491763040
        TestCaseTwoArgs{lhs: 238937543882, rhs: 0b1011111010001010110110001000110101010011, expected: 394763599742}, // rhs = -281138393773
        TestCaseTwoArgs{lhs: 59541846354, rhs: 0b1011000011101011101101010100110100000100, expected: 112698429256}, // rhs = -339642856188
        TestCaseTwoArgs{lhs: 152835110799, rhs: 0b1110000011100001011111010010011101110001, expected: 304941158175}, // rhs = -133655877775
        TestCaseTwoArgs{lhs: 0b1110111001011111110110110011000000100001, rhs: 305086876825, expected: 0b1011100011110111111000011000111110111001}, // lhs = -75701211103 expected = -305078890567
        TestCaseTwoArgs{lhs: 492353649676, rhs: 355975889923, expected: 0b1011010111111011011011011010010000100100}, // expected = -317904280540
        TestCaseTwoArgs{lhs: 253083520673, rhs: 527307485015, expected: 410111313847},
        TestCaseTwoArgs{lhs: 494006909156, rhs: 513121017261, expected: 0b1111100110101001000001000100011000010100}, // expected = -27229141484
        TestCaseTwoArgs{lhs: 229852666399, rhs: 0b1111011100010001100010110000101001110001, expected: 0b1000001100111111101110101111110110101111}, // rhs = -38360380815 expected = -535801692753
        TestCaseTwoArgs{lhs: 0b1101001001010110101010010010011111100010, rhs: 0b1100000101011011100101001101000101110110, expected: 62011728940}, // lhs = -196114569246 rhs = -269046460042
        TestCaseTwoArgs{lhs: 320739458324, rhs: 0b1000101010011101111101000011101111011100, expected: 0b1110101011000011001010100001100100110000}, // rhs = -504156111908 expected = -91214964432
        TestCaseTwoArgs{lhs: 0b1001101110110110011001000010110100001101, rhs: 0b1001101111101111101001111110000010101000, expected: 63881605256}, // lhs = -430731678451 rhs = -429770940248
        TestCaseTwoArgs{lhs: 0b1011100111010001010110101111001000111010, rhs: 0b1001100000101111101001100101011101010000, expected: 107581368352}, // lhs = -301430279622 rhs = -445877168304
        TestCaseTwoArgs{lhs: 0b1100001100011101000011000110111011101010, rhs: 389188897624, expected: 0b1010010110110001100010101010111001110000}, // lhs = -261505650966 expected = -387863368080
        TestCaseTwoArgs{lhs: 0b1100000111100011011111001000100111000001, rhs: 0b1101101011111011110001001010100011110000, expected: 0b1101001010110001111010111100110011110000}, // lhs = -266766349887 rhs = -158984787728 expected = -194583474960
        TestCaseTwoArgs{lhs: 0b1100111000001101101000100001010011100111, rhs: 0b1000111111001111111101101010011110110010, expected: 0b1101101000010101010011110011100110011110}, // lhs = -214519638809 rhs = -481842255950 expected = -162851243618
        TestCaseTwoArgs{lhs: 484818293857, rhs: 377393600154, expected: 0b1001100101100011101001011101100001011010}, // expected = -440709818278
        TestCaseTwoArgs{lhs: 0b1001110010000010101001000111000001110000, rhs: 500820107752, expected: 0b1001000101011010011000000101010110000000}, // lhs = -427304914832 expected = -475225107072
        TestCaseTwoArgs{lhs: 0b1000111001111011101110011110001100110100, rhs: 400776488490, expected: 0b1101011110011110101110111111111010001000}, // lhs = -487550491852 expected = -173430538616
        TestCaseTwoArgs{lhs: 0b1001100101110010000110010010010000010110, rhs: 0b1111111100110000011000101001101011010010, expected: 0b1101000010101000110000001101011000001100}, // lhs = -440467381226 rhs = -3483198766 expected = -203327220212
        TestCaseTwoArgs{lhs: 0b1000101001101000000100011010111000010101, rhs: 333868476727, expected: 0b1000011101111110000001000100001110000011}, // lhs = -505060151787 expected = -517576834173
        TestCaseTwoArgs{lhs: 438459327489, rhs: 333734510106, expected: 0b1011011100111010110111101010011000011010}, // expected = -312544942566
        TestCaseTwoArgs{lhs: 489948809332, rhs: 0b1100001111000111011100000101111011111001, expected: 0b1001110110110001110100000101000011010100}, // rhs = -258646974727 expected = -422218542892
        TestCaseTwoArgs{lhs: 32745303756, rhs: 0b1110111101110111001110001001111110111111, expected: 0b1101111100001100101011100001111000110100}, // rhs = -71014244417 expected = -141521183180
        TestCaseTwoArgs{lhs: 0b1100011010111101111010111000100111010101, rhs: 0b1000011011110001101111000111010010001110, expected: 0b1000010011010000100001101111100000100110}, // lhs = -245921773099 rhs = -519930350450 expected = -529077438426
        TestCaseTwoArgs{lhs: 452728306892, rhs: 0b1101100111100110001110111111001011100100, expected: 321474067888}, // rhs = -163641036060
        TestCaseTwoArgs{lhs: 0b1010001001100110111011000001101101100011, rhs: 135907139216, expected: 0b1101100000001101101100111100000110110000}, // lhs = -402000176285 expected = -171568807504
        TestCaseTwoArgs{lhs: 0b1111101101101101100011010010001100101101, rhs: 272968097118, expected: 272793830278}, // lhs = -19636870355
        TestCaseTwoArgs{lhs: 0b1010000110100011101100001100011101011000, rhs: 297831416624, expected: 0b1011011100010010101011010110100010000000}, // lhs = -405275621544 expected = -313219258240
        TestCaseTwoArgs{lhs: 433002035791, rhs: 238621420551, expected: 463867407401},
        TestCaseTwoArgs{lhs: 0b1111110110000000101000001101000001011100, rhs: 321657999785, expected: 0b1111111100111100100100011010100010111100}, // lhs = -10726879140 expected = -3278788420
        TestCaseTwoArgs{lhs: 0b1100111001011010101101001001101111110101, rhs: 112253862113, expected: 0b1100001100010001010111110001001001010101}, // lhs = -213226578955 expected = -261701561771
        TestCaseTwoArgs{lhs: 0b1111011100001101111001110011111010000010, rhs: 315061438180, expected: 0b1000110111010011101010101011011111001000}, // lhs = -38421447038 expected = -490370058296
        TestCaseTwoArgs{lhs: 0b1101100110000100001001111000010011011011, rhs: 99153223882, expected: 0b1111000000000000000101000011010011001110}, // lhs = -165286542117 expected = -68718152498
        TestCaseTwoArgs{lhs: 0b1110011110000111001010000010010000101111, rhs: 181120781587, expected: 0b1100001100011011111000010101001001111101}, // lhs = -105106627537 expected = -261525253507
        TestCaseTwoArgs{lhs: 0b1011001101001100111000101101011101100111, rhs: 493954608294, expected: 0b1100011000011111111010000110000011001010}, // lhs = -329422547097 expected = -248572780342
        TestCaseTwoArgs{lhs: 371676425077, rhs: 270337940954, expected: 133926011554},
        TestCaseTwoArgs{lhs: 35031265714, rhs: 0b1101110111011000100011101100001001100000, expected: 0b1011001011010101111001111000011011000000}, // rhs = -146690620832 expected = -331418728768
        TestCaseTwoArgs{lhs: 301972623604, rhs: 213888984548, expected: 0b1011100100111011110000110101110101010000}, // expected = -303940018864
        TestCaseTwoArgs{lhs: 188524398471, rhs: 0b1000011000111011101000100010100101001100, expected: 0b1011100011110110010011001101101100010100}, // rhs = -522985526964 expected = -305105413356
        TestCaseTwoArgs{lhs: 0b1011001111000100010010001100111100101100, rhs: 0b1011010111100011101100111111010101111110, expected: 56537060264}, // lhs = -327419375828 rhs = -318302325378
        TestCaseTwoArgs{lhs: 0b1100100110110000110011101001111010000110, rhs: 0b1110000010111001111101000101010101010010, expected: 56548213996}, // lhs = -233256870266 rhs = -134319155886
        TestCaseTwoArgs{lhs: 95088107342, rhs: 0b1101100110111111111010000000000010111011, expected: 153062776314}, // rhs = -164284071749
        TestCaseTwoArgs{lhs: 399635059590, rhs: 498346471659, expected: 0b1001110101000011010110010000110000000010}, // expected = -424071853054
        TestCaseTwoArgs{lhs: 0b1001110100110000100000011011110010001110, rhs: 179436077788, expected: 0b1100101001111111101110001010011000001000}, // lhs = -424387953522 expected = -229785426424
        TestCaseTwoArgs{lhs: 0b1100011110011100100000110111001101000010, rhs: 0b1011110101000010111010000110111111100110, expected: 0b1100010100010100111000110010101101001100}, // lhs = -242187275454 rhs = -286640279578 expected = -253052638388
        TestCaseTwoArgs{lhs: 0b1110011111110001001011000001011110010001, rhs: 257099981314, expected: 337831768354}, // lhs = -103327983727
        TestCaseTwoArgs{lhs: 425635389694, rhs: 247708162166, expected: 0b1110100001111110010101010000010100010100}, // expected = -100959714028
        TestCaseTwoArgs{lhs: 0b1110011011110001010100111011110010001110, rhs: 27738038824, expected: 0b1100110101110011111010101101001000110000}, // lhs = -107620352882 expected = -217098563024
        TestCaseTwoArgs{lhs: 0b1011000111111010010010001101010100100100, rhs: 120488131249, expected: 507709523428}, // lhs = -335103339228
        TestCaseTwoArgs{lhs: 0b1110011100000100111100110101111101001101, rhs: 151135362977, expected: 136155873901}, // lhs = -107291123891
        TestCaseTwoArgs{lhs: 0b1110111101010010111110001001001011111000, rhs: 0b1101000010011101111000111110011110001100, expected: 0b1100110000010110011101100010011110100000}, // lhs = -71622421768 rhs = -203509471348 expected = -222961457248
        TestCaseTwoArgs{lhs: 466415901371, rhs: 0b1011110111100101110100100100000000101111, expected: 176850724949}, // rhs = -283907047377
        TestCaseTwoArgs{lhs: 0b1101101100001000001001000001011100100110, rhs: 0b1100010000011000001001000000011110100011, expected: 25718736690}, // lhs = -158777207002 rhs = -257293023325
        TestCaseTwoArgs{lhs: 512924779178, rhs: 304336644738, expected: 248393776724},
        TestCaseTwoArgs{lhs: 0b1100010110110101100011000011100000011111, rhs: 491629843075, expected: 0b1111101111011000110001101110010111011101}, // lhs = -250357204961 expected = -17837922851
        TestCaseTwoArgs{lhs: 0b1010110111001110111110101101101111100000, rhs: 114651768951, expected: 0b1110100100110100000101110011010100100000}, // lhs = -353009738784 expected = -97910311648
        TestCaseTwoArgs{lhs: 0b1011101111111111001101111111110111011101, rhs: 200055178409, expected: 15717026533}, // lhs = -292070883875
        TestCaseTwoArgs{lhs: 38329495861, rhs: 500860504812, expected: 0b1011100000001100011111110010111011011100}, // expected = -309027983652
        TestCaseTwoArgs{lhs: 469663901487, rhs: 0b1110010000100100100101001011111110011011, expected: 45087230581}, // rhs = -119645356133
        TestCaseTwoArgs{lhs: 352132545531, rhs: 0b1000000111011111001011100101101101110011, expected: 244242393793}, // rhs = -541716489357
        TestCaseTwoArgs{lhs: 0b1101001000001001100010100001100001110110, rhs: 0b1000011010010011101110100011101000000100, expected: 0b1001011011110111011011110001110111011000}, // lhs = -197408450442 rhs = -521507554812 expected = -451115278888
        TestCaseTwoArgs{lhs: 0b1111100011111100100100010111001001111111, rhs: 0b1100110000110110000011100001110111011111, expected: 0b1100111110001001100111010001111110100001}, // lhs = -30122347905 rhs = -222431404577 expected = -208144621663
        TestCaseTwoArgs{lhs: 0b1111101101100000110000100011110011010010, rhs: 542127330055, expected: 0b1000010001111000001110000011111110111110}, // lhs = -19851494190 expected = -530558992450
        TestCaseTwoArgs{lhs: 454620300758, rhs: 55517047243, expected: 252033377970},
        TestCaseTwoArgs{lhs: 0b1011000110001110011011111111111010101001, rhs: 203153396217, expected: 536720485217}, // lhs = -336912712023
        TestCaseTwoArgs{lhs: 0b1100000100000111011110110101001111010000, rhs: 0b1010000010110001000011110111100100111100, expected: 0b1111001111000100101101001111010011000000}, // lhs = -270457416752 rhs = -409346279108 expected = -52534381376
        TestCaseTwoArgs{lhs: 328989626893, rhs: 0b1001000011101000101111111011001101101001, expected: 512570867285}, // rhs = -477131459735
        TestCaseTwoArgs{lhs: 385486794285, rhs: 127695726106, expected: 98303499922},
        TestCaseTwoArgs{lhs: 0b1001101001110111100110011110000110101110, rhs: 0b1000011000001001000011011011001111101110, expected: 65996487108}, // lhs = -436080090706 rhs = -523834117138
        TestCaseTwoArgs{lhs: 0b1010010110010011010001011100101100101101, rhs: 0b1101010111011000011111110100001011100110, expected: 245122016366}, // lhs = -388371199187 rhs = -181051374874
        TestCaseTwoArgs{lhs: 459068548600, rhs: 0b1100001111010001010111001000000100111010, expected: 163847770672}, // rhs = -258480504518
        TestCaseTwoArgs{lhs: 0b1010010000101001111011101101011011100010, rhs: 0b1011011000010111100101001011000011101011, expected: 0b1001010100111010101000101010000101110110}, // lhs = -394433472798 rhs = -317431959317 expected = -458577763978
        TestCaseTwoArgs{lhs: 348377987117, rhs: 0b1001010110110101001011110000010011011110, expected: 189048843014}, // rhs = -456521743138
        TestCaseTwoArgs{lhs: 118059015089, rhs: 0b1010100111101011000100011000111100110110, expected: 34132702806}, // rhs = -369718358218
        TestCaseTwoArgs{lhs: 163824038655, rhs: 196922906915, expected: 0b1011000011000000010010011001111111011101}, // expected = -340371333155
        TestCaseTwoArgs{lhs: 0b1100010011010010001110001110101011000111, rhs: 0b1011011101010011110100011101001100010101, expected: 280676812627}, // lhs = -254171092281 rhs = -312126352619
        TestCaseTwoArgs{lhs: 140187584742, rhs: 0b1000000110101110110110001101000100001110, expected: 0b1000010110000011101101101100001010010100}, // rhs = -542527401714 expected = -526071184748
        TestCaseTwoArgs{lhs: 0b1111100110001001010001111111111001001001, rhs: 178954400467, expected: 218220075051}, // lhs = -27761574327
        TestCaseTwoArgs{lhs: 0b1011110110101010000100111010011001111011, rhs: 130737856588, expected: 0b1100010110010001110110101000110010000100}, // lhs = -284909394309 expected = -250956051324
        TestCaseTwoArgs{lhs: 54712365587, rhs: 0b1101010011111100000010001110010011001000, expected: 323605891800}, // rhs = -184750119736
        TestCaseTwoArgs{lhs: 0b1010100100000111101101100001100010000011, rhs: 160708703020, expected: 0b1110101111111001001000100100111110000100}, // lhs = -373532780413 expected = -86014537852
        TestCaseTwoArgs{lhs: 0b1111010001010100111110001111100000001111, rhs: 12608450344, expected: 345095013208}, // lhs = -50114004977
        TestCaseTwoArgs{lhs: 0b1111110000100100111110010110001011010010, rhs: 0b1011011000001101001000000111110010010000, expected: 251731988000}, // lhs = -16559545646 rhs = -317607347056
        TestCaseTwoArgs{lhs: 0b1100100111000000010011000100011000011100, rhs: 0b1110010010100010001101100111110000110001, expected: 168618818396}, // lhs = -232996977124 rhs = -117537604559
        TestCaseTwoArgs{lhs: 0b1000110111101110000001101001011010001110, rhs: 338111984517, expected: 11629232582}, // lhs = -489927829874
        TestCaseTwoArgs{lhs: 46443270806, rhs: 161168859022, expected: 416417020212},
        TestCaseTwoArgs{lhs: 0b1010110000010110010101000001001010000101, rhs: 0b1000110011110100111011100011101010010110, expected: 481524644846}, // lhs = -360402644347 rhs = -494106953066
        TestCaseTwoArgs{lhs: 0b1011001100000000000011111101000110010101, rhs: 0b1110100101001111110010100101100011010110, expected: 467477621390}, // lhs = -330711445099 rhs = -97445586730
        TestCaseTwoArgs{lhs: 0b1001101100111010100111100111000101101110, rhs: 0b1101100010111010100010011111101111101100, expected: 0b1001100000000011001001010110101101101000}, // lhs = -432808234642 rhs = -168669086740 expected = -446623814808
        TestCaseTwoArgs{lhs: 0b1010010111110011010110001101000001000010, rhs: 252926819, expected: 519695630214}, // lhs = -386759339966
        TestCaseTwoArgs{lhs: 0b1000110101001100001101000110000111010011, rhs: 525911897444, expected: 0b1000010111110100000111100110010101101100}, // lhs = -492642737709 expected = -524185344660
        TestCaseTwoArgs{lhs: 0b1010100011101101111111011000000111000011, rhs: 0b1110110011111001110110110001101000110101, expected: 0b1111110110110001011110101010101101011111}, // lhs = -373964308029 rhs = -81707460043 expected = -9907295393
        TestCaseTwoArgs{lhs: 313606564521, rhs: 0b1101101111000011001001001110001000000110, expected: 116020720118}, // rhs = -155639815674
        TestCaseTwoArgs{lhs: 0b1110101101100000001110001101000001011100, rhs: 188476753913, expected: 77665480060}, // lhs = -88579977124
        TestCaseTwoArgs{lhs: 0b1011010111011101010111111111111011010101, rhs: 0b1000001011001000110101110101010111101011, expected: 354395530887}, // lhs = -318408491307 rhs = -537796323861
        TestCaseTwoArgs{lhs: 0b1111100101011100011010001101001001101011, rhs: 134097316986, expected: 0b1110010101111011000110100010101011111110}, // lhs = -28514397589 expected = -113898804482
        TestCaseTwoArgs{lhs: 352599203593, rhs: 0b1101010110001011100110000111110111011111, expected: 0b1011101101111011111101011010110111010111}, // rhs = -182341567009 expected = -294273045033
        TestCaseTwoArgs{lhs: 311386816624, rhs: 0b1000111000101111001010100101000111010011, expected: 0b1111011111011101011111010000110001010000}, // rhs = -488834969133 expected = -34938745776
        TestCaseTwoArgs{lhs: 0b1011011010110110101100110010100001000010, rhs: 218603231920, expected: 0b1001011100111101111010110110000101100000}, // lhs = -314762385342 expected = -449932730016
        TestCaseTwoArgs{lhs: 919397661, rhs: 490206955908, expected: 0b1010001101011111111011101010011111110100}, // expected = -397822482444
        TestCaseTwoArgs{lhs: 0b1111001011001011101000101011100010000010, rhs: 190294501474, expected: 0b1011001001011001101111011111000111000100}, // lhs = -56713103230 expected = -333501828668
        TestCaseTwoArgs{lhs: 0b1100101111111100111010000111110111110101, rhs: 0b1010010001110010101111101011001010001000, expected: 0b1101000010011000111011010100010000101000}, // lhs = -223390171659 rhs = -393211891064 expected = -203592743896
        TestCaseTwoArgs{lhs: 172114757994, rhs: 165542814644, expected: 162605472904},

        // Edge cases
        TestCaseTwoArgs{lhs: 0, rhs: 0, expected: 0},
        TestCaseTwoArgs{lhs: 0, rhs: 549755813887, expected: 0},
        TestCaseTwoArgs{lhs: 0, rhs: 0b1000000000000000000000000000000000000000, expected: 0}, // rhs = -549755813888
        TestCaseTwoArgs{lhs: 549755813887, rhs: 0, expected: 0},
        TestCaseTwoArgs{lhs: 549755813887, rhs: 549755813887, expected: 1},
        TestCaseTwoArgs{lhs: 549755813887, rhs: 0b1000000000000000000000000000000000000000, expected: 0b1000000000000000000000000000000000000000}, // rhs = -549755813888 expected = -549755813888
        TestCaseTwoArgs{lhs: 0b1000000000000000000000000000000000000000, rhs: 0, expected: 0}, // lhs = -549755813888
        TestCaseTwoArgs{lhs: 0b1000000000000000000000000000000000000000, rhs: 549755813887, expected: 0b1000000000000000000000000000000000000000}, // lhs = -549755813888 expected = -549755813888
        TestCaseTwoArgs{lhs: 0b1000000000000000000000000000000000000000, rhs: 0b1000000000000000000000000000000000000000, expected: 0}, // lhs = -549755813888 rhs = -549755813888
    ];

    #[test]
    fn test_i40() {
        for case in test_cases.span() {
            let mut state = RTStateOps::new();
            assert_eq!(__llvm_mul_n_n_n(ref state, *case.lhs, *case.rhs), *case.expected);
        }
    }
}

use crate::alu::bitreverse::bitreverse;

pub fn __llvm_bitreverse_i128(value: u128) -> u128 {
    bitreverse::<u128>(value)
}

#[cfg(test)]
mod tests {
    use super::__llvm_bitreverse_i128;
    use crate::alu::test_case::TestCaseOneArg;
    #[cairofmt::skip]
    pub const test_cases: [TestCaseOneArg; 64] = [
        // Random bit patterns
        TestCaseOneArg { arg: 0b01101010000001001011000001000000011111010111110100110010110111100011110100111110100110100101110110010100101111001101111010100010, expected: 0b01000101011110110011110100101001101110100101100101111100101111000111101101001100101111101011111000000010000011010010000001010110 },
        TestCaseOneArg { arg: 0b10110110110100101010111101011101101001100001001111011101101001111111100011010010110101101000100001110100110011011111001100111001, expected: 0b10011100110011111011001100101110000100010110101101001011000111111110010110111011110010000110010110111010111101010100101101101101 },
        TestCaseOneArg { arg: 0b00011101101000111000000000000101000110110001100000111111111110010011000010101110110100011101001011011111101110000111101100000101, expected: 0b10100000110111100001110111111011010010111000101101110101000011001001111111111100000110001101100010100000000000011100010110111000 },
        TestCaseOneArg { arg: 0b11110101100001100101000011100001000010001111111001011010010111001001110111101011111110111001111110100110111001100000110001110001, expected: 0b10001110001100000110011101100101111110011101111111010111101110010011101001011010011111110001000010000111000010100110000110101111 },
        TestCaseOneArg { arg: 0b00100011001101001011111011100010000101001011001011001010100101011111111110001001010010001001100001101001101110100011100110000110, expected: 0b01100001100111000101110110010110000110010001001010010001111111111010100101010011010011010010100001000111011111010010110011000100 },
        TestCaseOneArg { arg: 0b00010111100110111010010110110011001001011111101001010001000110101100010101100110011010100110111010001110000100011011010001000111, expected: 0b11100010001011011000100001110001011101100101011001100110101000110101100010001010010111111010010011001101101001011101100111101000 },
        TestCaseOneArg { arg: 0b01111111000010011100110100100100010011100000011100101001101101001000010000101011100100100100101000101101100101110001000011001001, expected: 0b10010011000010001110100110110100010100100100100111010100001000010010110110010100111000000111001000100100101100111001000011111110 },
        TestCaseOneArg { arg: 0b11010100100001101101010000101100001001111001000111000010101100110001010110001110001010101111100111110000000011011110000010011101, expected: 0b10111001000001111011000000001111100111110101010001110001101010001100110101000011100010011110010000110100001010110110000100101011 },
        TestCaseOneArg { arg: 0b01100100010101010011010100010100111001000001000101001010011110101011010001100100010110110011001110111011001011100001111110111011, expected: 0b11011101111110000111010011011101110011001101101000100110001011010101111001010010100010000010011100101000101011001010101000100110 },
        TestCaseOneArg { arg: 0b10100101101111000010110100011010101011101111110100011110100101000100101010110100100110111000100010100101110000001011101100101110, expected: 0b01110100110111010000001110100101000100011101100100101101010100100010100101111000101111110111010101011000101101000011110110100101 },
        TestCaseOneArg { arg: 0b01001010011101100001101110011001001111111100000110001110001000011000000100010000110011001111100110001111000010001110011000011000, expected: 0b00011000011001110001000011110001100111110011001100001000100000011000010001110001100000111111110010011001110110000110111001010010 },
        TestCaseOneArg { arg: 0b10011110100110100000011100111100011101011111110110001001011111000100101011001011001100101110110011101010001011111110100100010110, expected: 0b01101000100101111111010001010111001101110100110011010011010100100011111010010001101111111010111000111100111000000101100101111001 },
        TestCaseOneArg { arg: 0b11110011001010100001001100000110111011011100100111101101100110100111111011101101010110000001011100111001011011001110010101010101, expected: 0b10101010101001110011011010011100111010000001101010110111011111100101100110110111100100111011011101100000110010000101010011001111 },
        TestCaseOneArg { arg: 0b01000001010010010000100011001111010000000100100000011100001010000010101110111111000011111001100010001010111110011101010111001010, expected: 0b01010011101010111001111101010001000110011111000011111101110101000001010000111000000100100000001011110011000100001001001010000010 },
        TestCaseOneArg { arg: 0b01101100010101010100001101011001001000000000101110011111100001011010111011101100001111101101001110110111100101100010111010001001, expected: 0b10010001011101000110100111101101110010110111110000110111011101011010000111111001110100000000010010011010110000101010101000110110 },
        TestCaseOneArg { arg: 0b11101000000001111011111100001101000001101111101001110011000111001011011111110010010001011111000100111100101001110111000100100101, expected: 0b10100100100011101110010100111100100011111010001001001111111011010011100011001110010111110110000010110000111111011110000000010111 },
        TestCaseOneArg { arg: 0b00010110110000001010011001011011001101000111000000011110111100110000100010001011111001011010000011100101000100000101101100100100, expected: 0b00100100110110100000100010100111000001011010011111010001000100001100111101111000000011100010110011011010011001010000001101101000 },
        TestCaseOneArg { arg: 0b01001011101011110111111000101110110101010101000001000011011111100011110100011100000011000101101111000110011110010010101100100011, expected: 0b11000100110101001001111001100011110110100011000000111000101111000111111011000010000010101010101101110100011111101111010111010010 },
        TestCaseOneArg { arg: 0b10100111111001100101010000101111010100011111010011010110001100111111100111101100101011100101000111010101111101101001101100111100, expected: 0b00111100110110010110111110101011100010100111010100110111100111111100110001101011001011111000101011110100001010100110011111100101 },
        TestCaseOneArg { arg: 0b00101000010000111011101000001000011001001010000001111001011110111110110110110101011101001010010011001110001000101011110000010111, expected: 0b11101000001111010100010001110011001001010010111010101101101101111101111010011110000001010010011000010000010111011100001000010100 },
        TestCaseOneArg { arg: 0b00010010011101011100000000010100101100111011110111100000011110110100000111110010111110010001110000001001111001010010111111000101, expected: 0b10100011111101001010011110010000001110001001111101001111100000101101111000000111101111011100110100101000000000111010111001001000 },
        TestCaseOneArg { arg: 0b10011000100100000001001010011101100100110001011100011111110011111010100000010111101110111110100110100101000000111010000010010000, expected: 0b00001001000001011100000010100101100101111101110111101000000101011111001111111000111010001100100110111001010010000000100100011001 },
        TestCaseOneArg { arg: 0b11101101000111100011111011000010011101000101101010101111010011010000111111100110100000000000011110001000111111011111000000100011, expected: 0b11000100000011111011111100010001111000000000000101100111111100001011001011110101010110100010111001000011011111000111100010110111 },
        TestCaseOneArg { arg: 0b11000001000000011010100110100010111000010011000110001011010110011101011111000101100010101110001111010110001111001111010010001111, expected: 0b11110001001011110011110001101011110001110101000110100011111010111001101011010001100011001000011101000101100101011000000010000011 },
        TestCaseOneArg { arg: 0b00001110101000010100100010000010110011011101111111010110101110001011100001010110001101001110001000101010100000111011000101010100, expected: 0b00101010100011011100000101010100010001110010110001101010000111010001110101101011111110111011001101000001000100101000010101110000 },
        TestCaseOneArg { arg: 0b11001110100001001111000010011100000010111111000010101000110100110001100111000010000011101110101011101000100111111011011101101100, expected: 0b00110110111011011111100100010111010101110111000001000011100110001100101100010101000011111101000000111001000011110010000101110011 },
        TestCaseOneArg { arg: 0b01001110110010001001101001100000100100001110011001010010010000110000001101010000111110110010100010000101111100000010000000100011, expected: 0b11000100000001000000111110100001000101001101111100001010110000001100001001001010011001110000100100000110010110010001001101110010 },
        TestCaseOneArg { arg: 0b11011010111111011111101000000110110100000100111111110111101111101001011010001111010111000110101100101010101100011100001000101001, expected: 0b10010100010000111000110101010100110101100011101011110001011010010111110111101111111100100000101101100000010111111011111101011011 },
        TestCaseOneArg { arg: 0b10010110110110011001110000000100011000001100010110001000111010111001011101100110100110111000001000110111111100111101001100111101, expected: 0b10111100110010111100111111101100010000011101100101100110111010011101011100010001101000110000011000100000001110011001101101101001 },
        TestCaseOneArg { arg: 0b11001110101110101001011010011000010011101101011110111111011001110111111100100001110111100101100001110101010100000100111101101000, expected: 0b00010110111100100000101010101110000110100111101110000100111111101110011011111101111010110111001000011001011010010101110101110011 },
        TestCaseOneArg { arg: 0b00100010111001100000011101001011000000011101101010111010111011100001111001011001000101101111011000011101110000000011111010000000, expected: 0b00000001011111000000001110111000011011110110100010011010011110000111011101011101010110111000000011010010111000000110011101000100 },
        TestCaseOneArg { arg: 0b01100110110001101100010011110110101001011101101000011011111110110000000001110010011111110010100001001100111000100101100111100000, expected: 0b00000111100110100100011100110010000101001111111001001110000000001101111111011000010110111010010101101111001000110110001101100110 },
        TestCaseOneArg { arg: 0b01100010110100010101000000100011110100110101101111000010110100111110000000000111011110111101110001001110001101111100101000001111, expected: 0b11110000010100111110110001110010001110111101111011100000000001111100101101000011110110101100101111000100000010101000101101000110 },
        TestCaseOneArg { arg: 0b10010101011110011100111111011011111101111111011101000110001000011100000000010001110000010101100110001001010000110101010110101011, expected: 0b11010101101010101100001010010001100110101000001110001000000000111000010001100010111011111110111111011011111100111001111010101001 },
        TestCaseOneArg { arg: 0b11110110111000011110110101111001000001001001010100101010100011110111110001111010111010011110010100110101101001011001100101010101, expected: 0b10101010100110011010010110101100101001111001011101011110001111101111000101010100101010010010000010011110101101111000011101101111 },
        TestCaseOneArg { arg: 0b01011100001101000000000010101111000010100010011111000101010001010001010101001101000111010101111000110011000000111100110010000000, expected: 0b00000001001100111100000011001100011110101011100010110010101010001010001010100011111001000101000011110101000000000010110000111010 },
        TestCaseOneArg { arg: 0b00110100011100010011100111101101001101101010111000101001000111010011111011100000011010111110110000100000110000100100110110101011, expected: 0b11010101101100100100001100000100001101111101011000000111011111001011100010010100011101010110110010110111100111001000111000101100 },
        TestCaseOneArg { arg: 0b01100100011101110100001111110011101100000000101001001111110101110111000100010000101011100110110010000111100100111101100001101111, expected: 0b11110110000110111100100111100001001101100111010100001000100011101110101111110010010100000000110111001111110000101110111000100110 },
        TestCaseOneArg { arg: 0b00000111011001010000010110001110110011011111110111101001110100111100101111110100000100011101010100000010001100000111010000001011, expected: 0b11010000001011100000110001000000101010111000100000101111110100111100101110010111101111111011001101110001101000001010011011100000 },
        TestCaseOneArg { arg: 0b01011011001000001000100110110111000100110111010000000011101111100011000010100010101001110110011110110011111010101001101101001110, expected: 0b01110010110110010101011111001101111001101110010101000101000011000111110111000000001011101100100011101101100100010000010011011010 },
        TestCaseOneArg { arg: 0b01111000100101001110101000111110010100001011111010001001011100110010101001001110101101000010011101011110111000101010001010001010, expected: 0b01010001010001010100011101111010111001000010110101110010010101001100111010010001011111010000101001111100010101110010100100011110 },
        TestCaseOneArg { arg: 0b00011111101011110110001100100010101111111000001100100001011010001010011011001111001101101100001100110010101101111010100111101100, expected: 0b00110111100101011110110101001100110000110110110011110011011001010001011010000100110000011111110101000100110001101111010111111000 },
        TestCaseOneArg { arg: 0b10101011001010000001101010101011111011100011100110000011001011111101011100111001110001110000100010111001001001101000000000011001, expected: 0b10011000000000010110010010011101000100001110001110011100111010111111010011000001100111000111011111010101010110000001010011010101 },
        TestCaseOneArg { arg: 0b01001101001000100001001010000010010101110011111001100001010000100000110000111000100001010011011000100101000101110110100100010100, expected: 0b00101000100101101110100010100100011011001010000100011100001100000100001010000110011111001110101001000001010010000100010010110010 },
        TestCaseOneArg { arg: 0b10100111000010100101100010000001010111110001000000000100000111000001011011001010011111101110000000000001111110011111100010101110, expected: 0b01110101000111111001111110000000000001110111111001010011011010000011100000100000000010001111101010000001000110100101000011100101 },
        TestCaseOneArg { arg: 0b01111011010010111100101000011011000100001111110011100010100000110101000001001000111000110111010000010010110001111000000110100011, expected: 0b11000101100000011110001101001000001011101100011100010010000010101100000101000111001111110000100011011000010100111101001011011110 },
        TestCaseOneArg { arg: 0b10010111001111000001011100110011000111101101100111111011101010101111001001101101110100010100010011001110011010101011000100010011, expected: 0b11001000100011010101011001110011001000101000101110110110010011110101010111011111100110110111100011001100111010000011110011101001 },
        TestCaseOneArg { arg: 0b01101111100110111010111000101111011011101010111001111101110011010001010011011000101001111010011010101111000000111101011110011111, expected: 0b11111001111010111100000011110101011001011110010100011011001010001011001110111110011101010111011011110100011101011101100111110110 },
        TestCaseOneArg { arg: 0b00000101010101101110011101011111011110110100101000101101111010011000000000011000111110100000001110011001000110011001010010110001, expected: 0b10001101001010011001100010011001110000000101111100011000000000011001011110110100010100101101111011111010111001110110101010100000 },
        TestCaseOneArg { arg: 0b10110010100000101100010110111001100100000100010011111100110000001010010011111110100101001110100011000110010010111101101100010000, expected: 0b00001000110110111101001001100011000101110010100101111111001001010000001100111111001000100000100110011101101000110100000101001101 },
        TestCaseOneArg { arg: 0b10101010001110000001011110101101001111111101010001111000001010110111000010010110010001010000010111010000000001011010011000110011, expected: 0b11001100011001011010000000001011101000001010001001101001000011101101010000011110001010111111110010110101111010000001110001010101 },
        TestCaseOneArg { arg: 0b11111110100100010100010100101000011011011001110101000001100000001000110111100000110110001011101001010010110101110101011100100010, expected: 0b01000100111010101110101101001010010111010001101100000111101100010000000110000010101110011011011000010100101000101000100101111111 },
        TestCaseOneArg { arg: 0b10110110011010001011001110101110011100101011011111110001110101110110110111111010111110001001001110111101110111100001011001010010, expected: 0b01001010011010000111101110111101110010010001111101011111101101101110101110001111111011010100111001110101110011010001011001101101 },
        TestCaseOneArg { arg: 0b00011011100100111000110000100100100011110101110011010000101101001010111110001110111010000001001100100100100100001000011100101110, expected: 0b01110100111000010000100100100100110010000001011101110001111101010010110100001011001110101111000100100100001100011100100111011000 },
        TestCaseOneArg { arg: 0b00010101101000100011010110110101110011100110101001001010101011001100100011011011010111110001001100000110011110001011001001110111, expected: 0b11101110010011010001111001100000110010001111101011011011000100110011010101010010010101100111001110101101101011000100010110101000 },
        TestCaseOneArg { arg: 0b10011111101001001001100001010111110010001101101010101101011100111110111111111110111011001001110101010011110011010100011001111111, expected: 0b11111110011000101011001111001010101110010011011101111111111101111100111010110101010110110001001111101010000110010010010111111001 },
        TestCaseOneArg { arg: 0b10111111011010011001001001111110011110101011011100111100101000001111100111000101000111010000011001100010110100010101100010000100, expected: 0b00100001000110101000101101000110011000001011100010100011100111110000010100111100111011010101111001111110010010011001011011111101 },
        TestCaseOneArg { arg: 0b00101011100001010111000000010100100001000100100111001100111010100001000001010000010100110100011011000100110000101111110010101111, expected: 0b11110101001111110100001100100011011000101100101000001010000010000101011100110011100100100010000100101000000011101010000111010100 },
        TestCaseOneArg { arg: 0b11000111001110100001101010011100010100010000001110111100111101011001010010011110101011011100111011001101000100110100001000110001, expected: 0b10001100010000101100100010110011011100111011010101111001001010011010111100111101110000001000101000111001010110000101110011100011 },
        TestCaseOneArg { arg: 0b10000010001011010011101010010001011110001110101011100000000100000000110000000011110101011101100000010000011011101001101100011010, expected: 0b01011000110110010111011000001000000110111010101111000000001100000000100000000111010101110001111010001001010111001011010001000001 },
        TestCaseOneArg { arg: 0b00111111100101111001111110000111110000000000111001110111011110110101111100100010000111000110000111001110001100110000110111110101, expected: 0b10101111101100001100110001110011100001100011100001000100111110101101111011101110011100000000001111100001111110011110100111111100 },
        TestCaseOneArg { arg: 0b01101100001010110111010010100110111010010010011110000101101000000001111000011011000010011010001001011111101110010010011010001101, expected: 0b10110001011001001001110111111010010001011001000011011000011110000000010110100001111001001001011101100101001011101101010000110110 },
        TestCaseOneArg { arg: 0b00101001011001111010110001010001111001010101011011000011111010000101011111010010001110001101010011001011110110001011110000110010, expected: 0b01001100001111010001101111010011001010110001110001001011111010100001011111000011011010101010011110001010001101011110011010010100 },
        TestCaseOneArg { arg: 0b11010100101011110000001110010110010011000100001100110011101100000100101101000010011110111000110010010101111001100100100101110101, expected: 0b10101110100100100110011110101001001100011101111001000010110100100000110111001100110000100011001001101001110000001111010100101011 },
    ];

    #[test]
    fn test_i128() {
        for case in test_cases.span() {
            assert_eq!(__llvm_bitreverse_i128(*case.arg), *case.expected);
        }
    }
}

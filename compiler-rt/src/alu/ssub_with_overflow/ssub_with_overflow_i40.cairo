use crate::rtstate::RTState;
use crate::alu::ssub_with_overflow::ssub_with_overflow;
use crate::integer::u40::u40;

pub fn __llvm_ssub_with_overflow_n_n_Sncs(
    ref state: RTState, lhs: u128, rhs: u128,
) -> (u128, bool) {
    ssub_with_overflow::<u40>(lhs, rhs)
}

#[cfg(test)]
mod tests {
    use crate::rtstate::RTStateOps;
    use super::__llvm_ssub_with_overflow_n_n_Sncs;
    use crate::alu::test_case::TestCaseTwoArgsTwoExpected;
    #[cairofmt::skip]
    pub const test_cases: [TestCaseTwoArgsTwoExpected; 209] = [
        // Due to Cairo's casting limitation, negative numbers are represented as bit patterns.

        // Random test cases
        TestCaseTwoArgsTwoExpected{lhs: 129345462706, rhs: 0b1000010010111001001101110001111110101000, expected: (658814009866, true)}, // rhs = -529468547160
        TestCaseTwoArgsTwoExpected{lhs: 357390754755, rhs: 0b1111000010111000010101100011000010010111, expected: (423017575212, false)}, // rhs = -65626820457
        TestCaseTwoArgsTwoExpected{lhs: 0b1101000001010011011011011000010010111010, rhs: 499109112887, expected: (395643771011, true)}, // lhs = -204758743878
        TestCaseTwoArgsTwoExpected{lhs: 0b1110100001001101100010101000010100011110, rhs: 0b1001001100110010001011011101111001011011, expected: (365531276995, false)}, // lhs = -101778291426 rhs = -467309568421
        TestCaseTwoArgsTwoExpected{lhs: 276610736508, rhs: 81498726153, expected: (195112010355, false)},
        TestCaseTwoArgsTwoExpected{lhs: 0b1110111001110101100010000111010111110000, rhs: 0b1101001001110100000100010011111010111111, expected: (120283674417, false)}, // lhs = -75337533968 rhs = -195621208385
        TestCaseTwoArgsTwoExpected{lhs: 320333472890, rhs: 43088317542, expected: (277245155348, false)},
        TestCaseTwoArgsTwoExpected{lhs: 526525461846, rhs: 429177519134, expected: (97347942712, false)},
        TestCaseTwoArgsTwoExpected{lhs: 341388571257, rhs: 307613350071, expected: (33775221186, false)},
        TestCaseTwoArgsTwoExpected{lhs: 0b1111100011100101111100110110111010100010, rhs: 541191282998, expected: (527818542444, true)}, // lhs = -30501802334
        TestCaseTwoArgsTwoExpected{lhs: 0b1011010100101101011010101111111010000001, rhs: 0b1101110101100011101001100110110110000011, expected: (926803071230, false)}, // lhs = -321360560511 rhs = -148652003965
        TestCaseTwoArgsTwoExpected{lhs: 0b1100101101001111101010100010001100001010, rhs: 121380947332, expected: (751833963910, false)}, // lhs = -226296716534
        TestCaseTwoArgsTwoExpected{lhs: 0b1000100111111111011101001011101011000011, rhs: 72734277697, expected: (519962081922, true)}, // lhs = -506815268157
        TestCaseTwoArgsTwoExpected{lhs: 0b1101100011110001001110100101110111000101, rhs: 0b1010001001100001000010101101111101011000, expected: (234347265645, false)}, // lhs = -167751557691 rhs = -402098823336
        TestCaseTwoArgsTwoExpected{lhs: 432202328655, rhs: 0b1110100110101011110001010101111011111100, expected: (528104737619, false)}, // rhs = -95902408964
        TestCaseTwoArgsTwoExpected{lhs: 330237511815, rhs: 478029458723, expected: (951719680868, false)},
        TestCaseTwoArgsTwoExpected{lhs: 0b1010011100101000101101111011000110011000, rhs: 126134931653, expected: (591807733971, false)}, // lhs = -381568962152
        TestCaseTwoArgsTwoExpected{lhs: 116042608804, rhs: 0b1100011001110101100010010000011110010111, expected: (363178797325, false)}, // rhs = -247136188521
        TestCaseTwoArgsTwoExpected{lhs: 0b1011000110001110100101100000101000011100, rhs: 0b1010000011011101001100100010011110101000, expected: (71695590004, false)}, // lhs = -336910218724 rhs = -408605808728
        TestCaseTwoArgsTwoExpected{lhs: 0b1111001011101110000111110011010100001111, rhs: 63899167365, expected: (979477940874, false)}, // lhs = -56134519537
        TestCaseTwoArgsTwoExpected{lhs: 0b1101001011000111001110111010100000110011, rhs: 340420061329, expected: (564865646498, false)}, // lhs = -194225919949
        TestCaseTwoArgsTwoExpected{lhs: 0b1000000010000011010010000111100010001000, rhs: 0b1111101100011110011100111110000101111100, expected: (572922304268, false)}, // lhs = -547553249144 rhs = -20963925636
        TestCaseTwoArgsTwoExpected{lhs: 0b1100010101001101000000101001011001111010, rhs: 0b1111001000010010100110100000110101011010, expected: (907218028832, false)}, // lhs = -252111055238 rhs = -59817456294
        TestCaseTwoArgsTwoExpected{lhs: 0b1100100101011010010110001101101111001101, rhs: 0b1111011100010010010100100000001100001110, expected: (903151540415, false)}, // lhs = -234707428403 rhs = -38347341042
        TestCaseTwoArgsTwoExpected{lhs: 238988824201, rhs: 0b1110000111011011011100111011010110011000, expected: (368451016945, false)}, // rhs = -129462192744
        TestCaseTwoArgsTwoExpected{lhs: 152652723322, rhs: 171797738329, expected: (1080366612769, false)},
        TestCaseTwoArgsTwoExpected{lhs: 0b1101110010101000100100011011110001010011, rhs: 0b1110100101110100010011100110000000000101, expected: (1044553882702, false)}, // lhs = -151790699437 rhs = -96832954363
        TestCaseTwoArgsTwoExpected{lhs: 267028917218, rhs: 424187767783, expected: (942352777211, false)},
        TestCaseTwoArgsTwoExpected{lhs: 420976117796, rhs: 281480071837, expected: (139496045959, false)},
        TestCaseTwoArgsTwoExpected{lhs: 0b1111000101111000111100001110110000111000, rhs: 0b1010011111100101110000110111111110010001, expected: (316001840295, false)}, // lhs = -62395454408 rhs = -378397294703
        TestCaseTwoArgsTwoExpected{lhs: 11044881423, rhs: 0b1101001110010000011111111010000000001001, expected: (201894126598, false)}, // rhs = -190849245175
        TestCaseTwoArgsTwoExpected{lhs: 0b1011111111001110000010100011101001110110, rhs: 0b1011011010000001000011011011101001101110, expected: (39946321928, false)}, // lhs = -275716097418 rhs = -315662419346
        TestCaseTwoArgsTwoExpected{lhs: 110211427586, rhs: 41673272532, expected: (68538155054, false)},
        TestCaseTwoArgsTwoExpected{lhs: 341023908893, rhs: 0b1011110111000001100001010000110100011111, expected: (625539995390, true)}, // rhs = -284516086497
        TestCaseTwoArgsTwoExpected{lhs: 299122748335, rhs: 213199882108, expected: (85922866227, false)},
        TestCaseTwoArgsTwoExpected{lhs: 0b1000100101111010010001111001001000001011, rhs: 519942128629, expected: (70519901718, true)}, // lhs = -509049597429
        TestCaseTwoArgsTwoExpected{lhs: 467190205750, rhs: 0b1011101101111011010101000100100001111011, expected: (761473828027, true)}, // rhs = -294283622277
        TestCaseTwoArgsTwoExpected{lhs: 205047297408, rhs: 0b1001011111000010001101110111001110001010, expected: (652760449526, true)}, // rhs = -447713152118
        TestCaseTwoArgsTwoExpected{lhs: 97021768728, rhs: 0b1010011100011010110111101110011001011000, expected: (478823042496, false)}, // rhs = -381801273768
        TestCaseTwoArgsTwoExpected{lhs: 0b1100111100001110111001101000001000101111, rhs: 0b1000100110110011011111110100110101000011, expected: (297886233836, false)}, // lhs = -210203409873 rhs = -508089643709
        TestCaseTwoArgsTwoExpected{lhs: 126916796910, rhs: 0b1001110010011101000111010101001110100111, expected: (553777581639, true)}, // rhs = -426860784729
        TestCaseTwoArgsTwoExpected{lhs: 0b1001011011101111011011000010010110101100, rhs: 397368324921, expected: (250893611635, true)}, // lhs = -451249691220
        TestCaseTwoArgsTwoExpected{lhs: 0b1001100010111010001010100010010101100001, rhs: 339499288451, expected: (316459064798, true)}, // lhs = -443553274527
        TestCaseTwoArgsTwoExpected{lhs: 154273530174, rhs: 501327555089, expected: (752457602861, false)},
        TestCaseTwoArgsTwoExpected{lhs: 417608376827, rhs: 0b1101010110000101001100111111111111110010, expected: (600057192969, true)}, // rhs = -182448816142
        TestCaseTwoArgsTwoExpected{lhs: 389985832267, rhs: 65285729767, expected: (324700102500, false)},
        TestCaseTwoArgsTwoExpected{lhs: 0b1101001011001010111111101011110111001101, rhs: 228087770968, expected: (677261053557, false)}, // lhs = -194162803251
        TestCaseTwoArgsTwoExpected{lhs: 319794239284, rhs: 435135500441, expected: (984170366619, false)},
        TestCaseTwoArgsTwoExpected{lhs: 0b1111101111001111101111001101011101000111, rhs: 224701708014, expected: (856820342873, false)}, // lhs = -17989576889
        TestCaseTwoArgsTwoExpected{lhs: 80839553851, rhs: 0b1011101000001111110100110111100100101100, expected: (381221747215, false)}, // rhs = -300382193364
        TestCaseTwoArgsTwoExpected{lhs: 446977315667, rhs: 0b1011111010110001100001010110110100101001, expected: (727466845738, true)}, // rhs = -280489530071
        TestCaseTwoArgsTwoExpected{lhs: 0b1100101110000010110110100111110101111001, rhs: 0b1100100001110110001100111111100101111010, expected: (13097141247, false)}, // lhs = -225437909639 rhs = -238535050886
        TestCaseTwoArgsTwoExpected{lhs: 530232887270, rhs: 476265136951, expected: (53967750319, false)},
        TestCaseTwoArgsTwoExpected{lhs: 0b1101010001000001101001000011000101011010, rhs: 0b1101111110011101110001000100011110010110, expected: (1050721380804, false)}, // lhs = -187877281446 rhs = -139087034474
        TestCaseTwoArgsTwoExpected{lhs: 417813144636, rhs: 0b1111001001110101111001001110011111100101, expected: (475964750935, false)}, // rhs = -58151606299
        TestCaseTwoArgsTwoExpected{lhs: 0b1110010111001011001110000101001100101001, rhs: 274428518795, expected: (712528458142, false)}, // lhs = -112554650839
        TestCaseTwoArgsTwoExpected{lhs: 0b1101110100011001001111110101010101011101, rhs: 331552557793, expected: (618058795644, false)}, // lhs = -149900274339
        TestCaseTwoArgsTwoExpected{lhs: 37230298587, rhs: 0b1010100001001110001110110110011110001000, expected: (413874904659, false)}, // rhs = -376644606072
        TestCaseTwoArgsTwoExpected{lhs: 143377071357, rhs: 0b1010111011100101011000010000011110101010, expected: (491716048211, false)}, // rhs = -348338976854
        TestCaseTwoArgsTwoExpected{lhs: 302302756454, rhs: 0b1000100001110010101011111010110110111100, expected: (815774716074, true)}, // rhs = -513471959620
        TestCaseTwoArgsTwoExpected{lhs: 0b1111001001011110111010010101110111101101, rhs: 0b1100110011001100110101000101011100101111, expected: (161364641470, false)}, // lhs = -58537189907 rhs = -219901831377
        TestCaseTwoArgsTwoExpected{lhs: 190971851889, rhs: 141696029830, expected: (49275822059, false)},
        TestCaseTwoArgsTwoExpected{lhs: 0b1110000000111101010110010001111000010111, rhs: 0b1010001010111110111011010010100110100011, expected: (264114009204, false)}, // lhs = -136409702889 rhs = -400523712093
        TestCaseTwoArgsTwoExpected{lhs: 96634042401, rhs: 0b1011101110000011110110001101001000000010, expected: (390774760991, false)}, // rhs = -294140718590
        TestCaseTwoArgsTwoExpected{lhs: 215929190742, rhs: 0b1001111101100111110100001100000101110111, expected: (630799284191, true)}, // rhs = -414870093449
        TestCaseTwoArgsTwoExpected{lhs: 385150618629, rhs: 0b1111001001111100011101101111100111010010, expected: (443191988787, false)}, // rhs = -58041370158
        TestCaseTwoArgsTwoExpected{lhs: 518254874492, rhs: 0b1001010011110111101001010010110011101001, expected: (977956545171, true)}, // rhs = -459701670679
        TestCaseTwoArgsTwoExpected{lhs: 0b1001010010110101010000111111100111111000, rhs: 280225594317, expected: (358470696491, true)}, // lhs = -460815336968
        TestCaseTwoArgsTwoExpected{lhs: 0b1011100101010110010111101011101011101010, rhs: 356738965105, expected: (439279033465, true)}, // lhs = -303493629206
        TestCaseTwoArgsTwoExpected{lhs: 0b1110001111101010111000100001100101111110, rhs: 0b1001001011001111100001111100001001001000, expected: (348351256374, false)}, // lhs = -120613365378 rhs = -468964621752
        TestCaseTwoArgsTwoExpected{lhs: 0b1000000001101100010101100000001111010100, rhs: 0b1000110011111011001110010111010011101010, expected: (1045574749930, false)}, // lhs = -547938237484 rhs = -494001359638
        TestCaseTwoArgsTwoExpected{lhs: 0b1011000110011011101110011000010000001011, rhs: 0b1011001011111111110101101100111110111001, expected: (1093537018962, false)}, // lhs = -336689789941 rhs = -330715181127
        TestCaseTwoArgsTwoExpected{lhs: 375475566298, rhs: 0b1100101111000100110001101111111011001100, expected: (599807457294, true)}, // rhs = -224331890996
        TestCaseTwoArgsTwoExpected{lhs: 0b1011011000110110001100100110101100101111, rhs: 0b1111101101100101101110111110101001101010, expected: (802361344197, false)}, // lhs = -316918306001 rhs = -19768022422
        TestCaseTwoArgsTwoExpected{lhs: 0b1001110000111001001111101001001011001001, rhs: 0b1001100001101101011000100101011111100101, expected: (16305109732, false)}, // lhs = -428536327479 rhs = -444841437211
        TestCaseTwoArgsTwoExpected{lhs: 0b1010001101110001110100000001100001001101, rhs: 438217668387, expected: (263771463978, true)}, // lhs = -397522495411
        TestCaseTwoArgsTwoExpected{lhs: 202634959726, rhs: 0b1000111111101101010001111101101011101011, expected: (683985354883, true)}, // rhs = -481350395157
        TestCaseTwoArgsTwoExpected{lhs: 0b1000010000001110101111011101000011100000, rhs: 366590985249, expected: (200592018623, true)}, // lhs = -532328623904
        TestCaseTwoArgsTwoExpected{lhs: 232623690633, rhs: 0b1001010011100101101001100011011000001110, expected: (692627283323, true)}, // rhs = -460003592690
        TestCaseTwoArgsTwoExpected{lhs: 149172793160, rhs: 141625287058, expected: (7547506102, false)},
        TestCaseTwoArgsTwoExpected{lhs: 472971654579, rhs: 0b1110011010011100110110000010011000010000, expected: (582009393059, true)}, // rhs = -109037738480
        TestCaseTwoArgsTwoExpected{lhs: 287658205158, rhs: 80230399934, expected: (207427805224, false)},
        TestCaseTwoArgsTwoExpected{lhs: 115209005156, rhs: 0b1000111000110001101101110011111111111110, expected: (604001183846, true)}, // rhs = -488792178690
        TestCaseTwoArgsTwoExpected{lhs: 0b1000111010111110100001000011111010001100, rhs: 441301259025, expected: (171780434811, true)}, // lhs = -486429933940
        TestCaseTwoArgsTwoExpected{lhs: 0b1110010011011111011011111011101011011001, rhs: 505437660684, expected: (477563524301, true)}, // lhs = -116510442791
        TestCaseTwoArgsTwoExpected{lhs: 223013566455, rhs: 253072191060, expected: (1069453003171, false)},
        TestCaseTwoArgsTwoExpected{lhs: 0b1100001001111011100110110011000100001110, rhs: 487390476744, expected: (347906946886, true)}, // lhs = -264214204146
        TestCaseTwoArgsTwoExpected{lhs: 150692469665, rhs: 0b1111101000101000101110100010011010110110, expected: (175778985195, false)}, // rhs = -25086515530
        TestCaseTwoArgsTwoExpected{lhs: 0b1010011000111011100110111001111010011100, rhs: 206997586006, expected: (506967039558, true)}, // lhs = -385547002212
        TestCaseTwoArgsTwoExpected{lhs: 282619154130, rhs: 0b1011111100111000010000101101100100110001, expected: (560848123297, true)}, // rhs = -278228969167
        TestCaseTwoArgsTwoExpected{lhs: 158414479925, rhs: 0b1001011111011110101100101010100011110110, expected: (605649795391, true)}, // rhs = -447235315466
        TestCaseTwoArgsTwoExpected{lhs: 67455796388, rhs: 0b1111101100101011000001110110101011000011, expected: (88208726497, false)}, // rhs = -20752930109
        TestCaseTwoArgsTwoExpected{lhs: 88098780802, rhs: 439265217990, expected: (748345190588, false)},
        TestCaseTwoArgsTwoExpected{lhs: 0b1001010011010010010101001010011000100110, rhs: 0b1100011101101100010011011101010000011000, expected: (882180018702, false)}, // lhs = -460327705050 rhs = -242996095976
        TestCaseTwoArgsTwoExpected{lhs: 0b1010000011101001000110000011010011101000, rhs: 168224027173, expected: (522881417923, true)}, // lhs = -408406182680
        TestCaseTwoArgsTwoExpected{lhs: 474662722308, rhs: 0b1101000000111100000000001110000000001100, expected: (679814462200, true)}, // rhs = -205151739892
        TestCaseTwoArgsTwoExpected{lhs: 480741930055, rhs: 57104520135, expected: (423637409920, false)},
        TestCaseTwoArgsTwoExpected{lhs: 0b1110000110100101101010100010001111100111, rhs: 41372834310, expected: (927774198241, false)}, // lhs = -130364595225
        TestCaseTwoArgsTwoExpected{lhs: 0b1010011100010101110001100101100101010010, rhs: 465727090152, expected: (251897768810, true)}, // lhs = -381886768814
        TestCaseTwoArgsTwoExpected{lhs: 306524798117, rhs: 0b1000001111010010100110111000101001100110, expected: (839862301247, true)}, // rhs = -533337503130
        TestCaseTwoArgsTwoExpected{lhs: 0b1111010001101001010010001101100011000100, rhs: 377389380031, expected: (672349021957, false)}, // lhs = -49773225788
        TestCaseTwoArgsTwoExpected{lhs: 0b1011011110001001111010000011001001011001, rhs: 0b1011110111100101111010000101101100010000, expected: (1072198309705, false)}, // lhs = -311218916775 rhs = -283905598704
        TestCaseTwoArgsTwoExpected{lhs: 153897273504, rhs: 0b1101000110110010001000001010100001110110, expected: (352772251690, false)}, // rhs = -198874978186
        TestCaseTwoArgsTwoExpected{lhs: 104358074525, rhs: 545823156956, expected: (658046545345, false)},
        TestCaseTwoArgsTwoExpected{lhs: 302857516378, rhs: 41858983195, expected: (260998533183, false)},
        TestCaseTwoArgsTwoExpected{lhs: 0b1110001000110110001100101000011110010010, rhs: 120942564969, expected: (850629325097, false)}, // lhs = -127939737710
        TestCaseTwoArgsTwoExpected{lhs: 510605775087, rhs: 13426104725, expected: (497179670362, false)},
        TestCaseTwoArgsTwoExpected{lhs: 175256533667, rhs: 0b1100001010111110000110101111100101110100, expected: (438355067183, false)}, // rhs = -263098533516
        TestCaseTwoArgsTwoExpected{lhs: 392994653126, rhs: 108391200794, expected: (284603452332, false)},
        TestCaseTwoArgsTwoExpected{lhs: 95484741495, rhs: 111175021247, expected: (1083821348024, false)},
        TestCaseTwoArgsTwoExpected{lhs: 0b1011001001011101000011110001100111000100, rhs: 431790706429, expected: (334274742983, true)}, // lhs = -333446178364
        TestCaseTwoArgsTwoExpected{lhs: 0b1101011011100110010000000011011001110100, rhs: 0b1000100011010000110000010001100101010011, expected: (335368101153, false)}, // lhs = -176525658508 rhs = -511893759661
        TestCaseTwoArgsTwoExpected{lhs: 0b1000010000111001001100001111110111010100, rhs: 250596301907, expected: (317298893185, true)}, // lhs = -531616432684
        TestCaseTwoArgsTwoExpected{lhs: 0b1011001010000110011001001101010101000010, rhs: 543896109211, expected: (222862824615, true)}, // lhs = -332752693950
        TestCaseTwoArgsTwoExpected{lhs: 0b1011101011111111011100110110100001110101, rhs: 318495572459, expected: (484654098058, true)}, // lhs = -296361957259
        TestCaseTwoArgsTwoExpected{lhs: 436335423593, rhs: 131257549315, expected: (305077874278, false)},
        TestCaseTwoArgsTwoExpected{lhs: 0b1110111111011000001011111010101001010011, rhs: 0b1111000111000010011100001001001101000001, expected: (1091286538002, false)}, // lhs = -69387441581 rhs = -61162351807
        TestCaseTwoArgsTwoExpected{lhs: 0b1011111001110000000101001001110000110100, rhs: 0b1110011011111011010111011101001000000010, expected: (925376105010, false)}, // lhs = -281587442636 rhs = -107451919870
        TestCaseTwoArgsTwoExpected{lhs: 216718321693, rhs: 170384581688, expected: (46333740005, false)},
        TestCaseTwoArgsTwoExpected{lhs: 0b1111010001011010010111010100100000010110, rhs: 0b1010011111111111010000110011111001010111, expected: (327945947583, false)}, // lhs = -50023544810 rhs = -377969492393
        TestCaseTwoArgsTwoExpected{lhs: 272391445174, rhs: 0b1111000001001010100110100011011101111101, expected: (339859301177, false)}, // rhs = -67467856003
        TestCaseTwoArgsTwoExpected{lhs: 0b1001100000011100101000000110010101011001, rhs: 0b1100011000001110111111101100110011110010, expected: (902171826279, false)}, // lhs = -446196325031 rhs = -248856523534
        TestCaseTwoArgsTwoExpected{lhs: 0b1000011011101100000110101111000000000010, rhs: 0b1101010011001101101010001000011010110110, expected: (765014993228, false)}, // lhs = -520024821758 rhs = -185528187210
        TestCaseTwoArgsTwoExpected{lhs: 197898928286, rhs: 459354387246, expected: (838056168816, false)},
        TestCaseTwoArgsTwoExpected{lhs: 0b1000100000001010101110110110001101100100, rhs: 0b1001101100111110000111010001010010010101, expected: (1017045208783, false)}, // lhs = -515216022684 rhs = -432749603691
        TestCaseTwoArgsTwoExpected{lhs: 541394475770, rhs: 0b1001100111000100110100111101011000101011, expected: (980473889999, true)}, // rhs = -439079414229
        TestCaseTwoArgsTwoExpected{lhs: 0b1001100110001001101111000011110110110111, rhs: 152147356941, expected: (507293454506, true)}, // lhs = -440070816329
        TestCaseTwoArgsTwoExpected{lhs: 0b1011110010000000110011010101010001000010, rhs: 367602241177, expected: (442012550569, true)}, // lhs = -289896836030
        TestCaseTwoArgsTwoExpected{lhs: 417836236736, rhs: 239739929150, expected: (178096307586, false)},
        TestCaseTwoArgsTwoExpected{lhs: 0b1100001110010001101111011000110001000101, rhs: 282445994159, expected: (557517747094, false)}, // lhs = -259547886523
        TestCaseTwoArgsTwoExpected{lhs: 0b1100111110110011001110011110100110000110, rhs: 0b1110010101110010001110101110101011100101, expected: (1006112800417, false)}, // lhs = -207446480506 rhs = -114047653147
        TestCaseTwoArgsTwoExpected{lhs: 0b1100101100011101110110110001000110010000, rhs: 0b1010000111111001101000110111101110111001, expected: (176701281751, false)}, // lhs = -227132370544 rhs = -403833652295
        TestCaseTwoArgsTwoExpected{lhs: 0b1011111001100001001010110100101010101000, rhs: 429402045645, expected: (388271967707, true)}, // lhs = -281837614424
        TestCaseTwoArgsTwoExpected{lhs: 476970909137, rhs: 0b1100111010110011110110000101010110001101, expected: (688701974596, true)}, // rhs = -211731065459
        TestCaseTwoArgsTwoExpected{lhs: 0b1110001001010010010000100010010010000101, rhs: 105498062191, expected: (866544613142, false)}, // lhs = -127468952443
        TestCaseTwoArgsTwoExpected{lhs: 0b1010100110000101001010001100111011011101, rhs: 525283275327, expected: (202800241822, true)}, // lhs = -371428110627
        TestCaseTwoArgsTwoExpected{lhs: 285607387393, rhs: 0b1111010101011100111011000011001101100011, expected: (331293044126, false)}, // rhs = -45685656733
        TestCaseTwoArgsTwoExpected{lhs: 212204369610, rhs: 0b1010101111011010011101011011110000101111, expected: (573611440795, true)}, // rhs = -361407071185
        TestCaseTwoArgsTwoExpected{lhs: 0b1101110001111110110010110101101010001011, rhs: 250034464424, expected: (696985596899, false)}, // lhs = -152491566453
        TestCaseTwoArgsTwoExpected{lhs: 0b1100101000010001101000111010011000001001, rhs: 0b1011000010001000010110100010111010010111, expected: (109677475698, false)}, // lhs = -231632296439 rhs = -341309772137
        TestCaseTwoArgsTwoExpected{lhs: 0b1001100011010111101110011011010010001101, rhs: 180143890787, expected: (476310410026, true)}, // lhs = -443057326963
        TestCaseTwoArgsTwoExpected{lhs: 0b1000110000100100101100101010000101010010, rhs: 145922200688, expected: (455988907234, true)}, // lhs = -497600519854
        TestCaseTwoArgsTwoExpected{lhs: 285381996605, rhs: 500313063618, expected: (884580560763, false)},
        TestCaseTwoArgsTwoExpected{lhs: 0b1111100110001110011111101011100010100100, rhs: 0b1001101111001011000101100111111010110000, expected: (402710346228, false)}, // lhs = -27674101596 rhs = -430384447824
        TestCaseTwoArgsTwoExpected{lhs: 152676472520, rhs: 0b1101100011010000111111100010001000101010, expected: (320968848542, false)}, // rhs = -168292376022
        TestCaseTwoArgsTwoExpected{lhs: 0b1010000010000010011100111110000110011000, rhs: 0b1100100010000001010110001000110110111110, expected: (927731504090, false)}, // lhs = -410128227944 rhs = -238348104258
        TestCaseTwoArgsTwoExpected{lhs: 384557089672, rhs: 311320113225, expected: (73236976447, false)},
        TestCaseTwoArgsTwoExpected{lhs: 0b1100101110010000001011010010101001100010, rhs: 499604532544, expected: (374692707618, true)}, // lhs = -225214387614
        TestCaseTwoArgsTwoExpected{lhs: 0b1010010100110010110100111110011110110001, rhs: 180675730265, expected: (528846621784, true)}, // lhs = -389989275727
        TestCaseTwoArgsTwoExpected{lhs: 0b1011111011101110100110000011011001110000, rhs: 0b1101001010011100001111001111110111011101, expected: (1014993991827, false)}, // lhs = -279464888720 rhs = -194947252771
        TestCaseTwoArgsTwoExpected{lhs: 24771737157, rhs: 112130392121, expected: (1012152972812, false)},
        TestCaseTwoArgsTwoExpected{lhs: 0b1100001111110001111011001011001111111011, rhs: 0b1110111100001001000111100111001000010000, expected: (914438898155, false)}, // lhs = -257934183429 rhs = -72861453808
        TestCaseTwoArgsTwoExpected{lhs: 0b1011001110110100100010111101100111001101, rhs: 22467124121, expected: (749361086004, false)}, // lhs = -327683417651
        TestCaseTwoArgsTwoExpected{lhs: 0b1001100110011100101100001001011011101100, rhs: 0b1010100111111001110000111010001001100010, expected: (1029230621834, false)}, // lhs = -439752812820 rhs = -369471806878
        TestCaseTwoArgsTwoExpected{lhs: 0b1111100001100111011000100111000110011001, rhs: 0b1011001101010110101101010101001011101101, expected: (296632524460, false)}, // lhs = -32625233511 rhs = -329257757971
        TestCaseTwoArgsTwoExpected{lhs: 345697924596, rhs: 185073980509, expected: (160623944087, false)},
        TestCaseTwoArgsTwoExpected{lhs: 0b1101010001111010111001000000110001011101, rhs: 0b1011100101111111111010001111011110000111, expected: (115879908566, false)}, // lhs = -186916795299 rhs = -302796703865
        TestCaseTwoArgsTwoExpected{lhs: 7789969244, rhs: 272709182727, expected: (834592414293, false)},
        TestCaseTwoArgsTwoExpected{lhs: 0b1111101000000001101000011010011100110001, rhs: 441637752898, expected: (632131442415, false)}, // lhs = -25742432463
        TestCaseTwoArgsTwoExpected{lhs: 449814311508, rhs: 362992530002, expected: (86821781506, false)},
        TestCaseTwoArgsTwoExpected{lhs: 0b1001110010110011000001001000011011001111, rhs: 0b1000000110001110000100010100101000100110, expected: (116584037545, false)}, // lhs = -426493311281 rhs = -543077348826
        TestCaseTwoArgsTwoExpected{lhs: 0b1010110101010100000111000001111010001011, rhs: 0b1101011111101101101001101100001101001100, expected: (916547001151, false)}, // lhs = -355071156597 rhs = -172106529972
        TestCaseTwoArgsTwoExpected{lhs: 0b1001001011111011000100010100110000010000, rhs: 0b1101010101111001110011010010100010011101, expected: (813917545331, false)}, // lhs = -468234187760 rhs = -182640105315
        TestCaseTwoArgsTwoExpected{lhs: 138547162651, rhs: 0b1110011000111001011010000111000011000011, expected: (249253166424, false)}, // rhs = -110706003773
        TestCaseTwoArgsTwoExpected{lhs: 0b1011110011100111011010001101100000111010, rhs: 281072852157, expected: (530263407485, true)}, // lhs = -288175368134
        TestCaseTwoArgsTwoExpected{lhs: 81499763660, rhs: 0b1001101001001110100110111100101011111100, expected: (518267594960, false)}, // rhs = -436767831300
        TestCaseTwoArgsTwoExpected{lhs: 166690221663, rhs: 195818662275, expected: (1070383187164, false)},
        TestCaseTwoArgsTwoExpected{lhs: 0b1011110111101111001001100101010001110010, rhs: 0b1010000100101010010000100101110011010101, expected: (123562358685, false)}, // lhs = -283750542222 rhs = -407312900907
        TestCaseTwoArgsTwoExpected{lhs: 0b1100000101011001100001010011001000001101, rhs: 0b1001100000001111101001001000011100010000, expected: (177333119741, false)}, // lhs = -269081038323 rhs = -446414158064
        TestCaseTwoArgsTwoExpected{lhs: 0b1111111001000001011001001101100010101111, rhs: 454161615573, expected: (637857205722, false)}, // lhs = -7492806481
        TestCaseTwoArgsTwoExpected{lhs: 94650207245, rhs: 0b1101101010010101100011110001001100110111, expected: (255349782742, false)}, // rhs = -160699575497
        TestCaseTwoArgsTwoExpected{lhs: 186485128606, rhs: 154870039847, expected: (31615088759, false)},
        TestCaseTwoArgsTwoExpected{lhs: 0b1110001010010101110100010110001101111101, rhs: 130806959103, expected: (842369177470, false)}, // lhs = -126335491203
        TestCaseTwoArgsTwoExpected{lhs: 407425108538, rhs: 0b1001101010011001110111101110000110001000, expected: (842930251954, true)}, // rhs = -435505143416
        TestCaseTwoArgsTwoExpected{lhs: 0b1000010011001111100001101110001000100111, rhs: 91001232855, expected: (479416173648, true)}, // lhs = -529094221273
        TestCaseTwoArgsTwoExpected{lhs: 273865304754, rhs: 0b1010100000101100110111111011111110001101, expected: (651069565733, true)}, // rhs = -377204260979
        TestCaseTwoArgsTwoExpected{lhs: 488078821125, rhs: 0b1100000110011100110010110100111110110001, expected: (756031190868, true)}, // rhs = -267952369743
        TestCaseTwoArgsTwoExpected{lhs: 0b1011100110011110000100110010000010111011, rhs: 251735165946, expected: (545485837505, true)}, // lhs = -302290624325
        TestCaseTwoArgsTwoExpected{lhs: 64015902248, rhs: 265514632293, expected: (898012897731, false)},
        TestCaseTwoArgsTwoExpected{lhs: 287816872461, rhs: 325849396758, expected: (1061479103479, false)},
        TestCaseTwoArgsTwoExpected{lhs: 224874899303, rhs: 0b1110000010001001001100001110111111110111, expected: (360012167024, false)}, // rhs = -135137267721
        TestCaseTwoArgsTwoExpected{lhs: 352009718972, rhs: 212450344703, expected: (139559374269, false)},
        TestCaseTwoArgsTwoExpected{lhs: 0b1110100001001111101011110011011001111110, rhs: 0b1001001011000011001010111001011101000101, expected: (367429656377, false)}, // lhs = -101742332290 rhs = -469171988667
        TestCaseTwoArgsTwoExpected{lhs: 546691657794, rhs: 11791110892, expected: (534900546902, false)},
        TestCaseTwoArgsTwoExpected{lhs: 0b1111011111011000110100000011101000011000, rhs: 0b1000001011100011000110010111111101111101, expected: (502338599579, false)}, // lhs = -35017180648 rhs = -537355780227
        TestCaseTwoArgsTwoExpected{lhs: 500644137657, rhs: 0b1110101000011101110010010101011011111001, expected: (594633683904, true)}, // rhs = -93989546247
        TestCaseTwoArgsTwoExpected{lhs: 125736484013, rhs: 42469013646, expected: (83267470367, false)},
        TestCaseTwoArgsTwoExpected{lhs: 526137607335, rhs: 360876749603, expected: (165260857732, false)},
        TestCaseTwoArgsTwoExpected{lhs: 0b1001000101110001010101101101001010001100, rhs: 159841457652, expected: (464830315672, true)}, // lhs = -474839854452
        TestCaseTwoArgsTwoExpected{lhs: 0b1101011100010100101101101000101001110011, rhs: 0b1010111001000100010101110111111010111011, expected: (175294581688, false)}, // lhs = -175746151821 rhs = -351040733509
        TestCaseTwoArgsTwoExpected{lhs: 0b1011011100110100001110010100000011010111, rhs: 0b1000110111011110110100111000010001001001, expected: (177526389902, false)}, // lhs = -312656445225 rhs = -490182835127
        TestCaseTwoArgsTwoExpected{lhs: 103819897614, rhs: 0b1100100101011010101110000011000111100000, expected: (338521078062, false)}, // rhs = -234701180448
        TestCaseTwoArgsTwoExpected{lhs: 407489815523, rhs: 435050612854, expected: (1071950830445, false)},
        TestCaseTwoArgsTwoExpected{lhs: 0b1010001001001011010011001110000001110000, rhs: 0b1100111111110001100101100001101001010001, expected: (903448282655, false)}, // lhs = -402463596432 rhs = -206400251311
        TestCaseTwoArgsTwoExpected{lhs: 386211538223, rhs: 119866193102, expected: (266345345121, false)},
        TestCaseTwoArgsTwoExpected{lhs: 243689676627, rhs: 0b1000110111010110011101010010111010000011, expected: (734012911824, true)}, // rhs = -490323235197
        TestCaseTwoArgsTwoExpected{lhs: 0b1110001001010101011111011111011110111110, rhs: 312013013126, expected: (660083914552, false)}, // lhs = -127414700098
        TestCaseTwoArgsTwoExpected{lhs: 485323737384, rhs: 0b1011001010001001011111000110001010110101, expected: (818024556147, true)}, // rhs = -332700818763
        TestCaseTwoArgsTwoExpected{lhs: 166984894072, rhs: 307027793025, expected: (959468728823, false)},
        TestCaseTwoArgsTwoExpected{lhs: 209340452765, rhs: 0b1001010011111010011111100100111001010101, expected: (668994339144, true)}, // rhs = -459653886379

        // Edge cases
        TestCaseTwoArgsTwoExpected{lhs: 0, rhs: 0, expected: (0, false)},
        TestCaseTwoArgsTwoExpected{lhs: 0, rhs: 549755813887, expected: (549755813889, false)},
        TestCaseTwoArgsTwoExpected{lhs: 0, rhs: 0b1000000000000000000000000000000000000000, expected: (549755813888, true)}, // rhs = -549755813888
        TestCaseTwoArgsTwoExpected{lhs: 549755813887, rhs: 0, expected: (549755813887, false)},
        TestCaseTwoArgsTwoExpected{lhs: 549755813887, rhs: 549755813887, expected: (0, false)},
        TestCaseTwoArgsTwoExpected{lhs: 549755813887, rhs: 0b1000000000000000000000000000000000000000, expected: (1099511627775, true)}, // rhs = -549755813888
        TestCaseTwoArgsTwoExpected{lhs: 0b1000000000000000000000000000000000000000, rhs: 0, expected: (549755813888, false)}, // lhs = -549755813888
        TestCaseTwoArgsTwoExpected{lhs: 0b1000000000000000000000000000000000000000, rhs: 549755813887, expected: (1, true)}, // lhs = -549755813888
        TestCaseTwoArgsTwoExpected{lhs: 0b1000000000000000000000000000000000000000, rhs: 0b1000000000000000000000000000000000000000, expected: (0, false)}, // lhs = -549755813888 rhs = -549755813888
    ];

    #[test]
    fn test_i40() {
        for case in test_cases.span() {
            let mut state = RTStateOps::new();
            assert_eq!(
                __llvm_ssub_with_overflow_n_n_Sncs(ref state, *case.lhs, *case.rhs), *case.expected,
            );
        }
    }
}

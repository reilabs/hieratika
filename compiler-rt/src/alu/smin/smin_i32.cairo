use crate::alu::smin::smin;

pub fn __llvm_smin_i_i_i(lhs: u128, rhs: u128) -> u128 {
    smin::<u32>(lhs, rhs)
}

#[cfg(test)]
mod tests {
    use super::__llvm_smin_i_i_i;
    use crate::alu::test_case::TestCaseTwoArgs;
    #[cairofmt::skip]
    pub const test_cases: [TestCaseTwoArgs; 129] = [
        // Due to Cairo's casting limitation, negative numbers are represented as bit patterns.

        // Random test cases
        TestCaseTwoArgs{lhs: 500625998, rhs: 0b10001111111000001010111110001111, expected: 0b10001111111000001010111110001111}, // rhs = -1881100401 expected = -1881100401
        TestCaseTwoArgs{lhs: 1818905003, rhs: 0b10010111011111011001010111011010, expected: 0b10010111011111011001010111011010}, // rhs = -1753377318 expected = -1753377318
        TestCaseTwoArgs{lhs: 0b11101100011000000101100111101010, rhs: 0b10110110010101010110110101000100, expected: 0b10110110010101010110110101000100}, // lhs = -329229846 rhs = -1235915452 expected = -1235915452
        TestCaseTwoArgs{lhs: 1672919616, rhs: 0b11001101110110011110000110110001, expected: 0b11001101110110011110000110110001}, // rhs = -841358927 expected = -841358927
        TestCaseTwoArgs{lhs: 1537168759, rhs: 1388080945, expected: 1388080945},
        TestCaseTwoArgs{lhs: 1768291010, rhs: 0b11011110011001001001000110110100, expected: 0b11011110011001001001000110110100}, // rhs = -563834444 expected = -563834444
        TestCaseTwoArgs{lhs: 1370506547, rhs: 0b11011001010101110010101101010101, expected: 0b11011001010101110010101101010101}, // rhs = -648598699 expected = -648598699
        TestCaseTwoArgs{lhs: 640539670, rhs: 0b10001010011001100111000011011000, expected: 0b10001010011001100111000011011000}, // rhs = -1972997928 expected = -1972997928
        TestCaseTwoArgs{lhs: 1081343816, rhs: 0b10010110101110110101001011010010, expected: 0b10010110101110110101001011010010}, // rhs = -1766108462 expected = -1766108462
        TestCaseTwoArgs{lhs: 0b11110000111000101001001110001101, rhs: 0b10011100010001101100010010001011, expected: 0b10011100010001101100010010001011}, // lhs = -253586547 rhs = -1673083765 expected = -1673083765
        TestCaseTwoArgs{lhs: 372805013, rhs: 923583488, expected: 372805013},
        TestCaseTwoArgs{lhs: 0b10100111101000110011101011010001, rhs: 0b10110000100100000011101010010010, expected: 0b10100111101000110011101011010001}, // lhs = -1482474799 rhs = -1332725102 expected = -1482474799
        TestCaseTwoArgs{lhs: 0b11111000100100010010111101011011, rhs: 0b10010110010100011011011101100010, expected: 0b10010110010100011011011101100010}, // lhs = -124702885 rhs = -1773029534 expected = -1773029534
        TestCaseTwoArgs{lhs: 1708315462, rhs: 0b10001100011011100010110111111000, expected: 0b10001100011011100010110111111000}, // rhs = -1938936328 expected = -1938936328
        TestCaseTwoArgs{lhs: 750030102, rhs: 742155161, expected: 742155161},
        TestCaseTwoArgs{lhs: 1679406461, rhs: 0b11000010110000110111001111111001, expected: 0b11000010110000110111001111111001}, // rhs = -1027378183 expected = -1027378183
        TestCaseTwoArgs{lhs: 952088570, rhs: 0b10011011011101100110100010001100, expected: 0b10011011011101100110100010001100}, // rhs = -1686738804 expected = -1686738804
        TestCaseTwoArgs{lhs: 0b11000011010000101010010111110010, rhs: 0b11110010100100110101000101011111, expected: 0b11000011010000101010010111110010}, // lhs = -1019042318 rhs = -225226401 expected = -1019042318
        TestCaseTwoArgs{lhs: 0b10001001010101101110101011111010, rhs: 0b10011110100000101001100101011100, expected: 0b10001001010101101110101011111010}, // lhs = -1990792454 rhs = -1635608228 expected = -1990792454
        TestCaseTwoArgs{lhs: 1831900540, rhs: 0b10010101001011001011100100110011, expected: 0b10010101001011001011100100110011}, // rhs = -1792231117 expected = -1792231117
        TestCaseTwoArgs{lhs: 483523022, rhs: 834349581, expected: 483523022},
        TestCaseTwoArgs{lhs: 0b11101001001110111110110001001000, rhs: 0b11011010110010101110110111101101, expected: 0b11011010110010101110110111101101}, // lhs = -381948856 rhs = -624235027 expected = -624235027
        TestCaseTwoArgs{lhs: 0b11001001111111101000011000101011, rhs: 1012805161, expected: 0b11001001111111101000011000101011}, // lhs = -906066389 expected = -906066389
        TestCaseTwoArgs{lhs: 761759155, rhs: 0b10000001110110111000111001111101, expected: 0b10000001110110111000111001111101}, // rhs = -2116317571 expected = -2116317571
        TestCaseTwoArgs{lhs: 1389322715, rhs: 0b11001101000100000100010111101111, expected: 0b11001101000100000100010111101111}, // rhs = -854571537 expected = -854571537
        TestCaseTwoArgs{lhs: 9439032, rhs: 1250095698, expected: 9439032},
        TestCaseTwoArgs{lhs: 959706145, rhs: 1457450595, expected: 959706145},
        TestCaseTwoArgs{lhs: 0b11001000011011011110001100011100, rhs: 154462858, expected: 0b11001000011011011110001100011100}, // lhs = -932322532 expected = -932322532
        TestCaseTwoArgs{lhs: 175627565, rhs: 1256727772, expected: 175627565},
        TestCaseTwoArgs{lhs: 0b10100000000111000011101010110011, rhs: 0b11000011001110101011000110011100, expected: 0b10100000000111000011101010110011}, // lhs = -1608762701 rhs = -1019563620 expected = -1608762701
        TestCaseTwoArgs{lhs: 51995351, rhs: 923492550, expected: 51995351},
        TestCaseTwoArgs{lhs: 0b10111100000110111011011011000001, rhs: 792047504, expected: 0b10111100000110111011011011000001}, // lhs = -1139034431 expected = -1139034431
        TestCaseTwoArgs{lhs: 505559926, rhs: 0b11111011100011111100101011111101, expected: 0b11111011100011111100101011111101}, // rhs = -74462467 expected = -74462467
        TestCaseTwoArgs{lhs: 0b11010100101000101100001111000000, rhs: 0b11010111001010000101110011001101, expected: 0b11010100101000101100001111000000}, // lhs = -727530560 rhs = -685220659 expected = -727530560
        TestCaseTwoArgs{lhs: 1898212215, rhs: 126637834, expected: 126637834},
        TestCaseTwoArgs{lhs: 0b10110110110101010100011010000101, rhs: 0b10001011110101111111100101010001, expected: 0b10001011110101111111100101010001}, // lhs = -1227536763 rhs = -1948780207 expected = -1948780207
        TestCaseTwoArgs{lhs: 0b11100011000101011000100110011000, rhs: 0b10111011111000101101111011110100, expected: 0b10111011111000101101111011110100}, // lhs = -485127784 rhs = -1142759692 expected = -1142759692
        TestCaseTwoArgs{lhs: 367462688, rhs: 641597396, expected: 367462688},
        TestCaseTwoArgs{lhs: 404805863, rhs: 0b10100010101111010000100011001100, expected: 0b10100010101111010000100011001100}, // rhs = -1564669748 expected = -1564669748
        TestCaseTwoArgs{lhs: 865154801, rhs: 0b11101111010110010001010011110100, expected: 0b11101111010110010001010011110100}, // rhs = -279374604 expected = -279374604
        TestCaseTwoArgs{lhs: 1660450576, rhs: 0b11110010110011101000100111101010, expected: 0b11110010110011101000100111101010}, // rhs = -221345302 expected = -221345302
        TestCaseTwoArgs{lhs: 0b11101011100001111111110001111111, rhs: 0b10011011111010101101000011010001, expected: 0b10011011111010101101000011010001}, // lhs = -343409537 rhs = -1679109935 expected = -1679109935
        TestCaseTwoArgs{lhs: 964594337, rhs: 1978152415, expected: 964594337},
        TestCaseTwoArgs{lhs: 0b10100101011011110111100100010010, rhs: 0b10110110110011001110100001111010, expected: 0b10100101011011110111100100010010}, // lhs = -1519421166 rhs = -1228085126 expected = -1519421166
        TestCaseTwoArgs{lhs: 1282466540, rhs: 1101153572, expected: 1101153572},
        TestCaseTwoArgs{lhs: 0b10110110110101111110111001000100, rhs: 2114498498, expected: 0b10110110110101111110111001000100}, // lhs = -1227362748 expected = -1227362748
        TestCaseTwoArgs{lhs: 0b11010010000000110000101001101000, rhs: 1108925181, expected: 0b11010010000000110000101001101000}, // lhs = -771552664 expected = -771552664
        TestCaseTwoArgs{lhs: 730956684, rhs: 0b11111011001010100011100001011110, expected: 0b11111011001010100011100001011110}, // rhs = -81119138 expected = -81119138
        TestCaseTwoArgs{lhs: 935340825, rhs: 0b10001001000010110010001110000110, expected: 0b10001001000010110010001110000110}, // rhs = -1995758714 expected = -1995758714
        TestCaseTwoArgs{lhs: 1542288298, rhs: 735305350, expected: 735305350},
        TestCaseTwoArgs{lhs: 812832949, rhs: 1788627362, expected: 812832949},
        TestCaseTwoArgs{lhs: 0b11110011001011010101101101110010, rhs: 0b10010011110110010011011101010011, expected: 0b10010011110110010011011101010011}, // lhs = -215131278 rhs = -1814481069 expected = -1814481069
        TestCaseTwoArgs{lhs: 0b10110011111110101101101100111001, rhs: 863751793, expected: 0b10110011111110101101101100111001}, // lhs = -1275405511 expected = -1275405511
        TestCaseTwoArgs{lhs: 1543432692, rhs: 967214763, expected: 967214763},
        TestCaseTwoArgs{lhs: 0b10101000100100001001010110111010, rhs: 0b10100101100111010101110110010110, expected: 0b10100101100111010101110110010110}, // lhs = -1466919494 rhs = -1516413546 expected = -1516413546
        TestCaseTwoArgs{lhs: 1251554910, rhs: 0b11110000001001011001011111111011, expected: 0b11110000001001011001011111111011}, // rhs = -265971717 expected = -265971717
        TestCaseTwoArgs{lhs: 593061846, rhs: 0b10010011011111000011000100000110, expected: 0b10010011011111000011000100000110}, // rhs = -1820577530 expected = -1820577530
        TestCaseTwoArgs{lhs: 1966789075, rhs: 0b10100001110101010100010100000111, expected: 0b10100001110101010100010100000111}, // rhs = -1579858681 expected = -1579858681
        TestCaseTwoArgs{lhs: 0b11000101000100010110100101101100, rhs: 0b11111011100110010001000111011110, expected: 0b11000101000100010110100101101100}, // lhs = -988714644 rhs = -73854498 expected = -988714644
        TestCaseTwoArgs{lhs: 0b11101110011010101000100110000100, rhs: 1738755336, expected: 0b11101110011010101000100110000100}, // lhs = -295007868 expected = -295007868
        TestCaseTwoArgs{lhs: 0b10001100000011010110111111010000, rhs: 1887729683, expected: 0b10001100000011010110111111010000}, // lhs = -1945276464 expected = -1945276464
        TestCaseTwoArgs{lhs: 0b11101001011111000100100110010000, rhs: 0b10111001110010001111001011001110, expected: 0b10111001110010001111001011001110}, // lhs = -377730672 rhs = -1178012978 expected = -1178012978
        TestCaseTwoArgs{lhs: 1891278421, rhs: 0b11111111000100001100110011011011, expected: 0b11111111000100001100110011011011}, // rhs = -15676197 expected = -15676197
        TestCaseTwoArgs{lhs: 1886820523, rhs: 266560300, expected: 266560300},
        TestCaseTwoArgs{lhs: 680653816, rhs: 0b11110000010000001001110011101010, expected: 0b11110000010000001001110011101010}, // rhs = -264200982 expected = -264200982
        TestCaseTwoArgs{lhs: 1031208718, rhs: 1434492863, expected: 1031208718},
        TestCaseTwoArgs{lhs: 1999518297, rhs: 1202744390, expected: 1202744390},
        TestCaseTwoArgs{lhs: 1333909424, rhs: 0b11111011110101011101011010111101, expected: 0b11111011110101011101011010111101}, // rhs = -69871939 expected = -69871939
        TestCaseTwoArgs{lhs: 1935069567, rhs: 1419889313, expected: 1419889313},
        TestCaseTwoArgs{lhs: 0b11100111011000011001101100010001, rhs: 0b11110010001010101000111110111001, expected: 0b11100111011000011001101100010001}, // lhs = -413033711 rhs = -232091719 expected = -413033711
        TestCaseTwoArgs{lhs: 1355921793, rhs: 1951301704, expected: 1355921793},
        TestCaseTwoArgs{lhs: 2074332942, rhs: 0b11110110001011101001101000110000, expected: 0b11110110001011101001101000110000}, // rhs = -164718032 expected = -164718032
        TestCaseTwoArgs{lhs: 0b10100110010000010000010001001000, rhs: 0b11100100100000000010011000111011, expected: 0b10100110010000010000010001001000}, // lhs = -1505688504 rhs = -461363653 expected = -1505688504
        TestCaseTwoArgs{lhs: 0b10101100110011011100111001010001, rhs: 0b10001111001000010100001101000110, expected: 0b10001111001000010100001101000110}, // lhs = -1395798447 rhs = -1893645498 expected = -1893645498
        TestCaseTwoArgs{lhs: 680850375, rhs: 2000636094, expected: 680850375},
        TestCaseTwoArgs{lhs: 0b10100011100001001100100000010011, rhs: 0b11010111111100101110011111011100, expected: 0b10100011100001001100100000010011}, // lhs = -1551579117 rhs = -671946788 expected = -1551579117
        TestCaseTwoArgs{lhs: 0b10001010001110100011101010111000, rhs: 0b10100001111000101100010000011010, expected: 0b10001010001110100011101010111000}, // lhs = -1975895368 rhs = -1578974182 expected = -1975895368
        TestCaseTwoArgs{lhs: 1928720073, rhs: 0b10010100111100101100100101101001, expected: 0b10010100111100101100100101101001}, // rhs = -1796028055 expected = -1796028055
        TestCaseTwoArgs{lhs: 242287400, rhs: 557608581, expected: 242287400},
        TestCaseTwoArgs{lhs: 0b11111010100100010110001011001111, rhs: 1153424264, expected: 0b11111010100100010110001011001111}, // lhs = -91135281 expected = -91135281
        TestCaseTwoArgs{lhs: 1031597860, rhs: 1296985287, expected: 1031597860},
        TestCaseTwoArgs{lhs: 397126958, rhs: 0b10110000101100110111011000000000, expected: 0b10110000101100110111011000000000}, // rhs = -1330416128 expected = -1330416128
        TestCaseTwoArgs{lhs: 0b10010100011100111100011010111010, rhs: 0b10001000100010001011011011101010, expected: 0b10001000100010001011011011101010}, // lhs = -1804351814 rhs = -2004306198 expected = -2004306198
        TestCaseTwoArgs{lhs: 1253929171, rhs: 1286380150, expected: 1253929171},
        TestCaseTwoArgs{lhs: 0b10001101001011100011101101010001, rhs: 1656300061, expected: 0b10001101001011100011101101010001}, // lhs = -1926349999 expected = -1926349999
        TestCaseTwoArgs{lhs: 711481611, rhs: 10629989, expected: 10629989},
        TestCaseTwoArgs{lhs: 0b11101100011110000100111011101111, rhs: 0b11010110101011001000111100000110, expected: 0b11010110101011001000111100000110}, // lhs = -327659793 rhs = -693334266 expected = -693334266
        TestCaseTwoArgs{lhs: 733081369, rhs: 1470734322, expected: 733081369},
        TestCaseTwoArgs{lhs: 558914539, rhs: 537512604, expected: 537512604},
        TestCaseTwoArgs{lhs: 1194946051, rhs: 918212794, expected: 918212794},
        TestCaseTwoArgs{lhs: 355085408, rhs: 0b11100000000111011001011010010010, expected: 0b11100000000111011001011010010010}, // rhs = -534931822 expected = -534931822
        TestCaseTwoArgs{lhs: 859304080, rhs: 374952455, expected: 374952455},
        TestCaseTwoArgs{lhs: 0b10101101010110110110101110010101, rhs: 0b10110001110011010101010010100001, expected: 0b10101101010110110110101110010101}, // lhs = -1386517611 rhs = -1311943519 expected = -1386517611
        TestCaseTwoArgs{lhs: 1629837842, rhs: 0b10000111111000111110111101010001, expected: 0b10000111111000111110111101010001}, // rhs = -2015105199 expected = -2015105199
        TestCaseTwoArgs{lhs: 214958001, rhs: 968266102, expected: 214958001},
        TestCaseTwoArgs{lhs: 410255271, rhs: 0b11011000001010011100101001101001, expected: 0b11011000001010011100101001101001}, // rhs = -668349847 expected = -668349847
        TestCaseTwoArgs{lhs: 602394710, rhs: 1500922920, expected: 602394710},
        TestCaseTwoArgs{lhs: 1005703692, rhs: 39795648, expected: 39795648},
        TestCaseTwoArgs{lhs: 2086132633, rhs: 1910190567, expected: 1910190567},
        TestCaseTwoArgs{lhs: 989669653, rhs: 1630611861, expected: 989669653},
        TestCaseTwoArgs{lhs: 2007495, rhs: 0b10001011000000001011110101011011, expected: 0b10001011000000001011110101011011}, // rhs = -1962885797 expected = -1962885797
        TestCaseTwoArgs{lhs: 0b10110001011000111010011000101101, rhs: 230994339, expected: 0b10110001011000111010011000101101}, // lhs = -1318869459 expected = -1318869459
        TestCaseTwoArgs{lhs: 1032098518, rhs: 0b11000111011101010011010110100001, expected: 0b11000111011101010011010110100001}, // rhs = -948619871 expected = -948619871
        TestCaseTwoArgs{lhs: 0b11100011101000001111010001101000, rhs: 728625785, expected: 0b11100011101000001111010001101000}, // lhs = -475990936 expected = -475990936
        TestCaseTwoArgs{lhs: 735590992, rhs: 0b11011101010110100011010010010001, expected: 0b11011101010110100011010010010001}, // rhs = -581290863 expected = -581290863
        TestCaseTwoArgs{lhs: 0b11110000001100100100111101001000, rhs: 0b11001001100010001111000000000001, expected: 0b11001001100010001111000000000001}, // lhs = -265138360 rhs = -913772543 expected = -913772543
        TestCaseTwoArgs{lhs: 0b10001111000010100000001101111000, rhs: 0b11000101101001110101111111000110, expected: 0b10001111000010100000001101111000}, // lhs = -1895169160 rhs = -978886714 expected = -1895169160
        TestCaseTwoArgs{lhs: 1992344006, rhs: 2078746087, expected: 1992344006},
        TestCaseTwoArgs{lhs: 1101600157, rhs: 0b10000011111000111011010100110101, expected: 0b10000011111000111011010100110101}, // rhs = -2082228939 expected = -2082228939
        TestCaseTwoArgs{lhs: 0b11010001110000000101001010011111, rhs: 0b11101100001110011010111111110010, expected: 0b11010001110000000101001010011111}, // lhs = -775925089 rhs = -331763726 expected = -775925089
        TestCaseTwoArgs{lhs: 0b11010111110001011011111001001010, rhs: 223875067, expected: 0b11010111110001011011111001001010}, // lhs = -674906550 expected = -674906550
        TestCaseTwoArgs{lhs: 1803167670, rhs: 1589453377, expected: 1589453377},
        TestCaseTwoArgs{lhs: 630244363, rhs: 0b10101100010000010100000111011011, expected: 0b10101100010000010100000111011011}, // rhs = -1405009445 expected = -1405009445
        TestCaseTwoArgs{lhs: 0b11101010100110010000001011101100, rhs: 0b10100100011101010000001010100011, expected: 0b10100100011101010000001010100011}, // lhs = -359070996 rhs = -1535835485 expected = -1535835485
        TestCaseTwoArgs{lhs: 0b10010010001010110111110101000000, rhs: 1842874099, expected: 0b10010010001010110111110101000000}, // lhs = -1842643648 expected = -1842643648
        TestCaseTwoArgs{lhs: 547927653, rhs: 253313106, expected: 253313106},
        TestCaseTwoArgs{lhs: 0b10111101000011101010110001110100, rhs: 0b11001110110011000100110111011110, expected: 0b10111101000011101010110001110100}, // lhs = -1123111820 rhs = -825471522 expected = -1123111820
        TestCaseTwoArgs{lhs: 469433852, rhs: 0b10011001111111110000110001000100, expected: 0b10011001111111110000110001000100}, // rhs = -1711338428 expected = -1711338428
        TestCaseTwoArgs{lhs: 1822725366, rhs: 1268929372, expected: 1268929372},
        TestCaseTwoArgs{lhs: 865935463, rhs: 0b11111101010000111001111010101100, expected: 0b11111101010000111001111010101100}, // rhs = -45900116 expected = -45900116

        // Edge cases
        TestCaseTwoArgs{lhs: 0, rhs: 0, expected: 0},
        TestCaseTwoArgs{lhs: 0, rhs: 2147483647, expected: 0},
        TestCaseTwoArgs{lhs: 0, rhs: 0b10000000000000000000000000000000, expected: 0b10000000000000000000000000000000}, // rhs = -2147483648 expected = -2147483648
        TestCaseTwoArgs{lhs: 2147483647, rhs: 0, expected: 0},
        TestCaseTwoArgs{lhs: 2147483647, rhs: 2147483647, expected: 2147483647},
        TestCaseTwoArgs{lhs: 2147483647, rhs: 0b10000000000000000000000000000000, expected: 0b10000000000000000000000000000000}, // rhs = -2147483648 expected = -2147483648
        TestCaseTwoArgs{lhs: 0b10000000000000000000000000000000, rhs: 0, expected: 0b10000000000000000000000000000000}, // lhs = -2147483648 expected = -2147483648
        TestCaseTwoArgs{lhs: 0b10000000000000000000000000000000, rhs: 2147483647, expected: 0b10000000000000000000000000000000}, // lhs = -2147483648 expected = -2147483648
        TestCaseTwoArgs{lhs: 0b10000000000000000000000000000000, rhs: 0b10000000000000000000000000000000, expected: 0b10000000000000000000000000000000}, // lhs = -2147483648 rhs = -2147483648 expected = -2147483648
    ];
    #[test]
    fn test_i32() {
        for case in test_cases.span() {
            assert_eq!(__llvm_smin_i_i_i(*case.lhs, *case.rhs), *case.expected);
        }
    }
}

use crate::rtstate::RTState;
use crate::alu::usub_sat::usub_sat;

pub fn __llvm_usub_sat_i_i_i(ref state: RTState, lhs: u128, rhs: u128) -> u128 {
    usub_sat::<u32>(lhs, rhs)
}

#[cfg(test)]
mod tests {
    use crate::rtstate::RTStateOps;
    use super::__llvm_usub_sat_i_i_i;
    use crate::alu::test_case::TestCaseTwoArgs;
    #[cairofmt::skip]
    pub const test_cases: [TestCaseTwoArgs; 124] = [
        // Random test cases
        TestCaseTwoArgs{lhs: 3383164062, rhs: 2503087617, expected: 880076445},
        TestCaseTwoArgs{lhs: 2949930, rhs: 2475982757, expected: 0},
        TestCaseTwoArgs{lhs: 1949496481, rhs: 4205335780, expected: 0},
        TestCaseTwoArgs{lhs: 1822257479, rhs: 11352187, expected: 1810905292},
        TestCaseTwoArgs{lhs: 1944326207, rhs: 3483867607, expected: 0},
        TestCaseTwoArgs{lhs: 3262641405, rhs: 1999936104, expected: 1262705301},
        TestCaseTwoArgs{lhs: 833207504, rhs: 3766609966, expected: 0},
        TestCaseTwoArgs{lhs: 3795403414, rhs: 1717029952, expected: 2078373462},
        TestCaseTwoArgs{lhs: 1375498886, rhs: 3187548954, expected: 0},
        TestCaseTwoArgs{lhs: 194224687, rhs: 2222326554, expected: 0},
        TestCaseTwoArgs{lhs: 2030313580, rhs: 679438507, expected: 1350875073},
        TestCaseTwoArgs{lhs: 3440687392, rhs: 345102826, expected: 3095584566},
        TestCaseTwoArgs{lhs: 2034911835, rhs: 971737554, expected: 1063174281},
        TestCaseTwoArgs{lhs: 379067492, rhs: 2096207387, expected: 0},
        TestCaseTwoArgs{lhs: 1514793986, rhs: 1126265177, expected: 388528809},
        TestCaseTwoArgs{lhs: 2217068814, rhs: 3440428148, expected: 0},
        TestCaseTwoArgs{lhs: 3022302353, rhs: 965050206, expected: 2057252147},
        TestCaseTwoArgs{lhs: 4086260459, rhs: 1446834490, expected: 2639425969},
        TestCaseTwoArgs{lhs: 169552685, rhs: 4235575800, expected: 0},
        TestCaseTwoArgs{lhs: 1134975664, rhs: 4240387877, expected: 0},
        TestCaseTwoArgs{lhs: 2970469109, rhs: 3306990560, expected: 0},
        TestCaseTwoArgs{lhs: 2046200633, rhs: 612612253, expected: 1433588380},
        TestCaseTwoArgs{lhs: 1455671758, rhs: 1302807288, expected: 152864470},
        TestCaseTwoArgs{lhs: 3913288912, rhs: 3594995672, expected: 318293240},
        TestCaseTwoArgs{lhs: 366238935, rhs: 3286916167, expected: 0},
        TestCaseTwoArgs{lhs: 1897271638, rhs: 1125758925, expected: 771512713},
        TestCaseTwoArgs{lhs: 2950733971, rhs: 124446079, expected: 2826287892},
        TestCaseTwoArgs{lhs: 3105692535, rhs: 3338121861, expected: 0},
        TestCaseTwoArgs{lhs: 3232194419, rhs: 1431289487, expected: 1800904932},
        TestCaseTwoArgs{lhs: 4141158908, rhs: 2041293852, expected: 2099865056},
        TestCaseTwoArgs{lhs: 354688313, rhs: 386247558, expected: 0},
        TestCaseTwoArgs{lhs: 2145379142, rhs: 405128903, expected: 1740250239},
        TestCaseTwoArgs{lhs: 2986162222, rhs: 357238, expected: 2985804984},
        TestCaseTwoArgs{lhs: 1868991276, rhs: 2218021022, expected: 0},
        TestCaseTwoArgs{lhs: 3906298555, rhs: 4053345460, expected: 0},
        TestCaseTwoArgs{lhs: 2672846880, rhs: 258344023, expected: 2414502857},
        TestCaseTwoArgs{lhs: 679595010, rhs: 616540270, expected: 63054740},
        TestCaseTwoArgs{lhs: 4263791684, rhs: 4282685221, expected: 0},
        TestCaseTwoArgs{lhs: 4111268853, rhs: 3564753086, expected: 546515767},
        TestCaseTwoArgs{lhs: 4262892486, rhs: 3790577235, expected: 472315251},
        TestCaseTwoArgs{lhs: 1637719707, rhs: 331252189, expected: 1306467518},
        TestCaseTwoArgs{lhs: 1434976750, rhs: 1222300295, expected: 212676455},
        TestCaseTwoArgs{lhs: 2296799992, rhs: 480834566, expected: 1815965426},
        TestCaseTwoArgs{lhs: 2331160551, rhs: 2472712844, expected: 0},
        TestCaseTwoArgs{lhs: 613281271, rhs: 1476988847, expected: 0},
        TestCaseTwoArgs{lhs: 579241184, rhs: 263831703, expected: 315409481},
        TestCaseTwoArgs{lhs: 3247906626, rhs: 4253097142, expected: 0},
        TestCaseTwoArgs{lhs: 2567256433, rhs: 3137565602, expected: 0},
        TestCaseTwoArgs{lhs: 1667616989, rhs: 1837094437, expected: 0},
        TestCaseTwoArgs{lhs: 224603990, rhs: 3899645860, expected: 0},
        TestCaseTwoArgs{lhs: 2786488279, rhs: 1288237924, expected: 1498250355},
        TestCaseTwoArgs{lhs: 3295634413, rhs: 689011323, expected: 2606623090},
        TestCaseTwoArgs{lhs: 113302681, rhs: 3992043425, expected: 0},
        TestCaseTwoArgs{lhs: 2920533360, rhs: 3992661261, expected: 0},
        TestCaseTwoArgs{lhs: 853212400, rhs: 716066271, expected: 137146129},
        TestCaseTwoArgs{lhs: 442171685, rhs: 693692076, expected: 0},
        TestCaseTwoArgs{lhs: 843161885, rhs: 1555575674, expected: 0},
        TestCaseTwoArgs{lhs: 3542119417, rhs: 648869433, expected: 2893249984},
        TestCaseTwoArgs{lhs: 6295056, rhs: 1323801736, expected: 0},
        TestCaseTwoArgs{lhs: 2441435632, rhs: 2307912072, expected: 133523560},
        TestCaseTwoArgs{lhs: 2857194534, rhs: 3484169756, expected: 0},
        TestCaseTwoArgs{lhs: 3805299378, rhs: 2219792571, expected: 1585506807},
        TestCaseTwoArgs{lhs: 3765666167, rhs: 2004308885, expected: 1761357282},
        TestCaseTwoArgs{lhs: 4006458408, rhs: 2154344095, expected: 1852114313},
        TestCaseTwoArgs{lhs: 3971186468, rhs: 1607517653, expected: 2363668815},
        TestCaseTwoArgs{lhs: 1574872924, rhs: 3561938772, expected: 0},
        TestCaseTwoArgs{lhs: 1182053024, rhs: 1407007183, expected: 0},
        TestCaseTwoArgs{lhs: 472288976, rhs: 3848747550, expected: 0},
        TestCaseTwoArgs{lhs: 3654723538, rhs: 2969515038, expected: 685208500},
        TestCaseTwoArgs{lhs: 2453181086, rhs: 946088484, expected: 1507092602},
        TestCaseTwoArgs{lhs: 3301234517, rhs: 3672036195, expected: 0},
        TestCaseTwoArgs{lhs: 2979982368, rhs: 3747426350, expected: 0},
        TestCaseTwoArgs{lhs: 1156076217, rhs: 3572367269, expected: 0},
        TestCaseTwoArgs{lhs: 3212052377, rhs: 3723018008, expected: 0},
        TestCaseTwoArgs{lhs: 545673836, rhs: 937683805, expected: 0},
        TestCaseTwoArgs{lhs: 3816097882, rhs: 12358547, expected: 3803739335},
        TestCaseTwoArgs{lhs: 3770641490, rhs: 2847291026, expected: 923350464},
        TestCaseTwoArgs{lhs: 2220094994, rhs: 2413517278, expected: 0},
        TestCaseTwoArgs{lhs: 1051127479, rhs: 36083993, expected: 1015043486},
        TestCaseTwoArgs{lhs: 4215335069, rhs: 2519701240, expected: 1695633829},
        TestCaseTwoArgs{lhs: 3391101584, rhs: 2572082089, expected: 819019495},
        TestCaseTwoArgs{lhs: 2442328652, rhs: 3226231410, expected: 0},
        TestCaseTwoArgs{lhs: 2996170050, rhs: 2961290715, expected: 34879335},
        TestCaseTwoArgs{lhs: 3630247276, rhs: 851823420, expected: 2778423856},
        TestCaseTwoArgs{lhs: 2346743333, rhs: 2482769715, expected: 0},
        TestCaseTwoArgs{lhs: 44832335, rhs: 3433948412, expected: 0},
        TestCaseTwoArgs{lhs: 4086398182, rhs: 975410098, expected: 3110988084},
        TestCaseTwoArgs{lhs: 3312433810, rhs: 2639585809, expected: 672848001},
        TestCaseTwoArgs{lhs: 672142883, rhs: 511124644, expected: 161018239},
        TestCaseTwoArgs{lhs: 758583643, rhs: 3132646234, expected: 0},
        TestCaseTwoArgs{lhs: 347163738, rhs: 923470028, expected: 0},
        TestCaseTwoArgs{lhs: 2321593786, rhs: 804729858, expected: 1516863928},
        TestCaseTwoArgs{lhs: 975963424, rhs: 1715273334, expected: 0},
        TestCaseTwoArgs{lhs: 3467839555, rhs: 1941379109, expected: 1526460446},
        TestCaseTwoArgs{lhs: 667065605, rhs: 1166079873, expected: 0},
        TestCaseTwoArgs{lhs: 1649127174, rhs: 2943494338, expected: 0},
        TestCaseTwoArgs{lhs: 2758891947, rhs: 3430536919, expected: 0},
        TestCaseTwoArgs{lhs: 3352211220, rhs: 293169780, expected: 3059041440},
        TestCaseTwoArgs{lhs: 2790286640, rhs: 723257812, expected: 2067028828},
        TestCaseTwoArgs{lhs: 3956070912, rhs: 959421003, expected: 2996649909},
        TestCaseTwoArgs{lhs: 3321664929, rhs: 1587692545, expected: 1733972384},
        TestCaseTwoArgs{lhs: 2364490069, rhs: 3004826820, expected: 0},
        TestCaseTwoArgs{lhs: 756210910, rhs: 622501539, expected: 133709371},
        TestCaseTwoArgs{lhs: 807816475, rhs: 4126623912, expected: 0},
        TestCaseTwoArgs{lhs: 1513656425, rhs: 2357586127, expected: 0},
        TestCaseTwoArgs{lhs: 3389144661, rhs: 2773774844, expected: 615369817},
        TestCaseTwoArgs{lhs: 130176615, rhs: 554855698, expected: 0},
        TestCaseTwoArgs{lhs: 3073261813, rhs: 3204479446, expected: 0},
        TestCaseTwoArgs{lhs: 764994643, rhs: 3740905450, expected: 0},
        TestCaseTwoArgs{lhs: 1289240113, rhs: 750694224, expected: 538545889},
        TestCaseTwoArgs{lhs: 4235602212, rhs: 1079022709, expected: 3156579503},
        TestCaseTwoArgs{lhs: 2818132711, rhs: 2945989736, expected: 0},
        TestCaseTwoArgs{lhs: 1048055482, rhs: 3725174063, expected: 0},
        TestCaseTwoArgs{lhs: 4222451755, rhs: 980945592, expected: 3241506163},
        TestCaseTwoArgs{lhs: 633284451, rhs: 2876590056, expected: 0},
        TestCaseTwoArgs{lhs: 557465162, rhs: 1760846089, expected: 0},
        TestCaseTwoArgs{lhs: 3828539528, rhs: 1251850933, expected: 2576688595},
        TestCaseTwoArgs{lhs: 1282769370, rhs: 349630690, expected: 933138680},
        TestCaseTwoArgs{lhs: 3184432244, rhs: 2207354122, expected: 977078122},
        TestCaseTwoArgs{lhs: 1423752764, rhs: 2401425907, expected: 0},

        // Edge cases
        TestCaseTwoArgs{lhs: 0, rhs: 0, expected: 0},
        TestCaseTwoArgs{lhs: 0, rhs: 4294967295, expected: 0},
        TestCaseTwoArgs{lhs: 4294967295, rhs: 0, expected: 4294967295},
        TestCaseTwoArgs{lhs: 4294967295, rhs: 4294967295, expected: 0},
    ];
    #[test]
    fn test_i32() {
        for case in test_cases.span() {
            let mut state = RTStateOps::new();
            assert_eq!(__llvm_usub_sat_i_i_i(ref state, *case.lhs, *case.rhs), *case.expected);
        }
    }
}

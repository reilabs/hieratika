use crate::alu::usub_sat::usub_sat;
use crate::integer::u24::u24;

pub fn __llvm_usub_sat_x_x_x(lhs: u128, rhs: u128) -> u128 {
    usub_sat::<u24>(lhs, rhs)
}

#[cfg(test)]
mod tests {
    use super::__llvm_usub_sat_x_x_x;
    use crate::alu::test_case::TestCaseTwoArgs;
    #[cairofmt::skip]
    pub const test_cases: [TestCaseTwoArgs; 244] = [
        // Random test cases
        TestCaseTwoArgs{lhs: 10159586, rhs: 223894, expected: 9935692},
        TestCaseTwoArgs{lhs: 8941275, rhs: 8101219, expected: 840056},
        TestCaseTwoArgs{lhs: 2381169, rhs: 12240742, expected: 0},
        TestCaseTwoArgs{lhs: 10241410, rhs: 15771776, expected: 0},
        TestCaseTwoArgs{lhs: 12447927, rhs: 7275412, expected: 5172515},
        TestCaseTwoArgs{lhs: 6165057, rhs: 8237777, expected: 0},
        TestCaseTwoArgs{lhs: 8413130, rhs: 2578579, expected: 5834551},
        TestCaseTwoArgs{lhs: 15176754, rhs: 3013767, expected: 12162987},
        TestCaseTwoArgs{lhs: 4433293, rhs: 14379306, expected: 0},
        TestCaseTwoArgs{lhs: 1886304, rhs: 7908176, expected: 0},
        TestCaseTwoArgs{lhs: 11223582, rhs: 3003323, expected: 8220259},
        TestCaseTwoArgs{lhs: 13424024, rhs: 2466560, expected: 10957464},
        TestCaseTwoArgs{lhs: 6166790, rhs: 5952375, expected: 214415},
        TestCaseTwoArgs{lhs: 10973584, rhs: 15012676, expected: 0},
        TestCaseTwoArgs{lhs: 10619528, rhs: 11587607, expected: 0},
        TestCaseTwoArgs{lhs: 6912881, rhs: 16289191, expected: 0},
        TestCaseTwoArgs{lhs: 3255130, rhs: 4082613, expected: 0},
        TestCaseTwoArgs{lhs: 11941416, rhs: 1443543, expected: 10497873},
        TestCaseTwoArgs{lhs: 5230386, rhs: 5674491, expected: 0},
        TestCaseTwoArgs{lhs: 14083507, rhs: 13379116, expected: 704391},
        TestCaseTwoArgs{lhs: 15318753, rhs: 9530188, expected: 5788565},
        TestCaseTwoArgs{lhs: 2342684, rhs: 13210748, expected: 0},
        TestCaseTwoArgs{lhs: 9178900, rhs: 10349495, expected: 0},
        TestCaseTwoArgs{lhs: 9479307, rhs: 16342041, expected: 0},
        TestCaseTwoArgs{lhs: 9240979, rhs: 9150254, expected: 90725},
        TestCaseTwoArgs{lhs: 1017051, rhs: 6551955, expected: 0},
        TestCaseTwoArgs{lhs: 8774943, rhs: 4765075, expected: 4009868},
        TestCaseTwoArgs{lhs: 1018052, rhs: 8225669, expected: 0},
        TestCaseTwoArgs{lhs: 8847061, rhs: 6271336, expected: 2575725},
        TestCaseTwoArgs{lhs: 6266613, rhs: 9350601, expected: 0},
        TestCaseTwoArgs{lhs: 15759342, rhs: 9748861, expected: 6010481},
        TestCaseTwoArgs{lhs: 14136381, rhs: 14288886, expected: 0},
        TestCaseTwoArgs{lhs: 11086180, rhs: 11500217, expected: 0},
        TestCaseTwoArgs{lhs: 16693543, rhs: 7248208, expected: 9445335},
        TestCaseTwoArgs{lhs: 3887695, rhs: 13960147, expected: 0},
        TestCaseTwoArgs{lhs: 15280664, rhs: 4113809, expected: 11166855},
        TestCaseTwoArgs{lhs: 829436, rhs: 15276811, expected: 0},
        TestCaseTwoArgs{lhs: 6851292, rhs: 1159457, expected: 5691835},
        TestCaseTwoArgs{lhs: 183946, rhs: 11027581, expected: 0},
        TestCaseTwoArgs{lhs: 12121283, rhs: 15040538, expected: 0},
        TestCaseTwoArgs{lhs: 11820947, rhs: 1839096, expected: 9981851},
        TestCaseTwoArgs{lhs: 12788023, rhs: 7564859, expected: 5223164},
        TestCaseTwoArgs{lhs: 16755719, rhs: 6366208, expected: 10389511},
        TestCaseTwoArgs{lhs: 7228756, rhs: 9175700, expected: 0},
        TestCaseTwoArgs{lhs: 1572714, rhs: 10259456, expected: 0},
        TestCaseTwoArgs{lhs: 15626308, rhs: 12125540, expected: 3500768},
        TestCaseTwoArgs{lhs: 11273426, rhs: 807434, expected: 10465992},
        TestCaseTwoArgs{lhs: 9238579, rhs: 5092584, expected: 4145995},
        TestCaseTwoArgs{lhs: 11423703, rhs: 9285774, expected: 2137929},
        TestCaseTwoArgs{lhs: 16518952, rhs: 7342207, expected: 9176745},
        TestCaseTwoArgs{lhs: 9365776, rhs: 13017394, expected: 0},
        TestCaseTwoArgs{lhs: 16279360, rhs: 1442586, expected: 14836774},
        TestCaseTwoArgs{lhs: 7655502, rhs: 13797560, expected: 0},
        TestCaseTwoArgs{lhs: 7241520, rhs: 5553375, expected: 1688145},
        TestCaseTwoArgs{lhs: 2336850, rhs: 14778350, expected: 0},
        TestCaseTwoArgs{lhs: 7461709, rhs: 5897411, expected: 1564298},
        TestCaseTwoArgs{lhs: 5103108, rhs: 15528933, expected: 0},
        TestCaseTwoArgs{lhs: 11382475, rhs: 2715237, expected: 8667238},
        TestCaseTwoArgs{lhs: 10413036, rhs: 837426, expected: 9575610},
        TestCaseTwoArgs{lhs: 6311758, rhs: 8064078, expected: 0},
        TestCaseTwoArgs{lhs: 15521503, rhs: 5016531, expected: 10504972},
        TestCaseTwoArgs{lhs: 2408509, rhs: 13280703, expected: 0},
        TestCaseTwoArgs{lhs: 4470837, rhs: 16123994, expected: 0},
        TestCaseTwoArgs{lhs: 7467927, rhs: 7550871, expected: 0},
        TestCaseTwoArgs{lhs: 3367781, rhs: 1455263, expected: 1912518},
        TestCaseTwoArgs{lhs: 275121, rhs: 16755097, expected: 0},
        TestCaseTwoArgs{lhs: 12881795, rhs: 15260203, expected: 0},
        TestCaseTwoArgs{lhs: 10151873, rhs: 13624095, expected: 0},
        TestCaseTwoArgs{lhs: 15811566, rhs: 9088229, expected: 6723337},
        TestCaseTwoArgs{lhs: 15683118, rhs: 13191282, expected: 2491836},
        TestCaseTwoArgs{lhs: 7734563, rhs: 13684682, expected: 0},
        TestCaseTwoArgs{lhs: 11827938, rhs: 14290871, expected: 0},
        TestCaseTwoArgs{lhs: 1363525, rhs: 9253734, expected: 0},
        TestCaseTwoArgs{lhs: 12142066, rhs: 5094768, expected: 7047298},
        TestCaseTwoArgs{lhs: 5797275, rhs: 11470618, expected: 0},
        TestCaseTwoArgs{lhs: 12812585, rhs: 2659365, expected: 10153220},
        TestCaseTwoArgs{lhs: 3951149, rhs: 7724715, expected: 0},
        TestCaseTwoArgs{lhs: 9759165, rhs: 5562940, expected: 4196225},
        TestCaseTwoArgs{lhs: 416651, rhs: 12567605, expected: 0},
        TestCaseTwoArgs{lhs: 4320606, rhs: 4655610, expected: 0},
        TestCaseTwoArgs{lhs: 7408499, rhs: 13281569, expected: 0},
        TestCaseTwoArgs{lhs: 434264, rhs: 3070655, expected: 0},
        TestCaseTwoArgs{lhs: 14508630, rhs: 2012020, expected: 12496610},
        TestCaseTwoArgs{lhs: 16331851, rhs: 16650721, expected: 0},
        TestCaseTwoArgs{lhs: 10869872, rhs: 422756, expected: 10447116},
        TestCaseTwoArgs{lhs: 8740868, rhs: 4419170, expected: 4321698},
        TestCaseTwoArgs{lhs: 1059154, rhs: 10346354, expected: 0},
        TestCaseTwoArgs{lhs: 10481663, rhs: 948237, expected: 9533426},
        TestCaseTwoArgs{lhs: 3131582, rhs: 9652960, expected: 0},
        TestCaseTwoArgs{lhs: 9569843, rhs: 1086225, expected: 8483618},
        TestCaseTwoArgs{lhs: 2200427, rhs: 9248702, expected: 0},
        TestCaseTwoArgs{lhs: 6238957, rhs: 2463432, expected: 3775525},
        TestCaseTwoArgs{lhs: 16427991, rhs: 16242750, expected: 185241},
        TestCaseTwoArgs{lhs: 9622306, rhs: 16465615, expected: 0},
        TestCaseTwoArgs{lhs: 12285025, rhs: 10338979, expected: 1946046},
        TestCaseTwoArgs{lhs: 1590765, rhs: 6731517, expected: 0},
        TestCaseTwoArgs{lhs: 9651765, rhs: 6311337, expected: 3340428},
        TestCaseTwoArgs{lhs: 16010025, rhs: 1861760, expected: 14148265},
        TestCaseTwoArgs{lhs: 4488323, rhs: 8952103, expected: 0},
        TestCaseTwoArgs{lhs: 5815230, rhs: 11948978, expected: 0},
        TestCaseTwoArgs{lhs: 13297785, rhs: 5766643, expected: 7531142},
        TestCaseTwoArgs{lhs: 5516919, rhs: 1130092, expected: 4386827},
        TestCaseTwoArgs{lhs: 15925016, rhs: 16373133, expected: 0},
        TestCaseTwoArgs{lhs: 8280735, rhs: 11322901, expected: 0},
        TestCaseTwoArgs{lhs: 930575, rhs: 925009, expected: 5566},
        TestCaseTwoArgs{lhs: 16080473, rhs: 5163958, expected: 10916515},
        TestCaseTwoArgs{lhs: 10229424, rhs: 1805480, expected: 8423944},
        TestCaseTwoArgs{lhs: 16000994, rhs: 357024, expected: 15643970},
        TestCaseTwoArgs{lhs: 12253566, rhs: 6154095, expected: 6099471},
        TestCaseTwoArgs{lhs: 9835740, rhs: 14994034, expected: 0},
        TestCaseTwoArgs{lhs: 2000101, rhs: 15433767, expected: 0},
        TestCaseTwoArgs{lhs: 9980196, rhs: 2249784, expected: 7730412},
        TestCaseTwoArgs{lhs: 6011825, rhs: 3226334, expected: 2785491},
        TestCaseTwoArgs{lhs: 15918690, rhs: 6913480, expected: 9005210},
        TestCaseTwoArgs{lhs: 15162967, rhs: 4239182, expected: 10923785},
        TestCaseTwoArgs{lhs: 4106881, rhs: 15772378, expected: 0},
        TestCaseTwoArgs{lhs: 6573423, rhs: 11691062, expected: 0},
        TestCaseTwoArgs{lhs: 11902868, rhs: 2203674, expected: 9699194},
        TestCaseTwoArgs{lhs: 696287, rhs: 6439560, expected: 0},
        TestCaseTwoArgs{lhs: 8376785, rhs: 10261216, expected: 0},
        TestCaseTwoArgs{lhs: 5090027, rhs: 5620971, expected: 0},
        TestCaseTwoArgs{lhs: 1569468, rhs: 4119709, expected: 0},
        TestCaseTwoArgs{lhs: 3991612, rhs: 13429550, expected: 0},
        TestCaseTwoArgs{lhs: 3183069, rhs: 6404827, expected: 0},
        TestCaseTwoArgs{lhs: 16359192, rhs: 3073205, expected: 13285987},
        TestCaseTwoArgs{lhs: 5070249, rhs: 2330836, expected: 2739413},
        TestCaseTwoArgs{lhs: 14464921, rhs: 7102628, expected: 7362293},
        TestCaseTwoArgs{lhs: 4327797, rhs: 14719748, expected: 0},
        TestCaseTwoArgs{lhs: 16256052, rhs: 11514724, expected: 4741328},
        TestCaseTwoArgs{lhs: 11657251, rhs: 9740432, expected: 1916819},
        TestCaseTwoArgs{lhs: 6754124, rhs: 866997, expected: 5887127},
        TestCaseTwoArgs{lhs: 2032646, rhs: 3062294, expected: 0},
        TestCaseTwoArgs{lhs: 7323113, rhs: 4864478, expected: 2458635},
        TestCaseTwoArgs{lhs: 16610036, rhs: 12731138, expected: 3878898},
        TestCaseTwoArgs{lhs: 15792551, rhs: 3699174, expected: 12093377},
        TestCaseTwoArgs{lhs: 3178678, rhs: 14541959, expected: 0},
        TestCaseTwoArgs{lhs: 10826815, rhs: 11127753, expected: 0},
        TestCaseTwoArgs{lhs: 13621730, rhs: 16693832, expected: 0},
        TestCaseTwoArgs{lhs: 8996826, rhs: 3264121, expected: 5732705},
        TestCaseTwoArgs{lhs: 5208013, rhs: 12560154, expected: 0},
        TestCaseTwoArgs{lhs: 2102070, rhs: 14394579, expected: 0},
        TestCaseTwoArgs{lhs: 3008261, rhs: 5927225, expected: 0},
        TestCaseTwoArgs{lhs: 2639153, rhs: 7906642, expected: 0},
        TestCaseTwoArgs{lhs: 14484083, rhs: 2271300, expected: 12212783},
        TestCaseTwoArgs{lhs: 7712638, rhs: 10070681, expected: 0},
        TestCaseTwoArgs{lhs: 12379327, rhs: 12648923, expected: 0},
        TestCaseTwoArgs{lhs: 1892069, rhs: 6197527, expected: 0},
        TestCaseTwoArgs{lhs: 9356147, rhs: 8977186, expected: 378961},
        TestCaseTwoArgs{lhs: 7907199, rhs: 6784096, expected: 1123103},
        TestCaseTwoArgs{lhs: 5492276, rhs: 11581143, expected: 0},
        TestCaseTwoArgs{lhs: 366117, rhs: 2690077, expected: 0},
        TestCaseTwoArgs{lhs: 5484863, rhs: 7022894, expected: 0},
        TestCaseTwoArgs{lhs: 8666212, rhs: 4871903, expected: 3794309},
        TestCaseTwoArgs{lhs: 8356003, rhs: 7357797, expected: 998206},
        TestCaseTwoArgs{lhs: 13970217, rhs: 6593143, expected: 7377074},
        TestCaseTwoArgs{lhs: 3546829, rhs: 6140825, expected: 0},
        TestCaseTwoArgs{lhs: 12775193, rhs: 16218124, expected: 0},
        TestCaseTwoArgs{lhs: 16166507, rhs: 14149416, expected: 2017091},
        TestCaseTwoArgs{lhs: 15399503, rhs: 8590075, expected: 6809428},
        TestCaseTwoArgs{lhs: 14567014, rhs: 72550, expected: 14494464},
        TestCaseTwoArgs{lhs: 1882666, rhs: 3903380, expected: 0},
        TestCaseTwoArgs{lhs: 14699412, rhs: 7754157, expected: 6945255},
        TestCaseTwoArgs{lhs: 4065006, rhs: 16197394, expected: 0},
        TestCaseTwoArgs{lhs: 8140949, rhs: 15716210, expected: 0},
        TestCaseTwoArgs{lhs: 6322082, rhs: 12737968, expected: 0},
        TestCaseTwoArgs{lhs: 8894881, rhs: 14434673, expected: 0},
        TestCaseTwoArgs{lhs: 9350046, rhs: 10262721, expected: 0},
        TestCaseTwoArgs{lhs: 10806659, rhs: 15925319, expected: 0},
        TestCaseTwoArgs{lhs: 6374330, rhs: 8355612, expected: 0},
        TestCaseTwoArgs{lhs: 13679134, rhs: 5113715, expected: 8565419},
        TestCaseTwoArgs{lhs: 12635070, rhs: 222462, expected: 12412608},
        TestCaseTwoArgs{lhs: 8207913, rhs: 8268915, expected: 0},
        TestCaseTwoArgs{lhs: 15277419, rhs: 8595934, expected: 6681485},
        TestCaseTwoArgs{lhs: 1658029, rhs: 14663283, expected: 0},
        TestCaseTwoArgs{lhs: 3545749, rhs: 15408718, expected: 0},
        TestCaseTwoArgs{lhs: 9638621, rhs: 7495483, expected: 2143138},
        TestCaseTwoArgs{lhs: 1444663, rhs: 2457057, expected: 0},
        TestCaseTwoArgs{lhs: 2150178, rhs: 10007222, expected: 0},
        TestCaseTwoArgs{lhs: 3085549, rhs: 5951127, expected: 0},
        TestCaseTwoArgs{lhs: 15170350, rhs: 11813636, expected: 3356714},
        TestCaseTwoArgs{lhs: 8904419, rhs: 5501714, expected: 3402705},
        TestCaseTwoArgs{lhs: 3165336, rhs: 5325657, expected: 0},
        TestCaseTwoArgs{lhs: 5458445, rhs: 5465803, expected: 0},
        TestCaseTwoArgs{lhs: 5607458, rhs: 8530453, expected: 0},
        TestCaseTwoArgs{lhs: 1199441, rhs: 3250878, expected: 0},
        TestCaseTwoArgs{lhs: 16213759, rhs: 600344, expected: 15613415},
        TestCaseTwoArgs{lhs: 6916639, rhs: 10964591, expected: 0},
        TestCaseTwoArgs{lhs: 4829611, rhs: 10280645, expected: 0},
        TestCaseTwoArgs{lhs: 14678824, rhs: 9154223, expected: 5524601},
        TestCaseTwoArgs{lhs: 10093482, rhs: 14250813, expected: 0},
        TestCaseTwoArgs{lhs: 13879486, rhs: 97686, expected: 13781800},
        TestCaseTwoArgs{lhs: 4317593, rhs: 13922112, expected: 0},
        TestCaseTwoArgs{lhs: 16254740, rhs: 13617213, expected: 2637527},
        TestCaseTwoArgs{lhs: 778671, rhs: 3720396, expected: 0},
        TestCaseTwoArgs{lhs: 6359874, rhs: 3955811, expected: 2404063},
        TestCaseTwoArgs{lhs: 1855772, rhs: 8517997, expected: 0},
        TestCaseTwoArgs{lhs: 2114518, rhs: 10684236, expected: 0},
        TestCaseTwoArgs{lhs: 6541220, rhs: 6962188, expected: 0},
        TestCaseTwoArgs{lhs: 6303487, rhs: 1743043, expected: 4560444},
        TestCaseTwoArgs{lhs: 11144244, rhs: 12459886, expected: 0},
        TestCaseTwoArgs{lhs: 15183137, rhs: 7087853, expected: 8095284},
        TestCaseTwoArgs{lhs: 3359473, rhs: 11055698, expected: 0},
        TestCaseTwoArgs{lhs: 12814431, rhs: 2143486, expected: 10670945},
        TestCaseTwoArgs{lhs: 58423, rhs: 9266536, expected: 0},
        TestCaseTwoArgs{lhs: 8647607, rhs: 3164612, expected: 5482995},
        TestCaseTwoArgs{lhs: 11386270, rhs: 6273254, expected: 5113016},
        TestCaseTwoArgs{lhs: 600551, rhs: 15050869, expected: 0},
        TestCaseTwoArgs{lhs: 10471104, rhs: 7999162, expected: 2471942},
        TestCaseTwoArgs{lhs: 2690092, rhs: 4571312, expected: 0},
        TestCaseTwoArgs{lhs: 8168164, rhs: 6971700, expected: 1196464},
        TestCaseTwoArgs{lhs: 2419191, rhs: 1845017, expected: 574174},
        TestCaseTwoArgs{lhs: 819174, rhs: 15172327, expected: 0},
        TestCaseTwoArgs{lhs: 12173851, rhs: 8879569, expected: 3294282},
        TestCaseTwoArgs{lhs: 4546535, rhs: 11225644, expected: 0},
        TestCaseTwoArgs{lhs: 2094703, rhs: 11354321, expected: 0},
        TestCaseTwoArgs{lhs: 13572280, rhs: 13895978, expected: 0},
        TestCaseTwoArgs{lhs: 16027935, rhs: 1724002, expected: 14303933},
        TestCaseTwoArgs{lhs: 2543813, rhs: 15465176, expected: 0},
        TestCaseTwoArgs{lhs: 16438379, rhs: 6070915, expected: 10367464},
        TestCaseTwoArgs{lhs: 13277118, rhs: 10906657, expected: 2370461},
        TestCaseTwoArgs{lhs: 13078711, rhs: 10050077, expected: 3028634},
        TestCaseTwoArgs{lhs: 10074504, rhs: 8307908, expected: 1766596},
        TestCaseTwoArgs{lhs: 14328737, rhs: 15340913, expected: 0},
        TestCaseTwoArgs{lhs: 15495258, rhs: 8406582, expected: 7088676},
        TestCaseTwoArgs{lhs: 11634948, rhs: 14810274, expected: 0},
        TestCaseTwoArgs{lhs: 11959967, rhs: 8022338, expected: 3937629},
        TestCaseTwoArgs{lhs: 1959547, rhs: 7381163, expected: 0},
        TestCaseTwoArgs{lhs: 9170016, rhs: 5548316, expected: 3621700},
        TestCaseTwoArgs{lhs: 15458585, rhs: 2869989, expected: 12588596},
        TestCaseTwoArgs{lhs: 3375089, rhs: 3097056, expected: 278033},
        TestCaseTwoArgs{lhs: 14669813, rhs: 14610071, expected: 59742},
        TestCaseTwoArgs{lhs: 5870032, rhs: 12113887, expected: 0},
        TestCaseTwoArgs{lhs: 11097230, rhs: 5017555, expected: 6079675},
        TestCaseTwoArgs{lhs: 9265230, rhs: 9574303, expected: 0},
        TestCaseTwoArgs{lhs: 11431163, rhs: 5460170, expected: 5970993},
        TestCaseTwoArgs{lhs: 8490963, rhs: 15747128, expected: 0},
        TestCaseTwoArgs{lhs: 9405886, rhs: 16209277, expected: 0},
        TestCaseTwoArgs{lhs: 14678383, rhs: 7567359, expected: 7111024},
        TestCaseTwoArgs{lhs: 6642244, rhs: 13180833, expected: 0},
        TestCaseTwoArgs{lhs: 4954928, rhs: 209121, expected: 4745807},

        // Edge cases
        TestCaseTwoArgs{lhs: 16777215, rhs: 0, expected: 16777215},
        TestCaseTwoArgs{lhs: 0, rhs: 0, expected: 0},
        TestCaseTwoArgs{lhs: 16777215, rhs: 16777215, expected: 0},
        TestCaseTwoArgs{lhs: 0, rhs: 16777215, expected: 0},
    ];

    #[test]
    fn test_i24() {
        for case in test_cases.span() {
            assert_eq!(__llvm_usub_sat_x_x_x(*case.lhs, *case.rhs), *case.expected);
        }
    }
}

use crate::alu::urem::urem;
use crate::integer::u40::u40;

pub fn __llvm_urem_n_n_n(lhs: u128, rhs: u128) -> u128 {
    urem::<u40>(lhs, rhs)
}

#[cfg(test)]
mod tests {
    use super::__llvm_urem_n_n_n;
    use crate::alu::test_case::TestCaseTwoArgs;
    #[cairofmt::skip]
    pub const test_cases: [TestCaseTwoArgs; 202] = [
        // Random test cases
        TestCaseTwoArgs{lhs: 1053387930779, rhs: 1010365025606, expected: 43022905173},
        TestCaseTwoArgs{lhs: 469328950813, rhs: 655441625390, expected: 469328950813},
        TestCaseTwoArgs{lhs: 712097046414, rhs: 617766361491, expected: 94330684923},
        TestCaseTwoArgs{lhs: 158884759805, rhs: 1047516388971, expected: 158884759805},
        TestCaseTwoArgs{lhs: 585829009537, rhs: 575719732014, expected: 10109277523},
        TestCaseTwoArgs{lhs: 1033705569060, rhs: 161533232323, expected: 64506175122},
        TestCaseTwoArgs{lhs: 274832476846, rhs: 282789958235, expected: 274832476846},
        TestCaseTwoArgs{lhs: 581459357237, rhs: 112244526525, expected: 20236724612},
        TestCaseTwoArgs{lhs: 168856456739, rhs: 63093883876, expected: 42668688987},
        TestCaseTwoArgs{lhs: 769682212957, rhs: 664756266777, expected: 104925946180},
        TestCaseTwoArgs{lhs: 923729526164, rhs: 913828472651, expected: 9901053513},
        TestCaseTwoArgs{lhs: 215027068962, rhs: 887136173862, expected: 215027068962},
        TestCaseTwoArgs{lhs: 879264895512, rhs: 400845965976, expected: 77572963560},
        TestCaseTwoArgs{lhs: 334480829979, rhs: 278589492233, expected: 55891337746},
        TestCaseTwoArgs{lhs: 199723828747, rhs: 77056732372, expected: 45610364003},
        TestCaseTwoArgs{lhs: 623559769176, rhs: 751097807182, expected: 623559769176},
        TestCaseTwoArgs{lhs: 94876046201, rhs: 476903247341, expected: 94876046201},
        TestCaseTwoArgs{lhs: 501657186155, rhs: 171278151900, expected: 159100882355},
        TestCaseTwoArgs{lhs: 310887526160, rhs: 660566805363, expected: 310887526160},
        TestCaseTwoArgs{lhs: 241384172375, rhs: 637535799627, expected: 241384172375},
        TestCaseTwoArgs{lhs: 305254217592, rhs: 790637533906, expected: 305254217592},
        TestCaseTwoArgs{lhs: 348791850623, rhs: 758937961111, expected: 348791850623},
        TestCaseTwoArgs{lhs: 776562033087, rhs: 381935093664, expected: 12691845759},
        TestCaseTwoArgs{lhs: 756054057855, rhs: 729420609462, expected: 26633448393},
        TestCaseTwoArgs{lhs: 715283110750, rhs: 721957632882, expected: 715283110750},
        TestCaseTwoArgs{lhs: 456905439188, rhs: 673945358406, expected: 456905439188},
        TestCaseTwoArgs{lhs: 94511163972, rhs: 247204076045, expected: 94511163972},
        TestCaseTwoArgs{lhs: 681766938098, rhs: 846257792429, expected: 681766938098},
        TestCaseTwoArgs{lhs: 1043606986711, rhs: 999967082373, expected: 43639904338},
        TestCaseTwoArgs{lhs: 703796710102, rhs: 181485660633, expected: 159339728203},
        TestCaseTwoArgs{lhs: 814910939205, rhs: 119808787578, expected: 96058213737},
        TestCaseTwoArgs{lhs: 814773029193, rhs: 290325276656, expected: 234122475881},
        TestCaseTwoArgs{lhs: 308388854489, rhs: 830159927003, expected: 308388854489},
        TestCaseTwoArgs{lhs: 409316510235, rhs: 52517396763, expected: 41694732894},
        TestCaseTwoArgs{lhs: 606943005429, rhs: 892623982219, expected: 606943005429},
        TestCaseTwoArgs{lhs: 516578697901, rhs: 1057479300862, expected: 516578697901},
        TestCaseTwoArgs{lhs: 773213248690, rhs: 670407119104, expected: 102806129586},
        TestCaseTwoArgs{lhs: 1014963444879, rhs: 588468981586, expected: 426494463293},
        TestCaseTwoArgs{lhs: 801457650315, rhs: 631222900763, expected: 170234749552},
        TestCaseTwoArgs{lhs: 435070261202, rhs: 576748077752, expected: 435070261202},
        TestCaseTwoArgs{lhs: 360133628721, rhs: 1097472998113, expected: 360133628721},
        TestCaseTwoArgs{lhs: 694226530409, rhs: 931433655448, expected: 694226530409},
        TestCaseTwoArgs{lhs: 190865250570, rhs: 789721734865, expected: 190865250570},
        TestCaseTwoArgs{lhs: 588506866544, rhs: 409412367939, expected: 179094498605},
        TestCaseTwoArgs{lhs: 253441258338, rhs: 109940366794, expected: 33560524750},
        TestCaseTwoArgs{lhs: 751396596318, rhs: 324725665141, expected: 101945266036},
        TestCaseTwoArgs{lhs: 665795991396, rhs: 929467485239, expected: 665795991396},
        TestCaseTwoArgs{lhs: 864108644106, rhs: 1027931389093, expected: 864108644106},
        TestCaseTwoArgs{lhs: 611766281726, rhs: 313895744339, expected: 297870537387},
        TestCaseTwoArgs{lhs: 1095805539139, rhs: 106312800850, expected: 32677530639},
        TestCaseTwoArgs{lhs: 953464548206, rhs: 948583061182, expected: 4881487024},
        TestCaseTwoArgs{lhs: 793432293693, rhs: 986615672453, expected: 793432293693},
        TestCaseTwoArgs{lhs: 296500274114, rhs: 669985945048, expected: 296500274114},
        TestCaseTwoArgs{lhs: 86971915165, rhs: 750898449360, expected: 86971915165},
        TestCaseTwoArgs{lhs: 126013673747, rhs: 416637573131, expected: 126013673747},
        TestCaseTwoArgs{lhs: 633208192766, rhs: 347880513038, expected: 285327679728},
        TestCaseTwoArgs{lhs: 869818488431, rhs: 1087665199956, expected: 869818488431},
        TestCaseTwoArgs{lhs: 111260145704, rhs: 525738170528, expected: 111260145704},
        TestCaseTwoArgs{lhs: 845737496127, rhs: 825423198144, expected: 20314297983},
        TestCaseTwoArgs{lhs: 581705731775, rhs: 747563360241, expected: 581705731775},
        TestCaseTwoArgs{lhs: 27861644112, rhs: 305263446516, expected: 27861644112},
        TestCaseTwoArgs{lhs: 1028550586817, rhs: 284411680965, expected: 175315543922},
        TestCaseTwoArgs{lhs: 862122228205, rhs: 797712776268, expected: 64409451937},
        TestCaseTwoArgs{lhs: 1055803887, rhs: 47224770151, expected: 1055803887},
        TestCaseTwoArgs{lhs: 444205920980, rhs: 231792181376, expected: 212413739604},
        TestCaseTwoArgs{lhs: 283401385263, rhs: 160592958039, expected: 122808427224},
        TestCaseTwoArgs{lhs: 511551675161, rhs: 340118487648, expected: 171433187513},
        TestCaseTwoArgs{lhs: 814823456809, rhs: 453132699949, expected: 361690756860},
        TestCaseTwoArgs{lhs: 1057041594301, rhs: 797079575105, expected: 259962019196},
        TestCaseTwoArgs{lhs: 469353141851, rhs: 47965272951, expected: 37665685292},
        TestCaseTwoArgs{lhs: 115251986048, rhs: 419657720420, expected: 115251986048},
        TestCaseTwoArgs{lhs: 78594320848, rhs: 468549895884, expected: 78594320848},
        TestCaseTwoArgs{lhs: 472396074280, rhs: 429941096635, expected: 42454977645},
        TestCaseTwoArgs{lhs: 719017651843, rhs: 519295237463, expected: 199722414380},
        TestCaseTwoArgs{lhs: 629380957106, rhs: 936911903321, expected: 629380957106},
        TestCaseTwoArgs{lhs: 745433780048, rhs: 786887414297, expected: 745433780048},
        TestCaseTwoArgs{lhs: 354655207958, rhs: 833750369934, expected: 354655207958},
        TestCaseTwoArgs{lhs: 798063761996, rhs: 338783465966, expected: 120496830064},
        TestCaseTwoArgs{lhs: 62528759125, rhs: 949880616688, expected: 62528759125},
        TestCaseTwoArgs{lhs: 50280372605, rhs: 96245825343, expected: 50280372605},
        TestCaseTwoArgs{lhs: 585722987475, rhs: 996923607994, expected: 585722987475},
        TestCaseTwoArgs{lhs: 597849457771, rhs: 215809213213, expected: 166231031345},
        TestCaseTwoArgs{lhs: 1058698004825, rhs: 554843441035, expected: 503854563790},
        TestCaseTwoArgs{lhs: 218238423911, rhs: 383668980000, expected: 218238423911},
        TestCaseTwoArgs{lhs: 866367698407, rhs: 717469218237, expected: 148898480170},
        TestCaseTwoArgs{lhs: 310398822555, rhs: 950431773550, expected: 310398822555},
        TestCaseTwoArgs{lhs: 94099320626, rhs: 790275084200, expected: 94099320626},
        TestCaseTwoArgs{lhs: 971000971460, rhs: 947359268301, expected: 23641703159},
        TestCaseTwoArgs{lhs: 226844163784, rhs: 48964509188, expected: 30986127032},
        TestCaseTwoArgs{lhs: 993972842772, rhs: 211050488747, expected: 149770887784},
        TestCaseTwoArgs{lhs: 420364609210, rhs: 479640071388, expected: 420364609210},
        TestCaseTwoArgs{lhs: 512616918617, rhs: 465772255707, expected: 46844662910},
        TestCaseTwoArgs{lhs: 1058330649613, rhs: 513287875827, expected: 31754897959},
        TestCaseTwoArgs{lhs: 65653415274, rhs: 763150585793, expected: 65653415274},
        TestCaseTwoArgs{lhs: 1004935163299, rhs: 216786484621, expected: 137789224815},
        TestCaseTwoArgs{lhs: 978155688947, rhs: 33102830586, expected: 18173601953},
        TestCaseTwoArgs{lhs: 659789041918, rhs: 1028562583978, expected: 659789041918},
        TestCaseTwoArgs{lhs: 460408096277, rhs: 653798308748, expected: 460408096277},
        TestCaseTwoArgs{lhs: 658121769320, rhs: 864873389767, expected: 658121769320},
        TestCaseTwoArgs{lhs: 1005738600620, rhs: 169366274146, expected: 158907229890},
        TestCaseTwoArgs{lhs: 220793964526, rhs: 205796304719, expected: 14997659807},
        TestCaseTwoArgs{lhs: 755275991951, rhs: 322115121291, expected: 111045749369},
        TestCaseTwoArgs{lhs: 1018590771255, rhs: 269039181186, expected: 211473227697},
        TestCaseTwoArgs{lhs: 241596676307, rhs: 607074390820, expected: 241596676307},
        TestCaseTwoArgs{lhs: 825397716762, rhs: 62163073268, expected: 17277764278},
        TestCaseTwoArgs{lhs: 650822730034, rhs: 760330825975, expected: 650822730034},
        TestCaseTwoArgs{lhs: 436255111329, rhs: 122252187892, expected: 69498547653},
        TestCaseTwoArgs{lhs: 190801182213, rhs: 1003392630705, expected: 190801182213},
        TestCaseTwoArgs{lhs: 1060975908036, rhs: 689922343387, expected: 371053564649},
        TestCaseTwoArgs{lhs: 780818364512, rhs: 1021731813750, expected: 780818364512},
        TestCaseTwoArgs{lhs: 240175563631, rhs: 557244436630, expected: 240175563631},
        TestCaseTwoArgs{lhs: 861969809190, rhs: 348702177631, expected: 164565453928},
        TestCaseTwoArgs{lhs: 316956993355, rhs: 748238125146, expected: 316956993355},
        TestCaseTwoArgs{lhs: 894393885567, rhs: 747861164090, expected: 146532721477},
        TestCaseTwoArgs{lhs: 87646625770, rhs: 705446729812, expected: 87646625770},
        TestCaseTwoArgs{lhs: 697931074076, rhs: 361931556756, expected: 335999517320},
        TestCaseTwoArgs{lhs: 320309406758, rhs: 388032159868, expected: 320309406758},
        TestCaseTwoArgs{lhs: 838898137447, rhs: 42352938998, expected: 34192296485},
        TestCaseTwoArgs{lhs: 308503332881, rhs: 960672034914, expected: 308503332881},
        TestCaseTwoArgs{lhs: 296862141059, rhs: 154771141676, expected: 142090999383},
        TestCaseTwoArgs{lhs: 395763088766, rhs: 395991353170, expected: 395763088766},
        TestCaseTwoArgs{lhs: 1093173223268, rhs: 382981546564, expected: 327210130140},
        TestCaseTwoArgs{lhs: 630810306921, rhs: 799107794579, expected: 630810306921},
        TestCaseTwoArgs{lhs: 1095537944856, rhs: 618219733248, expected: 477318211608},
        TestCaseTwoArgs{lhs: 246553461159, rhs: 176599311821, expected: 69954149338},
        TestCaseTwoArgs{lhs: 520461094979, rhs: 876010775842, expected: 520461094979},
        TestCaseTwoArgs{lhs: 1045729519226, rhs: 1082000710756, expected: 1045729519226},
        TestCaseTwoArgs{lhs: 672223807222, rhs: 292794731174, expected: 86634344874},
        TestCaseTwoArgs{lhs: 8505484833, rhs: 313506842715, expected: 8505484833},
        TestCaseTwoArgs{lhs: 489776164389, rhs: 470031758381, expected: 19744406008},
        TestCaseTwoArgs{lhs: 32334031443, rhs: 550335699098, expected: 32334031443},
        TestCaseTwoArgs{lhs: 249095409671, rhs: 823442508281, expected: 249095409671},
        TestCaseTwoArgs{lhs: 1036487816357, rhs: 489837413, expected: 481687862},
        TestCaseTwoArgs{lhs: 61020689415, rhs: 640304415837, expected: 61020689415},
        TestCaseTwoArgs{lhs: 51070537238, rhs: 274602020749, expected: 51070537238},
        TestCaseTwoArgs{lhs: 328759301520, rhs: 368490746236, expected: 328759301520},
        TestCaseTwoArgs{lhs: 253147606847, rhs: 894881610386, expected: 253147606847},
        TestCaseTwoArgs{lhs: 3541171745, rhs: 604436403527, expected: 3541171745},
        TestCaseTwoArgs{lhs: 354032278475, rhs: 176490120229, expected: 1052038017},
        TestCaseTwoArgs{lhs: 335119086648, rhs: 652675250623, expected: 335119086648},
        TestCaseTwoArgs{lhs: 493870807143, rhs: 245986687077, expected: 1897432989},
        TestCaseTwoArgs{lhs: 933241251270, rhs: 733305284183, expected: 199935967087},
        TestCaseTwoArgs{lhs: 1091908854723, rhs: 462032943123, expected: 167842968477},
        TestCaseTwoArgs{lhs: 737643696109, rhs: 450656378413, expected: 286987317696},
        TestCaseTwoArgs{lhs: 987203949549, rhs: 378434942297, expected: 230334064955},
        TestCaseTwoArgs{lhs: 395098270967, rhs: 976373768981, expected: 395098270967},
        TestCaseTwoArgs{lhs: 794947027286, rhs: 1000520140656, expected: 794947027286},
        TestCaseTwoArgs{lhs: 1038134607264, rhs: 706635594789, expected: 331499012475},
        TestCaseTwoArgs{lhs: 3191428602, rhs: 692075985446, expected: 3191428602},
        TestCaseTwoArgs{lhs: 949315739212, rhs: 648576156838, expected: 300739582374},
        TestCaseTwoArgs{lhs: 762693024857, rhs: 561611899474, expected: 201081125383},
        TestCaseTwoArgs{lhs: 17388001244, rhs: 71069943552, expected: 17388001244},
        TestCaseTwoArgs{lhs: 177273588351, rhs: 826350665673, expected: 177273588351},
        TestCaseTwoArgs{lhs: 459580843829, rhs: 1050088893067, expected: 459580843829},
        TestCaseTwoArgs{lhs: 389566792501, rhs: 490390743117, expected: 389566792501},
        TestCaseTwoArgs{lhs: 1073860781983, rhs: 989848110533, expected: 84012671450},
        TestCaseTwoArgs{lhs: 798882921047, rhs: 650104997799, expected: 148777923248},
        TestCaseTwoArgs{lhs: 933118593494, rhs: 71230176791, expected: 7126295211},
        TestCaseTwoArgs{lhs: 221759541225, rhs: 476999278095, expected: 221759541225},
        TestCaseTwoArgs{lhs: 869474047073, rhs: 357109076511, expected: 155255894051},
        TestCaseTwoArgs{lhs: 281232465271, rhs: 288491764297, expected: 281232465271},
        TestCaseTwoArgs{lhs: 213529057181, rhs: 723440815396, expected: 213529057181},
        TestCaseTwoArgs{lhs: 1081115631158, rhs: 487443116528, expected: 106229398102},
        TestCaseTwoArgs{lhs: 410628574038, rhs: 345357562225, expected: 65271011813},
        TestCaseTwoArgs{lhs: 9332234023, rhs: 70936208701, expected: 9332234023},
        TestCaseTwoArgs{lhs: 1077558138336, rhs: 764112950906, expected: 313445187430},
        TestCaseTwoArgs{lhs: 821886580640, rhs: 184375943572, expected: 84382806352},
        TestCaseTwoArgs{lhs: 787812264858, rhs: 406248319371, expected: 381563945487},
        TestCaseTwoArgs{lhs: 563059230484, rhs: 177212764030, expected: 31420938394},
        TestCaseTwoArgs{lhs: 15953904580, rhs: 957632639105, expected: 15953904580},
        TestCaseTwoArgs{lhs: 453570986089, rhs: 490923410027, expected: 453570986089},
        TestCaseTwoArgs{lhs: 815731973400, rhs: 332063277839, expected: 151605417722},
        TestCaseTwoArgs{lhs: 18858181505, rhs: 348165773125, expected: 18858181505},
        TestCaseTwoArgs{lhs: 1093731500560, rhs: 449332422500, expected: 195066655560},
        TestCaseTwoArgs{lhs: 828816772332, rhs: 495931492721, expected: 332885279611},
        TestCaseTwoArgs{lhs: 8218163557, rhs: 558145080063, expected: 8218163557},
        TestCaseTwoArgs{lhs: 877971847200, rhs: 139505355576, expected: 40939713744},
        TestCaseTwoArgs{lhs: 1082976778440, rhs: 1010689188759, expected: 72287589681},
        TestCaseTwoArgs{lhs: 685791921559, rhs: 267489652627, expected: 150812616305},
        TestCaseTwoArgs{lhs: 1024180547339, rhs: 118053735633, expected: 79750662275},
        TestCaseTwoArgs{lhs: 874131992474, rhs: 680666840296, expected: 193465152178},
        TestCaseTwoArgs{lhs: 954284882972, rhs: 1024532876269, expected: 954284882972},
        TestCaseTwoArgs{lhs: 4519637365, rhs: 1094911677224, expected: 4519637365},
        TestCaseTwoArgs{lhs: 100139497280, rhs: 88058928360, expected: 12080568920},
        TestCaseTwoArgs{lhs: 718684838762, rhs: 296209734105, expected: 126265370552},
        TestCaseTwoArgs{lhs: 403457167444, rhs: 634556709463, expected: 403457167444},
        TestCaseTwoArgs{lhs: 400710110458, rhs: 182337056732, expected: 36035996994},
        TestCaseTwoArgs{lhs: 572377238643, rhs: 169824490829, expected: 62903766156},
        TestCaseTwoArgs{lhs: 356338973826, rhs: 19407037128, expected: 7012305522},
        TestCaseTwoArgs{lhs: 261679658851, rhs: 903683032670, expected: 261679658851},
        TestCaseTwoArgs{lhs: 489827572881, rhs: 567024313281, expected: 489827572881},
        TestCaseTwoArgs{lhs: 56105333311, rhs: 1040669154974, expected: 56105333311},
        TestCaseTwoArgs{lhs: 944736086522, rhs: 245389821556, expected: 208566621854},
        TestCaseTwoArgs{lhs: 1043541518761, rhs: 106299287218, expected: 86847933799},
        TestCaseTwoArgs{lhs: 674436641930, rhs: 606294947136, expected: 68141694794},
        TestCaseTwoArgs{lhs: 749837792128, rhs: 486188042820, expected: 263649749308},
        TestCaseTwoArgs{lhs: 307051340434, rhs: 957057240533, expected: 307051340434},
        TestCaseTwoArgs{lhs: 523836648209, rhs: 895214447567, expected: 523836648209},
        TestCaseTwoArgs{lhs: 459422555447, rhs: 235269592500, expected: 224152962947},
        TestCaseTwoArgs{lhs: 702993805028, rhs: 985806023222, expected: 702993805028},

        // Edge cases
        TestCaseTwoArgs{lhs: 0, rhs: 1099511627775, expected: 0},
        TestCaseTwoArgs{lhs: 1099511627775, rhs: 1099511627775, expected: 0},
    ];

    #[test]
    fn test_i40() {
        for case in test_cases.span() {
            assert_eq!(__llvm_urem_n_n_n(*case.lhs, *case.rhs), *case.expected);
        }
    }
}

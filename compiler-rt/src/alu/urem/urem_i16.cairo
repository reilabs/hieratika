use crate::rtstate::RTState;
use crate::alu::urem::urem;

pub fn __llvm_urem_z_z_z(ref state: RTState, lhs: u128, rhs: u128) -> u128 {
    urem::<u16>(lhs, rhs)
}

#[cfg(test)]
mod tests {
    use crate::rtstate::RTStateOps;
    use super::__llvm_urem_z_z_z;
    use crate::alu::test_case::TestCaseTwoArgs;
    #[cairofmt::skip]
    pub const test_cases: [TestCaseTwoArgs; 242] = [
        // Random test cases
        TestCaseTwoArgs{lhs: 30088, rhs: 26870, expected: 3218},
        TestCaseTwoArgs{lhs: 49803, rhs: 3741, expected: 1170},
        TestCaseTwoArgs{lhs: 19428, rhs: 16045, expected: 3383},
        TestCaseTwoArgs{lhs: 21525, rhs: 48788, expected: 21525},
        TestCaseTwoArgs{lhs: 53530, rhs: 25095, expected: 3340},
        TestCaseTwoArgs{lhs: 59676, rhs: 39837, expected: 19839},
        TestCaseTwoArgs{lhs: 22416, rhs: 602, expected: 142},
        TestCaseTwoArgs{lhs: 20469, rhs: 62873, expected: 20469},
        TestCaseTwoArgs{lhs: 55442, rhs: 57897, expected: 55442},
        TestCaseTwoArgs{lhs: 5549, rhs: 52313, expected: 5549},
        TestCaseTwoArgs{lhs: 10904, rhs: 30583, expected: 10904},
        TestCaseTwoArgs{lhs: 41897, rhs: 6112, expected: 5225},
        TestCaseTwoArgs{lhs: 16597, rhs: 1453, expected: 614},
        TestCaseTwoArgs{lhs: 32210, rhs: 3119, expected: 1020},
        TestCaseTwoArgs{lhs: 29580, rhs: 55356, expected: 29580},
        TestCaseTwoArgs{lhs: 60724, rhs: 34137, expected: 26587},
        TestCaseTwoArgs{lhs: 38171, rhs: 42711, expected: 38171},
        TestCaseTwoArgs{lhs: 41626, rhs: 1237, expected: 805},
        TestCaseTwoArgs{lhs: 33275, rhs: 13662, expected: 5951},
        TestCaseTwoArgs{lhs: 64131, rhs: 40360, expected: 23771},
        TestCaseTwoArgs{lhs: 3566, rhs: 60508, expected: 3566},
        TestCaseTwoArgs{lhs: 63078, rhs: 63682, expected: 63078},
        TestCaseTwoArgs{lhs: 11123, rhs: 44355, expected: 11123},
        TestCaseTwoArgs{lhs: 46939, rhs: 31746, expected: 15193},
        TestCaseTwoArgs{lhs: 25483, rhs: 40610, expected: 25483},
        TestCaseTwoArgs{lhs: 53421, rhs: 23005, expected: 7411},
        TestCaseTwoArgs{lhs: 36147, rhs: 34192, expected: 1955},
        TestCaseTwoArgs{lhs: 16650, rhs: 3753, expected: 1638},
        TestCaseTwoArgs{lhs: 57065, rhs: 2471, expected: 232},
        TestCaseTwoArgs{lhs: 14459, rhs: 32414, expected: 14459},
        TestCaseTwoArgs{lhs: 43901, rhs: 37441, expected: 6460},
        TestCaseTwoArgs{lhs: 28436, rhs: 45511, expected: 28436},
        TestCaseTwoArgs{lhs: 52772, rhs: 58493, expected: 52772},
        TestCaseTwoArgs{lhs: 56729, rhs: 25922, expected: 4885},
        TestCaseTwoArgs{lhs: 207, rhs: 48223, expected: 207},
        TestCaseTwoArgs{lhs: 35305, rhs: 36530, expected: 35305},
        TestCaseTwoArgs{lhs: 49320, rhs: 58836, expected: 49320},
        TestCaseTwoArgs{lhs: 40209, rhs: 28402, expected: 11807},
        TestCaseTwoArgs{lhs: 28382, rhs: 57343, expected: 28382},
        TestCaseTwoArgs{lhs: 6352, rhs: 25843, expected: 6352},
        TestCaseTwoArgs{lhs: 64492, rhs: 34029, expected: 30463},
        TestCaseTwoArgs{lhs: 43471, rhs: 63012, expected: 43471},
        TestCaseTwoArgs{lhs: 5012, rhs: 20681, expected: 5012},
        TestCaseTwoArgs{lhs: 63031, rhs: 32575, expected: 30456},
        TestCaseTwoArgs{lhs: 31318, rhs: 44610, expected: 31318},
        TestCaseTwoArgs{lhs: 51722, rhs: 56306, expected: 51722},
        TestCaseTwoArgs{lhs: 45701, rhs: 16528, expected: 12645},
        TestCaseTwoArgs{lhs: 39542, rhs: 11465, expected: 5147},
        TestCaseTwoArgs{lhs: 62445, rhs: 23274, expected: 15897},
        TestCaseTwoArgs{lhs: 44073, rhs: 30644, expected: 13429},
        TestCaseTwoArgs{lhs: 48752, rhs: 64235, expected: 48752},
        TestCaseTwoArgs{lhs: 37995, rhs: 44293, expected: 37995},
        TestCaseTwoArgs{lhs: 36857, rhs: 18153, expected: 551},
        TestCaseTwoArgs{lhs: 56855, rhs: 15097, expected: 11564},
        TestCaseTwoArgs{lhs: 42639, rhs: 37974, expected: 4665},
        TestCaseTwoArgs{lhs: 61465, rhs: 36908, expected: 24557},
        TestCaseTwoArgs{lhs: 10207, rhs: 9575, expected: 632},
        TestCaseTwoArgs{lhs: 54008, rhs: 61482, expected: 54008},
        TestCaseTwoArgs{lhs: 44871, rhs: 64992, expected: 44871},
        TestCaseTwoArgs{lhs: 17293, rhs: 7441, expected: 2411},
        TestCaseTwoArgs{lhs: 64817, rhs: 59437, expected: 5380},
        TestCaseTwoArgs{lhs: 17222, rhs: 2086, expected: 534},
        TestCaseTwoArgs{lhs: 62358, rhs: 48894, expected: 13464},
        TestCaseTwoArgs{lhs: 36586, rhs: 62838, expected: 36586},
        TestCaseTwoArgs{lhs: 47344, rhs: 31537, expected: 15807},
        TestCaseTwoArgs{lhs: 56211, rhs: 12601, expected: 5807},
        TestCaseTwoArgs{lhs: 11935, rhs: 45408, expected: 11935},
        TestCaseTwoArgs{lhs: 15356, rhs: 41149, expected: 15356},
        TestCaseTwoArgs{lhs: 50633, rhs: 19045, expected: 12543},
        TestCaseTwoArgs{lhs: 45521, rhs: 45389, expected: 132},
        TestCaseTwoArgs{lhs: 51788, rhs: 42353, expected: 9435},
        TestCaseTwoArgs{lhs: 7645, rhs: 13908, expected: 7645},
        TestCaseTwoArgs{lhs: 48153, rhs: 29665, expected: 18488},
        TestCaseTwoArgs{lhs: 6314, rhs: 10075, expected: 6314},
        TestCaseTwoArgs{lhs: 47148, rhs: 30516, expected: 16632},
        TestCaseTwoArgs{lhs: 2349, rhs: 17306, expected: 2349},
        TestCaseTwoArgs{lhs: 4148, rhs: 50569, expected: 4148},
        TestCaseTwoArgs{lhs: 38254, rhs: 50168, expected: 38254},
        TestCaseTwoArgs{lhs: 11139, rhs: 25953, expected: 11139},
        TestCaseTwoArgs{lhs: 11744, rhs: 59607, expected: 11744},
        TestCaseTwoArgs{lhs: 3416, rhs: 45845, expected: 3416},
        TestCaseTwoArgs{lhs: 52925, rhs: 31658, expected: 21267},
        TestCaseTwoArgs{lhs: 26223, rhs: 29862, expected: 26223},
        TestCaseTwoArgs{lhs: 46897, rhs: 21181, expected: 4535},
        TestCaseTwoArgs{lhs: 33085, rhs: 9825, expected: 3610},
        TestCaseTwoArgs{lhs: 34647, rhs: 19273, expected: 15374},
        TestCaseTwoArgs{lhs: 49048, rhs: 64737, expected: 49048},
        TestCaseTwoArgs{lhs: 38558, rhs: 12561, expected: 875},
        TestCaseTwoArgs{lhs: 41738, rhs: 25904, expected: 15834},
        TestCaseTwoArgs{lhs: 45294, rhs: 1030, expected: 1004},
        TestCaseTwoArgs{lhs: 22486, rhs: 16028, expected: 6458},
        TestCaseTwoArgs{lhs: 46466, rhs: 15758, expected: 14950},
        TestCaseTwoArgs{lhs: 44247, rhs: 32927, expected: 11320},
        TestCaseTwoArgs{lhs: 701, rhs: 33258, expected: 701},
        TestCaseTwoArgs{lhs: 21510, rhs: 13167, expected: 8343},
        TestCaseTwoArgs{lhs: 7768, rhs: 49408, expected: 7768},
        TestCaseTwoArgs{lhs: 35189, rhs: 51943, expected: 35189},
        TestCaseTwoArgs{lhs: 52025, rhs: 20053, expected: 11919},
        TestCaseTwoArgs{lhs: 25090, rhs: 34327, expected: 25090},
        TestCaseTwoArgs{lhs: 21299, rhs: 14791, expected: 6508},
        TestCaseTwoArgs{lhs: 7893, rhs: 64435, expected: 7893},
        TestCaseTwoArgs{lhs: 61212, rhs: 51564, expected: 9648},
        TestCaseTwoArgs{lhs: 43363, rhs: 50320, expected: 43363},
        TestCaseTwoArgs{lhs: 24085, rhs: 29703, expected: 24085},
        TestCaseTwoArgs{lhs: 61944, rhs: 54598, expected: 7346},
        TestCaseTwoArgs{lhs: 33503, rhs: 34641, expected: 33503},
        TestCaseTwoArgs{lhs: 57893, rhs: 38046, expected: 19847},
        TestCaseTwoArgs{lhs: 63204, rhs: 57878, expected: 5326},
        TestCaseTwoArgs{lhs: 13922, rhs: 1794, expected: 1364},
        TestCaseTwoArgs{lhs: 29771, rhs: 60396, expected: 29771},
        TestCaseTwoArgs{lhs: 9834, rhs: 31451, expected: 9834},
        TestCaseTwoArgs{lhs: 43814, rhs: 63993, expected: 43814},
        TestCaseTwoArgs{lhs: 6511, rhs: 14026, expected: 6511},
        TestCaseTwoArgs{lhs: 53543, rhs: 43888, expected: 9655},
        TestCaseTwoArgs{lhs: 34638, rhs: 60108, expected: 34638},
        TestCaseTwoArgs{lhs: 4234, rhs: 55802, expected: 4234},
        TestCaseTwoArgs{lhs: 56323, rhs: 17973, expected: 2404},
        TestCaseTwoArgs{lhs: 30266, rhs: 38979, expected: 30266},
        TestCaseTwoArgs{lhs: 53458, rhs: 24530, expected: 4398},
        TestCaseTwoArgs{lhs: 11144, rhs: 14386, expected: 11144},
        TestCaseTwoArgs{lhs: 57224, rhs: 36432, expected: 20792},
        TestCaseTwoArgs{lhs: 26026, rhs: 55995, expected: 26026},
        TestCaseTwoArgs{lhs: 40450, rhs: 39646, expected: 804},
        TestCaseTwoArgs{lhs: 54788, rhs: 47238, expected: 7550},
        TestCaseTwoArgs{lhs: 2774, rhs: 30949, expected: 2774},
        TestCaseTwoArgs{lhs: 55631, rhs: 19781, expected: 16069},
        TestCaseTwoArgs{lhs: 52096, rhs: 4650, expected: 946},
        TestCaseTwoArgs{lhs: 25777, rhs: 1403, expected: 523},
        TestCaseTwoArgs{lhs: 2370, rhs: 48264, expected: 2370},
        TestCaseTwoArgs{lhs: 12680, rhs: 46926, expected: 12680},
        TestCaseTwoArgs{lhs: 30672, rhs: 15294, expected: 84},
        TestCaseTwoArgs{lhs: 30685, rhs: 9767, expected: 1384},
        TestCaseTwoArgs{lhs: 37128, rhs: 56578, expected: 37128},
        TestCaseTwoArgs{lhs: 19634, rhs: 49501, expected: 19634},
        TestCaseTwoArgs{lhs: 18532, rhs: 41598, expected: 18532},
        TestCaseTwoArgs{lhs: 39734, rhs: 50905, expected: 39734},
        TestCaseTwoArgs{lhs: 47178, rhs: 57435, expected: 47178},
        TestCaseTwoArgs{lhs: 11805, rhs: 11464, expected: 341},
        TestCaseTwoArgs{lhs: 53118, rhs: 751, expected: 548},
        TestCaseTwoArgs{lhs: 55863, rhs: 2214, expected: 513},
        TestCaseTwoArgs{lhs: 925, rhs: 50456, expected: 925},
        TestCaseTwoArgs{lhs: 60707, rhs: 28373, expected: 3961},
        TestCaseTwoArgs{lhs: 1019, rhs: 380, expected: 259},
        TestCaseTwoArgs{lhs: 8796, rhs: 4826, expected: 3970},
        TestCaseTwoArgs{lhs: 48102, rhs: 64838, expected: 48102},
        TestCaseTwoArgs{lhs: 40848, rhs: 25188, expected: 15660},
        TestCaseTwoArgs{lhs: 54507, rhs: 34332, expected: 20175},
        TestCaseTwoArgs{lhs: 35927, rhs: 57574, expected: 35927},
        TestCaseTwoArgs{lhs: 38416, rhs: 17845, expected: 2726},
        TestCaseTwoArgs{lhs: 14734, rhs: 23851, expected: 14734},
        TestCaseTwoArgs{lhs: 15565, rhs: 34666, expected: 15565},
        TestCaseTwoArgs{lhs: 26348, rhs: 40277, expected: 26348},
        TestCaseTwoArgs{lhs: 39288, rhs: 3444, expected: 1404},
        TestCaseTwoArgs{lhs: 44782, rhs: 58031, expected: 44782},
        TestCaseTwoArgs{lhs: 61149, rhs: 30341, expected: 467},
        TestCaseTwoArgs{lhs: 34005, rhs: 15791, expected: 2423},
        TestCaseTwoArgs{lhs: 49478, rhs: 29029, expected: 20449},
        TestCaseTwoArgs{lhs: 31939, rhs: 7785, expected: 799},
        TestCaseTwoArgs{lhs: 32809, rhs: 15058, expected: 2693},
        TestCaseTwoArgs{lhs: 31732, rhs: 55738, expected: 31732},
        TestCaseTwoArgs{lhs: 60979, rhs: 60549, expected: 430},
        TestCaseTwoArgs{lhs: 4386, rhs: 27593, expected: 4386},
        TestCaseTwoArgs{lhs: 32067, rhs: 19833, expected: 12234},
        TestCaseTwoArgs{lhs: 22238, rhs: 63047, expected: 22238},
        TestCaseTwoArgs{lhs: 13709, rhs: 42046, expected: 13709},
        TestCaseTwoArgs{lhs: 42259, rhs: 64106, expected: 42259},
        TestCaseTwoArgs{lhs: 16281, rhs: 56922, expected: 16281},
        TestCaseTwoArgs{lhs: 37438, rhs: 30908, expected: 6530},
        TestCaseTwoArgs{lhs: 54164, rhs: 58284, expected: 54164},
        TestCaseTwoArgs{lhs: 45456, rhs: 65102, expected: 45456},
        TestCaseTwoArgs{lhs: 53916, rhs: 17147, expected: 2475},
        TestCaseTwoArgs{lhs: 58389, rhs: 31375, expected: 27014},
        TestCaseTwoArgs{lhs: 3575, rhs: 5989, expected: 3575},
        TestCaseTwoArgs{lhs: 47092, rhs: 61216, expected: 47092},
        TestCaseTwoArgs{lhs: 31112, rhs: 34932, expected: 31112},
        TestCaseTwoArgs{lhs: 43544, rhs: 31331, expected: 12213},
        TestCaseTwoArgs{lhs: 22335, rhs: 889, expected: 110},
        TestCaseTwoArgs{lhs: 3094, rhs: 9982, expected: 3094},
        TestCaseTwoArgs{lhs: 39394, rhs: 22332, expected: 17062},
        TestCaseTwoArgs{lhs: 58882, rhs: 37073, expected: 21809},
        TestCaseTwoArgs{lhs: 10497, rhs: 50435, expected: 10497},
        TestCaseTwoArgs{lhs: 40529, rhs: 7242, expected: 4319},
        TestCaseTwoArgs{lhs: 31416, rhs: 30186, expected: 1230},
        TestCaseTwoArgs{lhs: 21594, rhs: 2144, expected: 154},
        TestCaseTwoArgs{lhs: 51644, rhs: 48998, expected: 2646},
        TestCaseTwoArgs{lhs: 37641, rhs: 58902, expected: 37641},
        TestCaseTwoArgs{lhs: 47853, rhs: 1012, expected: 289},
        TestCaseTwoArgs{lhs: 22280, rhs: 13828, expected: 8452},
        TestCaseTwoArgs{lhs: 17676, rhs: 46698, expected: 17676},
        TestCaseTwoArgs{lhs: 17787, rhs: 30422, expected: 17787},
        TestCaseTwoArgs{lhs: 3060, rhs: 61757, expected: 3060},
        TestCaseTwoArgs{lhs: 64320, rhs: 18680, expected: 8280},
        TestCaseTwoArgs{lhs: 40734, rhs: 48806, expected: 40734},
        TestCaseTwoArgs{lhs: 45214, rhs: 14048, expected: 3070},
        TestCaseTwoArgs{lhs: 14063, rhs: 55768, expected: 14063},
        TestCaseTwoArgs{lhs: 7417, rhs: 36349, expected: 7417},
        TestCaseTwoArgs{lhs: 10668, rhs: 11943, expected: 10668},
        TestCaseTwoArgs{lhs: 47389, rhs: 56005, expected: 47389},
        TestCaseTwoArgs{lhs: 13302, rhs: 29771, expected: 13302},
        TestCaseTwoArgs{lhs: 35523, rhs: 321, expected: 213},
        TestCaseTwoArgs{lhs: 11207, rhs: 16414, expected: 11207},
        TestCaseTwoArgs{lhs: 60388, rhs: 49340, expected: 11048},
        TestCaseTwoArgs{lhs: 5726, rhs: 45877, expected: 5726},
        TestCaseTwoArgs{lhs: 7339, rhs: 49381, expected: 7339},
        TestCaseTwoArgs{lhs: 54403, rhs: 57356, expected: 54403},
        TestCaseTwoArgs{lhs: 45019, rhs: 40207, expected: 4812},
        TestCaseTwoArgs{lhs: 13699, rhs: 19364, expected: 13699},
        TestCaseTwoArgs{lhs: 4603, rhs: 55782, expected: 4603},
        TestCaseTwoArgs{lhs: 30354, rhs: 52097, expected: 30354},
        TestCaseTwoArgs{lhs: 43186, rhs: 58187, expected: 43186},
        TestCaseTwoArgs{lhs: 27072, rhs: 24836, expected: 2236},
        TestCaseTwoArgs{lhs: 62785, rhs: 41641, expected: 21144},
        TestCaseTwoArgs{lhs: 46083, rhs: 46963, expected: 46083},
        TestCaseTwoArgs{lhs: 60841, rhs: 21004, expected: 18833},
        TestCaseTwoArgs{lhs: 37422, rhs: 20804, expected: 16618},
        TestCaseTwoArgs{lhs: 9294, rhs: 59272, expected: 9294},
        TestCaseTwoArgs{lhs: 27693, rhs: 40989, expected: 27693},
        TestCaseTwoArgs{lhs: 43029, rhs: 64548, expected: 43029},
        TestCaseTwoArgs{lhs: 47506, rhs: 11155, expected: 2886},
        TestCaseTwoArgs{lhs: 15274, rhs: 2881, expected: 869},
        TestCaseTwoArgs{lhs: 16406, rhs: 46483, expected: 16406},
        TestCaseTwoArgs{lhs: 36450, rhs: 10110, expected: 6120},
        TestCaseTwoArgs{lhs: 62944, rhs: 63467, expected: 62944},
        TestCaseTwoArgs{lhs: 9883, rhs: 58550, expected: 9883},
        TestCaseTwoArgs{lhs: 50420, rhs: 51313, expected: 50420},
        TestCaseTwoArgs{lhs: 41711, rhs: 30847, expected: 10864},
        TestCaseTwoArgs{lhs: 50864, rhs: 17529, expected: 15806},
        TestCaseTwoArgs{lhs: 21864, rhs: 23483, expected: 21864},
        TestCaseTwoArgs{lhs: 18441, rhs: 56223, expected: 18441},
        TestCaseTwoArgs{lhs: 59878, rhs: 41499, expected: 18379},
        TestCaseTwoArgs{lhs: 40120, rhs: 31199, expected: 8921},
        TestCaseTwoArgs{lhs: 16432, rhs: 26961, expected: 16432},
        TestCaseTwoArgs{lhs: 31649, rhs: 9153, expected: 4190},
        TestCaseTwoArgs{lhs: 29921, rhs: 23004, expected: 6917},
        TestCaseTwoArgs{lhs: 25732, rhs: 13580, expected: 12152},
        TestCaseTwoArgs{lhs: 13600, rhs: 53480, expected: 13600},
        TestCaseTwoArgs{lhs: 57873, rhs: 59647, expected: 57873},
        TestCaseTwoArgs{lhs: 26128, rhs: 58813, expected: 26128},
        TestCaseTwoArgs{lhs: 6974, rhs: 55568, expected: 6974},
        TestCaseTwoArgs{lhs: 39979, rhs: 62299, expected: 39979},

        // Edge cases
        TestCaseTwoArgs{lhs: 0, rhs: 65535, expected: 0},
        TestCaseTwoArgs{lhs: 65535, rhs: 65535, expected: 0},
    ];

    #[test]
    fn test_i16() {
        for case in test_cases.span() {
            let mut state = RTStateOps::new();
            assert_eq!(__llvm_urem_z_z_z(ref state, *case.lhs, *case.rhs), *case.expected);
        }
    }

    #[test]
    #[should_panic(expected: ('Division by 0',))]
    fn test_div_by_zero() {
        let mut state = RTStateOps::new();
        __llvm_urem_z_z_z(ref state, 1, 0);
    }
}

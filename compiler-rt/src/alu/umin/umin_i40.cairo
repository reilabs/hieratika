use crate::rtstate::RTState;
use crate::alu::umin::umin;
use crate::integer::u40::u40;

pub fn __llvm_umin_n_n_n(ref state: RTState, lhs: u128, rhs: u128) -> u128 {
    umin::<u40>(lhs, rhs)
}

#[cfg(test)]
mod tests {
    use crate::rtstate::RTStateOps;
    use super::__llvm_umin_n_n_n;
    use crate::alu::test_case::TestCaseTwoArgs;
    #[cairofmt::skip]
    pub const test_cases: [TestCaseTwoArgs; 204] = [
        // Random test cases
        TestCaseTwoArgs{lhs: 365332772544, rhs: 302831099261, expected: 302831099261},
        TestCaseTwoArgs{lhs: 375279930302, rhs: 1023977949985, expected: 375279930302},
        TestCaseTwoArgs{lhs: 969381272207, rhs: 88653737264, expected: 88653737264},
        TestCaseTwoArgs{lhs: 80494771178, rhs: 574791640361, expected: 80494771178},
        TestCaseTwoArgs{lhs: 206774264155, rhs: 620652576514, expected: 206774264155},
        TestCaseTwoArgs{lhs: 1072783274472, rhs: 123968380602, expected: 123968380602},
        TestCaseTwoArgs{lhs: 58734644597, rhs: 1048158282431, expected: 58734644597},
        TestCaseTwoArgs{lhs: 693726741335, rhs: 107561829055, expected: 107561829055},
        TestCaseTwoArgs{lhs: 270599333105, rhs: 190047696802, expected: 190047696802},
        TestCaseTwoArgs{lhs: 605006956587, rhs: 107870613700, expected: 107870613700},
        TestCaseTwoArgs{lhs: 858772351111, rhs: 523847051924, expected: 523847051924},
        TestCaseTwoArgs{lhs: 284117929502, rhs: 404847887311, expected: 284117929502},
        TestCaseTwoArgs{lhs: 20550647222, rhs: 415612603367, expected: 20550647222},
        TestCaseTwoArgs{lhs: 948024644127, rhs: 76422774586, expected: 76422774586},
        TestCaseTwoArgs{lhs: 133523023312, rhs: 220398739797, expected: 133523023312},
        TestCaseTwoArgs{lhs: 815283718667, rhs: 381545749941, expected: 381545749941},
        TestCaseTwoArgs{lhs: 62177962144, rhs: 514411512977, expected: 62177962144},
        TestCaseTwoArgs{lhs: 392118858720, rhs: 722053396802, expected: 392118858720},
        TestCaseTwoArgs{lhs: 89185753995, rhs: 265322682675, expected: 89185753995},
        TestCaseTwoArgs{lhs: 145690684876, rhs: 40698198751, expected: 40698198751},
        TestCaseTwoArgs{lhs: 533391877953, rhs: 486107592869, expected: 486107592869},
        TestCaseTwoArgs{lhs: 459724077384, rhs: 265567901501, expected: 265567901501},
        TestCaseTwoArgs{lhs: 578580921661, rhs: 803171785243, expected: 578580921661},
        TestCaseTwoArgs{lhs: 455313365794, rhs: 24056875002, expected: 24056875002},
        TestCaseTwoArgs{lhs: 871374867504, rhs: 997864049208, expected: 871374867504},
        TestCaseTwoArgs{lhs: 185716374801, rhs: 1064017443438, expected: 185716374801},
        TestCaseTwoArgs{lhs: 1086842461425, rhs: 499841446683, expected: 499841446683},
        TestCaseTwoArgs{lhs: 726612791736, rhs: 799353977096, expected: 726612791736},
        TestCaseTwoArgs{lhs: 910610652497, rhs: 806145540857, expected: 806145540857},
        TestCaseTwoArgs{lhs: 292534299256, rhs: 473661402253, expected: 292534299256},
        TestCaseTwoArgs{lhs: 589352157395, rhs: 845939915652, expected: 589352157395},
        TestCaseTwoArgs{lhs: 333655507215, rhs: 829707137892, expected: 333655507215},
        TestCaseTwoArgs{lhs: 37889919337, rhs: 63858767928, expected: 37889919337},
        TestCaseTwoArgs{lhs: 122837345805, rhs: 623442746567, expected: 122837345805},
        TestCaseTwoArgs{lhs: 791767562410, rhs: 813492478638, expected: 791767562410},
        TestCaseTwoArgs{lhs: 74638466937, rhs: 1071852287691, expected: 74638466937},
        TestCaseTwoArgs{lhs: 538918880349, rhs: 600937168502, expected: 538918880349},
        TestCaseTwoArgs{lhs: 883174110210, rhs: 169839194973, expected: 169839194973},
        TestCaseTwoArgs{lhs: 208379751836, rhs: 398412001209, expected: 208379751836},
        TestCaseTwoArgs{lhs: 597118450859, rhs: 539399160138, expected: 539399160138},
        TestCaseTwoArgs{lhs: 862119468622, rhs: 913224603517, expected: 862119468622},
        TestCaseTwoArgs{lhs: 403943940068, rhs: 646867053108, expected: 403943940068},
        TestCaseTwoArgs{lhs: 793566269953, rhs: 847935722891, expected: 793566269953},
        TestCaseTwoArgs{lhs: 353815288107, rhs: 636093232996, expected: 353815288107},
        TestCaseTwoArgs{lhs: 702092576513, rhs: 902815364877, expected: 702092576513},
        TestCaseTwoArgs{lhs: 90781287163, rhs: 87273781041, expected: 87273781041},
        TestCaseTwoArgs{lhs: 100945388229, rhs: 27983746336, expected: 27983746336},
        TestCaseTwoArgs{lhs: 354169566825, rhs: 749036740621, expected: 354169566825},
        TestCaseTwoArgs{lhs: 464488693877, rhs: 463790507170, expected: 463790507170},
        TestCaseTwoArgs{lhs: 843036205156, rhs: 114035519512, expected: 114035519512},
        TestCaseTwoArgs{lhs: 824152937974, rhs: 13747148363, expected: 13747148363},
        TestCaseTwoArgs{lhs: 297094589038, rhs: 30101155597, expected: 30101155597},
        TestCaseTwoArgs{lhs: 606583925487, rhs: 1087658091966, expected: 606583925487},
        TestCaseTwoArgs{lhs: 1067388523091, rhs: 319898834837, expected: 319898834837},
        TestCaseTwoArgs{lhs: 568517094299, rhs: 601659059058, expected: 568517094299},
        TestCaseTwoArgs{lhs: 268660320212, rhs: 736745754676, expected: 268660320212},
        TestCaseTwoArgs{lhs: 599251038635, rhs: 1090960911280, expected: 599251038635},
        TestCaseTwoArgs{lhs: 606947560636, rhs: 382265163032, expected: 382265163032},
        TestCaseTwoArgs{lhs: 359047963980, rhs: 772515817127, expected: 359047963980},
        TestCaseTwoArgs{lhs: 535268870717, rhs: 118680735454, expected: 118680735454},
        TestCaseTwoArgs{lhs: 1085541217573, rhs: 160707901076, expected: 160707901076},
        TestCaseTwoArgs{lhs: 508741117991, rhs: 919940012430, expected: 508741117991},
        TestCaseTwoArgs{lhs: 13432301752, rhs: 283994732985, expected: 13432301752},
        TestCaseTwoArgs{lhs: 825299240113, rhs: 712726325062, expected: 712726325062},
        TestCaseTwoArgs{lhs: 482481216871, rhs: 515195999668, expected: 482481216871},
        TestCaseTwoArgs{lhs: 14007402368, rhs: 827784685305, expected: 14007402368},
        TestCaseTwoArgs{lhs: 1064037490656, rhs: 377529301653, expected: 377529301653},
        TestCaseTwoArgs{lhs: 548465007664, rhs: 911184071615, expected: 548465007664},
        TestCaseTwoArgs{lhs: 981231930985, rhs: 837570789155, expected: 837570789155},
        TestCaseTwoArgs{lhs: 1034908580554, rhs: 629145768355, expected: 629145768355},
        TestCaseTwoArgs{lhs: 106914070884, rhs: 1008885020103, expected: 106914070884},
        TestCaseTwoArgs{lhs: 967911056673, rhs: 464872529104, expected: 464872529104},
        TestCaseTwoArgs{lhs: 26269427638, rhs: 79219699736, expected: 26269427638},
        TestCaseTwoArgs{lhs: 826898516910, rhs: 520192501723, expected: 520192501723},
        TestCaseTwoArgs{lhs: 83191982032, rhs: 679513302749, expected: 83191982032},
        TestCaseTwoArgs{lhs: 923241129470, rhs: 1020655093218, expected: 923241129470},
        TestCaseTwoArgs{lhs: 1097457328367, rhs: 169652276788, expected: 169652276788},
        TestCaseTwoArgs{lhs: 247354114287, rhs: 656858486866, expected: 247354114287},
        TestCaseTwoArgs{lhs: 1092858042917, rhs: 692208131004, expected: 692208131004},
        TestCaseTwoArgs{lhs: 171687455515, rhs: 490188168071, expected: 171687455515},
        TestCaseTwoArgs{lhs: 719489146161, rhs: 739719583037, expected: 719489146161},
        TestCaseTwoArgs{lhs: 697406065596, rhs: 739451288184, expected: 697406065596},
        TestCaseTwoArgs{lhs: 37928889055, rhs: 1098380935346, expected: 37928889055},
        TestCaseTwoArgs{lhs: 403283046635, rhs: 383929921646, expected: 383929921646},
        TestCaseTwoArgs{lhs: 159032888949, rhs: 1094759398101, expected: 159032888949},
        TestCaseTwoArgs{lhs: 188047809069, rhs: 1031029557066, expected: 188047809069},
        TestCaseTwoArgs{lhs: 760609604047, rhs: 1090414879064, expected: 760609604047},
        TestCaseTwoArgs{lhs: 663280455887, rhs: 1035566881417, expected: 663280455887},
        TestCaseTwoArgs{lhs: 630618718523, rhs: 749511495510, expected: 630618718523},
        TestCaseTwoArgs{lhs: 159413404808, rhs: 350630624501, expected: 159413404808},
        TestCaseTwoArgs{lhs: 168504187996, rhs: 996330333444, expected: 168504187996},
        TestCaseTwoArgs{lhs: 290668308244, rhs: 840422970712, expected: 290668308244},
        TestCaseTwoArgs{lhs: 82732937467, rhs: 1007239550320, expected: 82732937467},
        TestCaseTwoArgs{lhs: 456475451597, rhs: 371627038244, expected: 371627038244},
        TestCaseTwoArgs{lhs: 866139655231, rhs: 1083362801790, expected: 866139655231},
        TestCaseTwoArgs{lhs: 307073227459, rhs: 695028845213, expected: 307073227459},
        TestCaseTwoArgs{lhs: 109051314973, rhs: 116094761477, expected: 109051314973},
        TestCaseTwoArgs{lhs: 666123272980, rhs: 646289240416, expected: 646289240416},
        TestCaseTwoArgs{lhs: 537464660331, rhs: 1085452531637, expected: 537464660331},
        TestCaseTwoArgs{lhs: 716579466137, rhs: 245950746134, expected: 245950746134},
        TestCaseTwoArgs{lhs: 286004585592, rhs: 86081617494, expected: 86081617494},
        TestCaseTwoArgs{lhs: 685663618048, rhs: 906149696078, expected: 685663618048},
        TestCaseTwoArgs{lhs: 110245328535, rhs: 366775517718, expected: 110245328535},
        TestCaseTwoArgs{lhs: 690661107533, rhs: 1080459191238, expected: 690661107533},
        TestCaseTwoArgs{lhs: 710546632805, rhs: 159895105750, expected: 159895105750},
        TestCaseTwoArgs{lhs: 100637326053, rhs: 271983355538, expected: 100637326053},
        TestCaseTwoArgs{lhs: 290171530840, rhs: 612015030552, expected: 290171530840},
        TestCaseTwoArgs{lhs: 1078931869711, rhs: 206712414319, expected: 206712414319},
        TestCaseTwoArgs{lhs: 121576189984, rhs: 1089691330182, expected: 121576189984},
        TestCaseTwoArgs{lhs: 675134371946, rhs: 270582501015, expected: 270582501015},
        TestCaseTwoArgs{lhs: 158075196928, rhs: 691156239828, expected: 158075196928},
        TestCaseTwoArgs{lhs: 831263089466, rhs: 680472105043, expected: 680472105043},
        TestCaseTwoArgs{lhs: 254888419676, rhs: 985987740740, expected: 254888419676},
        TestCaseTwoArgs{lhs: 616687647794, rhs: 534137891499, expected: 534137891499},
        TestCaseTwoArgs{lhs: 241662445723, rhs: 1065876530961, expected: 241662445723},
        TestCaseTwoArgs{lhs: 71948297742, rhs: 446142469600, expected: 71948297742},
        TestCaseTwoArgs{lhs: 897649537519, rhs: 392171898242, expected: 392171898242},
        TestCaseTwoArgs{lhs: 204235519146, rhs: 271886463540, expected: 204235519146},
        TestCaseTwoArgs{lhs: 913875405244, rhs: 745796007952, expected: 745796007952},
        TestCaseTwoArgs{lhs: 727796757229, rhs: 943301805370, expected: 727796757229},
        TestCaseTwoArgs{lhs: 396976492361, rhs: 142264314314, expected: 142264314314},
        TestCaseTwoArgs{lhs: 932734203260, rhs: 574290505702, expected: 574290505702},
        TestCaseTwoArgs{lhs: 842360327942, rhs: 750597781466, expected: 750597781466},
        TestCaseTwoArgs{lhs: 403086874596, rhs: 571474390663, expected: 403086874596},
        TestCaseTwoArgs{lhs: 777715831296, rhs: 751786100015, expected: 751786100015},
        TestCaseTwoArgs{lhs: 476504589573, rhs: 1073437582448, expected: 476504589573},
        TestCaseTwoArgs{lhs: 299639981531, rhs: 82899625797, expected: 82899625797},
        TestCaseTwoArgs{lhs: 1003400214032, rhs: 38734679537, expected: 38734679537},
        TestCaseTwoArgs{lhs: 829507245997, rhs: 1074248183132, expected: 829507245997},
        TestCaseTwoArgs{lhs: 883952529554, rhs: 1051642885792, expected: 883952529554},
        TestCaseTwoArgs{lhs: 383180845164, rhs: 747122190617, expected: 383180845164},
        TestCaseTwoArgs{lhs: 174159286560, rhs: 925096456985, expected: 174159286560},
        TestCaseTwoArgs{lhs: 214260335767, rhs: 600740079934, expected: 214260335767},
        TestCaseTwoArgs{lhs: 267652763903, rhs: 1046082005107, expected: 267652763903},
        TestCaseTwoArgs{lhs: 591849342144, rhs: 855096283658, expected: 591849342144},
        TestCaseTwoArgs{lhs: 815214620615, rhs: 617629666781, expected: 617629666781},
        TestCaseTwoArgs{lhs: 326402577136, rhs: 95882777759, expected: 95882777759},
        TestCaseTwoArgs{lhs: 255884604432, rhs: 496986186687, expected: 255884604432},
        TestCaseTwoArgs{lhs: 758742005465, rhs: 209667725081, expected: 209667725081},
        TestCaseTwoArgs{lhs: 210698933199, rhs: 581093887679, expected: 210698933199},
        TestCaseTwoArgs{lhs: 945950171853, rhs: 1006544932240, expected: 945950171853},
        TestCaseTwoArgs{lhs: 736731987345, rhs: 657832696425, expected: 657832696425},
        TestCaseTwoArgs{lhs: 980074429109, rhs: 424546793624, expected: 424546793624},
        TestCaseTwoArgs{lhs: 64140481426, rhs: 228258443918, expected: 64140481426},
        TestCaseTwoArgs{lhs: 1087879103131, rhs: 529399838534, expected: 529399838534},
        TestCaseTwoArgs{lhs: 639777828270, rhs: 139836102211, expected: 139836102211},
        TestCaseTwoArgs{lhs: 166509422606, rhs: 457868030877, expected: 166509422606},
        TestCaseTwoArgs{lhs: 396149174519, rhs: 756123762337, expected: 396149174519},
        TestCaseTwoArgs{lhs: 594887735830, rhs: 429710257734, expected: 429710257734},
        TestCaseTwoArgs{lhs: 1021143270093, rhs: 437877877758, expected: 437877877758},
        TestCaseTwoArgs{lhs: 492863442412, rhs: 646785054389, expected: 492863442412},
        TestCaseTwoArgs{lhs: 896941256499, rhs: 472189866980, expected: 472189866980},
        TestCaseTwoArgs{lhs: 703322091007, rhs: 998983575496, expected: 703322091007},
        TestCaseTwoArgs{lhs: 847006049742, rhs: 292336215118, expected: 292336215118},
        TestCaseTwoArgs{lhs: 85229481416, rhs: 516099261337, expected: 85229481416},
        TestCaseTwoArgs{lhs: 302792694266, rhs: 174846879175, expected: 174846879175},
        TestCaseTwoArgs{lhs: 516915573536, rhs: 162584572933, expected: 162584572933},
        TestCaseTwoArgs{lhs: 1025626446910, rhs: 126763776695, expected: 126763776695},
        TestCaseTwoArgs{lhs: 918557881822, rhs: 276614154197, expected: 276614154197},
        TestCaseTwoArgs{lhs: 461678319266, rhs: 573775883932, expected: 461678319266},
        TestCaseTwoArgs{lhs: 954004308293, rhs: 26229612594, expected: 26229612594},
        TestCaseTwoArgs{lhs: 642720423764, rhs: 1089550045030, expected: 642720423764},
        TestCaseTwoArgs{lhs: 892011075581, rhs: 178170697266, expected: 178170697266},
        TestCaseTwoArgs{lhs: 579300822868, rhs: 121238809522, expected: 121238809522},
        TestCaseTwoArgs{lhs: 683286665720, rhs: 120257577884, expected: 120257577884},
        TestCaseTwoArgs{lhs: 1096449484797, rhs: 851111621889, expected: 851111621889},
        TestCaseTwoArgs{lhs: 709949404035, rhs: 1028935322827, expected: 709949404035},
        TestCaseTwoArgs{lhs: 850091325590, rhs: 103059102064, expected: 103059102064},
        TestCaseTwoArgs{lhs: 124484039719, rhs: 729795243856, expected: 124484039719},
        TestCaseTwoArgs{lhs: 154314578137, rhs: 136789024653, expected: 136789024653},
        TestCaseTwoArgs{lhs: 756867146465, rhs: 1096949038070, expected: 756867146465},
        TestCaseTwoArgs{lhs: 800532145470, rhs: 312551199522, expected: 312551199522},
        TestCaseTwoArgs{lhs: 626345071996, rhs: 675056959145, expected: 626345071996},
        TestCaseTwoArgs{lhs: 661714208605, rhs: 931424998562, expected: 661714208605},
        TestCaseTwoArgs{lhs: 1042066165205, rhs: 614034670408, expected: 614034670408},
        TestCaseTwoArgs{lhs: 349730363519, rhs: 735647095065, expected: 349730363519},
        TestCaseTwoArgs{lhs: 676180838958, rhs: 390726256311, expected: 390726256311},
        TestCaseTwoArgs{lhs: 442646670713, rhs: 166087498408, expected: 166087498408},
        TestCaseTwoArgs{lhs: 154050305375, rhs: 187366823083, expected: 154050305375},
        TestCaseTwoArgs{lhs: 887799613575, rhs: 126631536190, expected: 126631536190},
        TestCaseTwoArgs{lhs: 313548435717, rhs: 165848026902, expected: 165848026902},
        TestCaseTwoArgs{lhs: 199393135293, rhs: 623249658883, expected: 199393135293},
        TestCaseTwoArgs{lhs: 1031515683759, rhs: 375796474579, expected: 375796474579},
        TestCaseTwoArgs{lhs: 572820447337, rhs: 513363824166, expected: 513363824166},
        TestCaseTwoArgs{lhs: 965799703342, rhs: 669353320159, expected: 669353320159},
        TestCaseTwoArgs{lhs: 975044791013, rhs: 1067361297965, expected: 975044791013},
        TestCaseTwoArgs{lhs: 230466795786, rhs: 614865966167, expected: 230466795786},
        TestCaseTwoArgs{lhs: 658567591935, rhs: 360582294904, expected: 360582294904},
        TestCaseTwoArgs{lhs: 734313734364, rhs: 784528380111, expected: 734313734364},
        TestCaseTwoArgs{lhs: 142043067252, rhs: 811180998318, expected: 142043067252},
        TestCaseTwoArgs{lhs: 875166465460, rhs: 1013077614420, expected: 875166465460},
        TestCaseTwoArgs{lhs: 552262781296, rhs: 538988887674, expected: 538988887674},
        TestCaseTwoArgs{lhs: 918255244896, rhs: 579689109524, expected: 579689109524},
        TestCaseTwoArgs{lhs: 540861393178, rhs: 594445639979, expected: 540861393178},
        TestCaseTwoArgs{lhs: 479374350790, rhs: 650423878480, expected: 479374350790},
        TestCaseTwoArgs{lhs: 252471112433, rhs: 969376999071, expected: 252471112433},
        TestCaseTwoArgs{lhs: 366906988102, rhs: 790693966325, expected: 366906988102},
        TestCaseTwoArgs{lhs: 837387552053, rhs: 75460835928, expected: 75460835928},
        TestCaseTwoArgs{lhs: 1008023440013, rhs: 247124687599, expected: 247124687599},
        TestCaseTwoArgs{lhs: 223667622142, rhs: 381228462455, expected: 223667622142},

        // Edge cases
        TestCaseTwoArgs{lhs: 0, rhs: 0, expected: 0},
        TestCaseTwoArgs{lhs: 0, rhs: 1099511627775, expected: 0},
        TestCaseTwoArgs{lhs: 1099511627775, rhs: 0, expected: 0},
        TestCaseTwoArgs{lhs: 1099511627775, rhs: 1099511627775, expected: 1099511627775},
    ];

    #[test]
    fn test_i40() {
        for case in test_cases.span() {
            let mut state = RTStateOps::new();
            assert_eq!(__llvm_umin_n_n_n(ref state, *case.lhs, *case.rhs), *case.expected);
        }
    }
}

use crate::rtstate::RTState;
use crate::alu::scmp::scmp;

pub fn __llvm_scmp_i_i_b(ref state: RTState, lhs: u128, rhs: u128) -> u128 {
    scmp::<u32>(lhs, rhs)
}

#[cfg(test)]
mod tests {
    use crate::rtstate::RTStateOps;
    use super::__llvm_scmp_i_i_b;
    use crate::alu::test_case::TestCaseTwoArgs;
    #[cairofmt::skip]
    pub const test_cases: [TestCaseTwoArgs; 129] = [
        // Due to Cairo's casting limitation, negative numbers are represented as bit patterns.

        // Random test cases
        TestCaseTwoArgs{lhs: 730484479, rhs: 631885872, expected: 1},
        TestCaseTwoArgs{lhs: 0b10011100111001101111101110010110, rhs: 0b10011001101010001001011110110100, expected: 1}, // lhs = -1662583914 rhs = -1717004364
        TestCaseTwoArgs{lhs: 667217848, rhs: 1338872398, expected: 0b11111111111111111111111111111111}, // expected = -1
        TestCaseTwoArgs{lhs: 0b10001100111100010111011010001011, rhs: 1341257855, expected: 0b11111111111111111111111111111111}, // lhs = -1930332533 expected = -1
        TestCaseTwoArgs{lhs: 0b11011101110000110001010100100001, rhs: 136696754, expected: 0b11111111111111111111111111111111}, // lhs = -574417631 expected = -1
        TestCaseTwoArgs{lhs: 464159983, rhs: 1018151282, expected: 0b11111111111111111111111111111111}, // expected = -1
        TestCaseTwoArgs{lhs: 0b11001101010000100000000100111011, rhs: 459150993, expected: 0b11111111111111111111111111111111}, // lhs = -851312325 expected = -1
        TestCaseTwoArgs{lhs: 490024899, rhs: 692698066, expected: 0b11111111111111111111111111111111}, // expected = -1
        TestCaseTwoArgs{lhs: 0b10000001000001110110101000001111, rhs: 0b11000010101001010110110110100001, expected: 0b11111111111111111111111111111111}, // lhs = -2130220529 rhs = -1029345887 expected = -1
        TestCaseTwoArgs{lhs: 1357005710, rhs: 2009332622, expected: 0b11111111111111111111111111111111}, // expected = -1
        TestCaseTwoArgs{lhs: 0b10111000011111000010011101110011, rhs: 0b11001100001111001100011101110000, expected: 0b11111111111111111111111111111111}, // lhs = -1199822989 rhs = -868432016 expected = -1
        TestCaseTwoArgs{lhs: 524581533, rhs: 1371854429, expected: 0b11111111111111111111111111111111}, // expected = -1
        TestCaseTwoArgs{lhs: 0b10001111011000000110001011110000, rhs: 2059902172, expected: 0b11111111111111111111111111111111}, // lhs = -1889508624 expected = -1
        TestCaseTwoArgs{lhs: 691961687, rhs: 1771354365, expected: 0b11111111111111111111111111111111}, // expected = -1
        TestCaseTwoArgs{lhs: 1541097686, rhs: 854765483, expected: 1},
        TestCaseTwoArgs{lhs: 596497803, rhs: 0b10110110110110010010011000001001, expected: 1}, // rhs = -1227282935
        TestCaseTwoArgs{lhs: 0b10000001111000101100001101101111, rhs: 1079615227, expected: 0b11111111111111111111111111111111}, // lhs = -2115845265 expected = -1
        TestCaseTwoArgs{lhs: 0b10100001011000101111100101100110, rhs: 0b10100111110110111111111101110001, expected: 0b11111111111111111111111111111111}, // lhs = -1587349146 rhs = -1478754447 expected = -1
        TestCaseTwoArgs{lhs: 0b10000100000111101100100010101001, rhs: 411813175, expected: 0b11111111111111111111111111111111}, // lhs = -2078357335 expected = -1
        TestCaseTwoArgs{lhs: 0b10010011000111100011100110000001, rhs: 0b11010010011111010110011111011100, expected: 0b11111111111111111111111111111111}, // lhs = -1826735743 rhs = -763533348 expected = -1
        TestCaseTwoArgs{lhs: 0b10111111111100100011010100001011, rhs: 0b11001101101101001111010111011000, expected: 0b11111111111111111111111111111111}, // lhs = -1074645749 rhs = -843778600 expected = -1
        TestCaseTwoArgs{lhs: 0b11010100110111100001010111001110, rhs: 0b11101001111010011100101011011000, expected: 0b11111111111111111111111111111111}, // lhs = -723642930 rhs = -370554152 expected = -1
        TestCaseTwoArgs{lhs: 202301741, rhs: 1296038774, expected: 0b11111111111111111111111111111111}, // expected = -1
        TestCaseTwoArgs{lhs: 1108378500, rhs: 620852662, expected: 1},
        TestCaseTwoArgs{lhs: 0b11011100110000101101010011010010, rhs: 1622694663, expected: 0b11111111111111111111111111111111}, // lhs = -591211310 expected = -1
        TestCaseTwoArgs{lhs: 2063472373, rhs: 1106979418, expected: 1},
        TestCaseTwoArgs{lhs: 0b10000001001111001001101110101111, rhs: 757898131, expected: 0b11111111111111111111111111111111}, // lhs = -2126734417 expected = -1
        TestCaseTwoArgs{lhs: 0b11001010000010111110000101110100, rhs: 0b10101000101101100000000111011000, expected: 1}, // lhs = -905191052 rhs = -1464466984
        TestCaseTwoArgs{lhs: 1704288141, rhs: 266912089, expected: 1},
        TestCaseTwoArgs{lhs: 0b11001001000000010000000111100001, rhs: 0b11111001011101100111010110001001, expected: 0b11111111111111111111111111111111}, // lhs = -922680863 rhs = -109677175 expected = -1
        TestCaseTwoArgs{lhs: 785936338, rhs: 935987240, expected: 0b11111111111111111111111111111111}, // expected = -1
        TestCaseTwoArgs{lhs: 795050822, rhs: 742463695, expected: 1},
        TestCaseTwoArgs{lhs: 0b11101101011101101100101000001100, rhs: 0b11011010000000110000000100010001, expected: 1}, // lhs = -310982132 rhs = -637337327
        TestCaseTwoArgs{lhs: 0b10110110010000011101000011010100, rhs: 0b11111011101010100001100110001100, expected: 0b11111111111111111111111111111111}, // lhs = -1237200684 rhs = -72738420 expected = -1
        TestCaseTwoArgs{lhs: 506470913, rhs: 915066375, expected: 0b11111111111111111111111111111111}, // expected = -1
        TestCaseTwoArgs{lhs: 1179456487, rhs: 488876454, expected: 1},
        TestCaseTwoArgs{lhs: 0b11100100001111101011011111011100, rhs: 1456419430, expected: 0b11111111111111111111111111111111}, // lhs = -465651748 expected = -1
        TestCaseTwoArgs{lhs: 0b10101000010111100110000010010110, rhs: 0b10111111001010100101101010110100, expected: 0b11111111111111111111111111111111}, // lhs = -1470209898 rhs = -1087743308 expected = -1
        TestCaseTwoArgs{lhs: 0b10110011111101011100011100001110, rhs: 1899693977, expected: 0b11111111111111111111111111111111}, // lhs = -1275738354 expected = -1
        TestCaseTwoArgs{lhs: 0b10101111101101011101111111000010, rhs: 1155081629, expected: 0b11111111111111111111111111111111}, // lhs = -1347035198 expected = -1
        TestCaseTwoArgs{lhs: 0b11000100101110110010101101100100, rhs: 253693057, expected: 0b11111111111111111111111111111111}, // lhs = -994366620 expected = -1
        TestCaseTwoArgs{lhs: 0b11001011001100100100111101111101, rhs: 0b11010110100101110000101000110001, expected: 0b11111111111111111111111111111111}, // lhs = -885895299 rhs = -694744527 expected = -1
        TestCaseTwoArgs{lhs: 1838069086, rhs: 1834740996, expected: 1},
        TestCaseTwoArgs{lhs: 2106963300, rhs: 0b10101001101101100010000010001000, expected: 1}, // rhs = -1447681912
        TestCaseTwoArgs{lhs: 0b10110010011101101110001100010001, rhs: 571861927, expected: 0b11111111111111111111111111111111}, // lhs = -1300831471 expected = -1
        TestCaseTwoArgs{lhs: 1251989491, rhs: 700438246, expected: 1},
        TestCaseTwoArgs{lhs: 179346920, rhs: 1444395580, expected: 0b11111111111111111111111111111111}, // expected = -1
        TestCaseTwoArgs{lhs: 0b11111001111110100110111010111101, rhs: 1671697197, expected: 0b11111111111111111111111111111111}, // lhs = -101028163 expected = -1
        TestCaseTwoArgs{lhs: 0b11101000000001100000110101000001, rhs: 2129474385, expected: 0b11111111111111111111111111111111}, // lhs = -402256575 expected = -1
        TestCaseTwoArgs{lhs: 1829449643, rhs: 0b11100111011001111010110011011010, expected: 1}, // rhs = -412635942
        TestCaseTwoArgs{lhs: 0b10111011000111101110010100111110, rhs: 0b11100101000100100111111001010011, expected: 0b11111111111111111111111111111111}, // lhs = -1155603138 rhs = -451772845 expected = -1
        TestCaseTwoArgs{lhs: 7542816, rhs: 0b11001111101001001000011110001011, expected: 1}, // rhs = -811300981
        TestCaseTwoArgs{lhs: 0b10001101110111011110101010001110, rhs: 1816189186, expected: 0b11111111111111111111111111111111}, // lhs = -1914836338 expected = -1
        TestCaseTwoArgs{lhs: 0b11111010101011000010111100110011, rhs: 0b10011001110001011110010011001101, expected: 1}, // lhs = -89379021 rhs = -1715084083
        TestCaseTwoArgs{lhs: 2108237407, rhs: 0b10010101110111100011011010011000, expected: 1}, // rhs = -1780599144
        TestCaseTwoArgs{lhs: 0b10101101111111111111111010010001, rhs: 0b10100011000010110001010000000001, expected: 1}, // lhs = -1375732079 rhs = -1559555071
        TestCaseTwoArgs{lhs: 153429651, rhs: 343641408, expected: 0b11111111111111111111111111111111}, // expected = -1
        TestCaseTwoArgs{lhs: 41689857, rhs: 1569368827, expected: 0b11111111111111111111111111111111}, // expected = -1
        TestCaseTwoArgs{lhs: 0b10001100010000010010010101110110, rhs: 0b11110111010001011011110011010101, expected: 0b11111111111111111111111111111111}, // lhs = -1941887626 rhs = -146424619 expected = -1
        TestCaseTwoArgs{lhs: 0b11010101001000011000001100101111, rhs: 0b10011011010111000100111110100010, expected: 1}, // lhs = -719224017 rhs = -1688449118
        TestCaseTwoArgs{lhs: 24323570, rhs: 0b10110000100010011011100010110001, expected: 1}, // rhs = -1333151567
        TestCaseTwoArgs{lhs: 0b11001000100100011000000010110100, rhs: 2003523525, expected: 0b11111111111111111111111111111111}, // lhs = -929988428 expected = -1
        TestCaseTwoArgs{lhs: 0b10101110011000110101001001011000, rhs: 1902176343, expected: 0b11111111111111111111111111111111}, // lhs = -1369222568 expected = -1
        TestCaseTwoArgs{lhs: 0b11100010000111110000011101010001, rhs: 484435819, expected: 0b11111111111111111111111111111111}, // lhs = -501282991 expected = -1
        TestCaseTwoArgs{lhs: 0b10001110011100111011100101110011, rhs: 0b10011100100001101111011010111111, expected: 0b11111111111111111111111111111111}, // lhs = -1905018509 rhs = -1668876609 expected = -1
        TestCaseTwoArgs{lhs: 1817707391, rhs: 0b11111100101101001000110100101111, expected: 1}, // rhs = -55276241
        TestCaseTwoArgs{lhs: 367965812, rhs: 0b11001000001001000111000000101101, expected: 1}, // rhs = -937136083
        TestCaseTwoArgs{lhs: 0b11111010010001101011001111011001, rhs: 0b11101001000001010010011000101011, expected: 1}, // lhs = -96029735 rhs = -385538517
        TestCaseTwoArgs{lhs: 0b11100011100101111011001100000001, rhs: 0b10001101011001011011110010100001, expected: 1}, // lhs = -476597503 rhs = -1922712415
        TestCaseTwoArgs{lhs: 1310608957, rhs: 1409712989, expected: 0b11111111111111111111111111111111}, // expected = -1
        TestCaseTwoArgs{lhs: 556549579, rhs: 366253506, expected: 1},
        TestCaseTwoArgs{lhs: 0b11101010011000010111110001001011, rhs: 1124114565, expected: 0b11111111111111111111111111111111}, // lhs = -362709941 expected = -1
        TestCaseTwoArgs{lhs: 0b11010101010010101110000101111110, rhs: 0b10100100000111110000101001101110, expected: 1}, // lhs = -716512898 rhs = -1541469586
        TestCaseTwoArgs{lhs: 873339268, rhs: 0b10001010101001111100110001001001, expected: 1}, // rhs = -1968714679
        TestCaseTwoArgs{lhs: 588262108, rhs: 1520731810, expected: 0b11111111111111111111111111111111}, // expected = -1
        TestCaseTwoArgs{lhs: 2014999593, rhs: 0b10010100111111000110000100011100, expected: 1}, // rhs = -1795399396
        TestCaseTwoArgs{lhs: 705866556, rhs: 1266785812, expected: 0b11111111111111111111111111111111}, // expected = -1
        TestCaseTwoArgs{lhs: 0b11110101001100011001000101100101, rhs: 592699573, expected: 0b11111111111111111111111111111111}, // lhs = -181300891 expected = -1
        TestCaseTwoArgs{lhs: 0b11000100111100111001101000000011, rhs: 0b10110101001110101100111001111010, expected: 1}, // lhs = -990668285 rhs = -1254437254
        TestCaseTwoArgs{lhs: 0b11101101111111010010100100010111, rhs: 1404909999, expected: 0b11111111111111111111111111111111}, // lhs = -302175977 expected = -1
        TestCaseTwoArgs{lhs: 1741171838, rhs: 0b11010101001110011010010101110011, expected: 1}, // rhs = -717642381
        TestCaseTwoArgs{lhs: 0b10010101111011000111001010100010, rhs: 877258791, expected: 0b11111111111111111111111111111111}, // lhs = -1779666270 expected = -1
        TestCaseTwoArgs{lhs: 2048167746, rhs: 0b10011101001110001001011100010111, expected: 1}, // rhs = -1657235689
        TestCaseTwoArgs{lhs: 0b10101011011111110110011000111011, rhs: 1645400066, expected: 0b11111111111111111111111111111111}, // lhs = -1417714117 expected = -1
        TestCaseTwoArgs{lhs: 2004298438, rhs: 0b10001110001111110111001111101111, expected: 1}, // rhs = -1908444177
        TestCaseTwoArgs{lhs: 0b11011100001001110001010010101100, rhs: 761865484, expected: 0b11111111111111111111111111111111}, // lhs = -601418580 expected = -1
        TestCaseTwoArgs{lhs: 0b11001011011101101000110011001101, rhs: 1807839911, expected: 0b11111111111111111111111111111111}, // lhs = -881423155 expected = -1
        TestCaseTwoArgs{lhs: 0b10100101101110001110111110101000, rhs: 91798712, expected: 0b11111111111111111111111111111111}, // lhs = -1514606680 expected = -1
        TestCaseTwoArgs{lhs: 0b10000111100001100011000011110101, rhs: 0b10001100010001101000110001000000, expected: 0b11111111111111111111111111111111}, // lhs = -2021248779 rhs = -1941533632 expected = -1
        TestCaseTwoArgs{lhs: 0b11101010000100000101001111001101, rhs: 0b10011010001101000100001111111000, expected: 1}, // lhs = -368028723 rhs = -1707850760
        TestCaseTwoArgs{lhs: 1362347666, rhs: 0b10100010001111010001110110101001, expected: 1}, // rhs = -1573053015
        TestCaseTwoArgs{lhs: 1842117259, rhs: 445923245, expected: 1},
        TestCaseTwoArgs{lhs: 1333656403, rhs: 1223857551, expected: 1},
        TestCaseTwoArgs{lhs: 1934043345, rhs: 0b11101000110111011101011100010111, expected: 1}, // rhs = -388114665
        TestCaseTwoArgs{lhs: 455103601, rhs: 0b10011110000010100111110011010011, expected: 1}, // rhs = -1643479853
        TestCaseTwoArgs{lhs: 0b10000100111111010110101101101011, rhs: 1671833755, expected: 0b11111111111111111111111111111111}, // lhs = -2063766677 expected = -1
        TestCaseTwoArgs{lhs: 0b11001110000100001001110100110101, rhs: 1750738983, expected: 0b11111111111111111111111111111111}, // lhs = -837771979 expected = -1
        TestCaseTwoArgs{lhs: 0b11101111010110010110110110000000, rhs: 200947829, expected: 0b11111111111111111111111111111111}, // lhs = -279351936 expected = -1
        TestCaseTwoArgs{lhs: 0b10000001001010101110110010001010, rhs: 0b11001100010001101111110111000111, expected: 0b11111111111111111111111111111111}, // lhs = -2127893366 rhs = -867762745 expected = -1
        TestCaseTwoArgs{lhs: 208762391, rhs: 0b11000111101110100100111100101001, expected: 1}, // rhs = -944091351
        TestCaseTwoArgs{lhs: 829420187, rhs: 0b11111000110001001101000000011110, expected: 1}, // rhs = -121319394
        TestCaseTwoArgs{lhs: 0b10100011111110110011101011110110, rhs: 679632534, expected: 0b11111111111111111111111111111111}, // lhs = -1543816458 expected = -1
        TestCaseTwoArgs{lhs: 1568583354, rhs: 1175396598, expected: 1},
        TestCaseTwoArgs{lhs: 1328548516, rhs: 616629926, expected: 1},
        TestCaseTwoArgs{lhs: 173318372, rhs: 1319025456, expected: 0b11111111111111111111111111111111}, // expected = -1
        TestCaseTwoArgs{lhs: 1812868325, rhs: 0b10000101001011101110000001110110, expected: 1}, // rhs = -2060525450
        TestCaseTwoArgs{lhs: 208679480, rhs: 1077842639, expected: 0b11111111111111111111111111111111}, // expected = -1
        TestCaseTwoArgs{lhs: 1454917701, rhs: 1946981081, expected: 0b11111111111111111111111111111111}, // expected = -1
        TestCaseTwoArgs{lhs: 0b10011110110110111001110001010001, rhs: 0b11111111110110001101110111111011, expected: 0b11111111111111111111111111111111}, // lhs = -1629774767 rhs = -2564613 expected = -1
        TestCaseTwoArgs{lhs: 0b10011111000100010110111010101101, rhs: 1291471400, expected: 0b11111111111111111111111111111111}, // lhs = -1626247507 expected = -1
        TestCaseTwoArgs{lhs: 669030191, rhs: 1934294385, expected: 0b11111111111111111111111111111111}, // expected = -1
        TestCaseTwoArgs{lhs: 234748637, rhs: 1161753754, expected: 0b11111111111111111111111111111111}, // expected = -1
        TestCaseTwoArgs{lhs: 0b11010010101110110011011110110100, rhs: 1087250505, expected: 0b11111111111111111111111111111111}, // lhs = -759482444 expected = -1
        TestCaseTwoArgs{lhs: 845942925, rhs: 528590607, expected: 1},
        TestCaseTwoArgs{lhs: 40485792, rhs: 52588957, expected: 0b11111111111111111111111111111111}, // expected = -1
        TestCaseTwoArgs{lhs: 2107060810, rhs: 0b10101010000001001011000101011010, expected: 1}, // rhs = -1442533030
        TestCaseTwoArgs{lhs: 0b10101000000100011101011010100011, rhs: 775160510, expected: 0b11111111111111111111111111111111}, // lhs = -1475225949 expected = -1
        TestCaseTwoArgs{lhs: 0b10111110111010001111001011001111, rhs: 1875984957, expected: 0b11111111111111111111111111111111}, // lhs = -1092029745 expected = -1
        TestCaseTwoArgs{lhs: 0b11000000001000100111001111101010, rhs: 597804619, expected: 0b11111111111111111111111111111111}, // lhs = -1071483926 expected = -1
        TestCaseTwoArgs{lhs: 0b10101110000100110100001110010111, rhs: 653284269, expected: 0b11111111111111111111111111111111}, // lhs = -1374469225 expected = -1

        // Edge cases
        TestCaseTwoArgs{lhs: 0, rhs: 0, expected: 0},
        TestCaseTwoArgs{lhs: 0, rhs: 2147483647, expected: 0b11111111111111111111111111111111}, // expected = -1
        TestCaseTwoArgs{lhs: 0, rhs: 0b10000000000000000000000000000000, expected: 1}, // rhs = -2147483648
        TestCaseTwoArgs{lhs: 2147483647, rhs: 0, expected: 1},
        TestCaseTwoArgs{lhs: 2147483647, rhs: 2147483647, expected: 0},
        TestCaseTwoArgs{lhs: 2147483647, rhs: 0b10000000000000000000000000000000, expected: 1}, // rhs = -2147483648
        TestCaseTwoArgs{lhs: 0b10000000000000000000000000000000, rhs: 0, expected: 0b11111111111111111111111111111111}, // lhs = -2147483648 expected = -1
        TestCaseTwoArgs{lhs: 0b10000000000000000000000000000000, rhs: 2147483647, expected: 0b11111111111111111111111111111111}, // lhs = -2147483648 expected = -1
        TestCaseTwoArgs{lhs: 0b10000000000000000000000000000000, rhs: 0b10000000000000000000000000000000, expected: 0}, // lhs = -2147483648 rhs = -2147483648
    ];
    #[test]
    fn test_i32() {
        for case in test_cases.span() {
            let mut state = RTStateOps::new();
            assert_eq!(__llvm_scmp_i_i_b(ref state, *case.lhs, *case.rhs), *case.expected);
        }
    }
}

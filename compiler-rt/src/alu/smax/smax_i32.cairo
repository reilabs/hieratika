use crate::alu::smax::smax;

pub fn __llvm_smax_i_i_i(lhs: u128, rhs: u128) -> u128 {
    smax::<u32>(lhs, rhs)
}

#[cfg(test)]
mod tests {
    use super::__llvm_smax_i_i_i;
    use crate::alu::test_case::TestCaseTwoArgs;
    #[cairofmt::skip]
    pub const test_cases: [TestCaseTwoArgs; 129] = [
        // Due to Cairo's casting limitation, negative numbers are represented as bit patterns.

        // Random test cases
        TestCaseTwoArgs{lhs: 519188271, rhs: 0b10000000101110011011111111000000, expected: 519188271}, // rhs = -2135310400
        TestCaseTwoArgs{lhs: 794446820, rhs: 0b10111000110011110001101110100101, expected: 794446820}, // rhs = -1194386523
        TestCaseTwoArgs{lhs: 0b10111100111110100010000110101111, rhs: 0b10001100101111000001001000111101, expected: 0b10111100111110100010000110101111}, // lhs = -1124458065 rhs = -1933831619 expected = -1124458065
        TestCaseTwoArgs{lhs: 0b10000100111111011100111001000011, rhs: 0b10010001011110011110100111000111, expected: 0b10010001011110011110100111000111}, // lhs = -2063741373 rhs = -1854281273 expected = -1854281273
        TestCaseTwoArgs{lhs: 2008564904, rhs: 1687443643, expected: 2008564904},
        TestCaseTwoArgs{lhs: 0b10101111001001110110001001101110, rhs: 0b10100111101101100000011111100000, expected: 0b10101111001001110110001001101110}, // lhs = -1356373394 rhs = -1481242656 expected = -1356373394
        TestCaseTwoArgs{lhs: 0b10111101101011001011101010100100, rhs: 0b11111011100000011000000000100011, expected: 0b11111011100000011000000000100011}, // lhs = -1112753500 rhs = -75399133 expected = -75399133
        TestCaseTwoArgs{lhs: 0b11111101110110111110101111100001, rhs: 0b11100111000100001100110011010001, expected: 0b11111101110110111110101111100001}, // lhs = -35918879 rhs = -418329391 expected = -35918879
        TestCaseTwoArgs{lhs: 0b10011110001001110000010110010011, rhs: 0b10000111001110010010001001001001, expected: 0b10011110001001110000010110010011}, // lhs = -1641609837 rhs = -2026298807 expected = -1641609837
        TestCaseTwoArgs{lhs: 0b10001010001101011101110110101010, rhs: 467988588, expected: 467988588}, // lhs = -1976181334
        TestCaseTwoArgs{lhs: 594219664, rhs: 743408395, expected: 743408395},
        TestCaseTwoArgs{lhs: 0b10101101101101001000111000000101, rhs: 603622185, expected: 603622185}, // lhs = -1380676091
        TestCaseTwoArgs{lhs: 0b11000101010011100100000000000101, rhs: 0b10101001010110111110010010000100, expected: 0b11000101010011100100000000000101}, // lhs = -984727547 rhs = -1453595516 expected = -984727547
        TestCaseTwoArgs{lhs: 0b10000000110101101111010110001010, rhs: 528511914, expected: 528511914}, // lhs = -2133396086
        TestCaseTwoArgs{lhs: 0b10001000100000101111011001110111, rhs: 0b10001001001101011010101111010100, expected: 0b10001001001101011010101111010100}, // lhs = -2004683145 rhs = -1992971308 expected = -1992971308
        TestCaseTwoArgs{lhs: 848438222, rhs: 0b11110101100110011111110000000010, expected: 848438222}, // rhs = -174457854
        TestCaseTwoArgs{lhs: 610575365, rhs: 902762739, expected: 902762739},
        TestCaseTwoArgs{lhs: 0b11101111100010001011011101111100, rhs: 1286426094, expected: 1286426094}, // lhs = -276252804
        TestCaseTwoArgs{lhs: 289854147, rhs: 519166627, expected: 519166627},
        TestCaseTwoArgs{lhs: 1843004720, rhs: 0b11000100110011011101100000111000, expected: 1843004720}, // rhs = -993142728
        TestCaseTwoArgs{lhs: 1374519484, rhs: 0b10010010001110000110111110010101, expected: 1374519484}, // rhs = -1841795179
        TestCaseTwoArgs{lhs: 0b11110001010100010010010011111011, rhs: 777258605, expected: 777258605}, // lhs = -246340357
        TestCaseTwoArgs{lhs: 0b10111101100000100101000000111011, rhs: 1174246850, expected: 1174246850}, // lhs = -1115533253
        TestCaseTwoArgs{lhs: 0b11111100101001000010100100111011, rhs: 286216204, expected: 286216204}, // lhs = -56350405
        TestCaseTwoArgs{lhs: 1840618003, rhs: 0b11111100001101100110110001111110, expected: 1840618003}, // rhs = -63542146
        TestCaseTwoArgs{lhs: 556296632, rhs: 1691599755, expected: 1691599755},
        TestCaseTwoArgs{lhs: 856655514, rhs: 0b10110101100010101001100000111100, expected: 856655514}, // rhs = -1249208260
        TestCaseTwoArgs{lhs: 0b10110010010100001110010101001100, rhs: 0b10110001110100110000011110000100, expected: 0b10110010010100001110010101001100}, // lhs = -1303321268 rhs = -1311570044 expected = -1303321268
        TestCaseTwoArgs{lhs: 1688534266, rhs: 0b10111010101000110101001001000110, expected: 1688534266}, // rhs = -1163701690
        TestCaseTwoArgs{lhs: 0b10010110111101101110110101010000, rhs: 0b10001100100001000011011110001011, expected: 0b10010110111101101110110101010000}, // lhs = -1762202288 rhs = -1937492085 expected = -1762202288
        TestCaseTwoArgs{lhs: 908218055, rhs: 0b10100100110111100111010100010111, expected: 908218055}, // rhs = -1528924905
        TestCaseTwoArgs{lhs: 1902085678, rhs: 396167067, expected: 1902085678},
        TestCaseTwoArgs{lhs: 1876009522, rhs: 0b11000010001111111110110001001010, expected: 1876009522}, // rhs = -1035998134
        TestCaseTwoArgs{lhs: 0b10010000011011011100011101011110, rhs: 0b10010101101010011011111111010111, expected: 0b10010101101010011011111111010111}, // lhs = -1871853730 rhs = -1784037417 expected = -1784037417
        TestCaseTwoArgs{lhs: 2048798621, rhs: 0b10000101110100111110111011011010, expected: 2048798621}, // rhs = -2049708326
        TestCaseTwoArgs{lhs: 1293771405, rhs: 868636722, expected: 1293771405},
        TestCaseTwoArgs{lhs: 0b10011001011101110011000111101000, rhs: 0b11010001110011011100001000110101, expected: 0b11010001110011011100001000110101}, // lhs = -1720241688 rhs = -775044555 expected = -775044555
        TestCaseTwoArgs{lhs: 1908188819, rhs: 0b10101100100011010110100001000001, expected: 1908188819}, // rhs = -1400018879
        TestCaseTwoArgs{lhs: 1004294478, rhs: 0b11001011101000100010001100010100, expected: 1004294478}, // rhs = -878566636
        TestCaseTwoArgs{lhs: 38943186, rhs: 0b11111010100101010011110001000001, expected: 38943186}, // rhs = -90883007
        TestCaseTwoArgs{lhs: 1324800640, rhs: 945983978, expected: 1324800640},
        TestCaseTwoArgs{lhs: 0b11000010001001101000110110011101, rhs: 1022777956, expected: 1022777956}, // lhs = -1037660771
        TestCaseTwoArgs{lhs: 0b10100101111110010010011111100011, rhs: 0b10111100101111011001110111011011, expected: 0b10111100101111011001110111011011}, // lhs = -1510397981 rhs = -1128423973 expected = -1128423973
        TestCaseTwoArgs{lhs: 1767669917, rhs: 0b11110100000101101111110011101100, expected: 1767669917}, // rhs = -199820052
        TestCaseTwoArgs{lhs: 0b11010111100100100010110110001100, rhs: 1876575677, expected: 1876575677}, // lhs = -678285940
        TestCaseTwoArgs{lhs: 0b10101100010010011001011100011101, rhs: 0b11010010111000011010100111000111, expected: 0b11010010111000011010100111000111}, // lhs = -1404463331 rhs = -756962873 expected = -756962873
        TestCaseTwoArgs{lhs: 0b11101011110010001010001110001010, rhs: 0b11111010001010011100110010000111, expected: 0b11111010001010011100110010000111}, // lhs = -339172470 rhs = -97923961 expected = -97923961
        TestCaseTwoArgs{lhs: 824577524, rhs: 0b11010000001111000110001010000000, expected: 824577524}, // rhs = -801348992
        TestCaseTwoArgs{lhs: 0b10100101111010001001000111111101, rhs: 1477554969, expected: 1477554969}, // lhs = -1511484931
        TestCaseTwoArgs{lhs: 0b11100101101000110010000001101010, rhs: 0b10000011011110100100101101100011, expected: 0b11100101101000110010000001101010}, // lhs = -442294166 rhs = -2089137309 expected = -442294166
        TestCaseTwoArgs{lhs: 0b10110101001100111001000110001011, rhs: 104522788, expected: 104522788}, // lhs = -1254911605
        TestCaseTwoArgs{lhs: 0b11011001000110010001111100100111, rhs: 0b10110110000111110001000110000110, expected: 0b11011001000110010001111100100111}, // lhs = -652665049 rhs = -1239477882 expected = -652665049
        TestCaseTwoArgs{lhs: 1124112924, rhs: 1367107857, expected: 1367107857},
        TestCaseTwoArgs{lhs: 755259459, rhs: 0b11000100111101010111111111001000, expected: 755259459}, // rhs = -990543928
        TestCaseTwoArgs{lhs: 2089690801, rhs: 318345710, expected: 2089690801},
        TestCaseTwoArgs{lhs: 0b11110100100010000011000010001101, rhs: 0b11110100101110100011010111010010, expected: 0b11110100101110100011010111010010}, // lhs = -192401267 rhs = -189123118 expected = -189123118
        TestCaseTwoArgs{lhs: 0b10000111011100111001101000100100, rhs: 414567336, expected: 414567336}, // lhs = -2022467036
        TestCaseTwoArgs{lhs: 1360581386, rhs: 0b10011000001011100111111110010111, expected: 1360581386}, // rhs = -1741783145
        TestCaseTwoArgs{lhs: 212851740, rhs: 306907568, expected: 306907568},
        TestCaseTwoArgs{lhs: 0b11111010001101001010110111101101, rhs: 0b11000011100110010010010110011000, expected: 0b11111010001101001010110111101101}, // lhs = -97210899 rhs = -1013373544 expected = -97210899
        TestCaseTwoArgs{lhs: 0b10101000000000101001000100101110, rhs: 0b11100001101100110000001000111000, expected: 0b11100001101100110000001000111000}, // lhs = -1476226770 rhs = -508362184 expected = -508362184
        TestCaseTwoArgs{lhs: 859324551, rhs: 0b10100010010100010010000010010100, expected: 859324551}, // rhs = -1571741548
        TestCaseTwoArgs{lhs: 0b10010010110000101110100111101100, rhs: 0b11000001100011100010111110110000, expected: 0b11000001100011100010111110110000}, // lhs = -1832719892 rhs = -1047646288 expected = -1047646288
        TestCaseTwoArgs{lhs: 0b11111110010001111010011001111001, rhs: 0b11000000000111010101111110001100, expected: 0b11111110010001111010011001111001}, // lhs = -28858759 rhs = -1071816820 expected = -28858759
        TestCaseTwoArgs{lhs: 0b10011101011100011001110111100011, rhs: 0b11111101111110101011011000000111, expected: 0b11111101111110101011011000000111}, // lhs = -1653498397 rhs = -33901049 expected = -33901049
        TestCaseTwoArgs{lhs: 0b10111010110001011100101110001000, rhs: 0b10001101000011001110110011001011, expected: 0b10111010110001011100101110001000}, // lhs = -1161442424 rhs = -1928532789 expected = -1161442424
        TestCaseTwoArgs{lhs: 0b11000000110100101011010000000111, rhs: 0b11110100001101000000111110100110, expected: 0b11110100001101000000111110100110}, // lhs = -1059933177 rhs = -197914714 expected = -197914714
        TestCaseTwoArgs{lhs: 0b10111111000101000000100000011100, rhs: 0b10110100110100000111110110001110, expected: 0b10111111000101000000100000011100}, // lhs = -1089206244 rhs = -1261404786 expected = -1089206244
        TestCaseTwoArgs{lhs: 0b11011010001100111110001000110001, rhs: 0b10111110110000000110011011101110, expected: 0b11011010001100111110001000110001}, // lhs = -634133967 rhs = -1094686994 expected = -634133967
        TestCaseTwoArgs{lhs: 562190234, rhs: 244221936, expected: 562190234},
        TestCaseTwoArgs{lhs: 1204783323, rhs: 0b10011101110110001001001111111110, expected: 1204783323}, // rhs = -1646750722
        TestCaseTwoArgs{lhs: 0b10011110111000101000010100011110, rhs: 2031258708, expected: 2031258708}, // lhs = -1629321954
        TestCaseTwoArgs{lhs: 1453698626, rhs: 605920393, expected: 1453698626},
        TestCaseTwoArgs{lhs: 0b11101100010110000101100010000110, rhs: 0b10110011011110011001001011011001, expected: 0b11101100010110000101100010000110}, // lhs = -329754490 rhs = -1283878183 expected = -329754490
        TestCaseTwoArgs{lhs: 137685503, rhs: 0b11111010100000001001110111110101, expected: 137685503}, // rhs = -92234251
        TestCaseTwoArgs{lhs: 0b10010001010000001100111110001000, rhs: 1222097838, expected: 1222097838}, // lhs = -1858023544
        TestCaseTwoArgs{lhs: 210526763, rhs: 0b10010111101111111101110101110001, expected: 210526763}, // rhs = -1749033615
        TestCaseTwoArgs{lhs: 0b10111010110110110011001001101001, rhs: 671782241, expected: 671782241}, // lhs = -1160039831
        TestCaseTwoArgs{lhs: 0b10110011000101110101110000000110, rhs: 0b11011110001111000010101100110100, expected: 0b11011110001111000010101100110100}, // lhs = -1290314746 rhs = -566482124 expected = -566482124
        TestCaseTwoArgs{lhs: 1286991901, rhs: 255672109, expected: 1286991901},
        TestCaseTwoArgs{lhs: 0b11001110110101101100101011010111, rhs: 1325529831, expected: 1325529831}, // lhs = -824784169
        TestCaseTwoArgs{lhs: 0b11010010001011110110100111101110, rhs: 0b11111010111000001101100001101010, expected: 0b11111010111000001101100001101010}, // lhs = -768644626 rhs = -85927830 expected = -85927830
        TestCaseTwoArgs{lhs: 985057898, rhs: 0b10001000111010111110000111001001, expected: 985057898}, // rhs = -1997807159
        TestCaseTwoArgs{lhs: 0b11001011111110000111011011100011, rhs: 1029237932, expected: 1029237932}, // lhs = -872909085
        TestCaseTwoArgs{lhs: 88675997, rhs: 0b11000101011000001000110011011001, expected: 88675997}, // rhs = -983528231
        TestCaseTwoArgs{lhs: 0b11011000110110001110011101110111, rhs: 0b11011010110101000011010011011101, expected: 0b11011010110101000011010011011101}, // lhs = -656873609 rhs = -623627043 expected = -623627043
        TestCaseTwoArgs{lhs: 332428612, rhs: 1079039700, expected: 1079039700},
        TestCaseTwoArgs{lhs: 985567234, rhs: 1021520808, expected: 1021520808},
        TestCaseTwoArgs{lhs: 129731479, rhs: 0b11010111110010101000011100101000, expected: 129731479}, // rhs = -674592984
        TestCaseTwoArgs{lhs: 0b11001111111110110011000101001111, rhs: 1989105169, expected: 1989105169}, // lhs = -805621425
        TestCaseTwoArgs{lhs: 0b10010011000001111100100100101010, rhs: 1146682766, expected: 1146682766}, // lhs = -1828206294
        TestCaseTwoArgs{lhs: 0b10110101001010110001010110100010, rhs: 0b11111001111100101010101111000101, expected: 0b11111001111100101010101111000101}, // lhs = -1255467614 rhs = -101536827 expected = -101536827
        TestCaseTwoArgs{lhs: 0b11110001101101110110010101010100, rhs: 0b10100111111110100011110000110101, expected: 0b11110001101101110110010101010100}, // lhs = -239639212 rhs = -1476772811 expected = -239639212
        TestCaseTwoArgs{lhs: 0b11110000100110011110111010000010, rhs: 0b11110100000000100100100101011110, expected: 0b11110100000000100100100101011110}, // lhs = -258347390 rhs = -201176738 expected = -201176738
        TestCaseTwoArgs{lhs: 1005303616, rhs: 572988127, expected: 1005303616},
        TestCaseTwoArgs{lhs: 1396770661, rhs: 0b10111100000010011010000011100011, expected: 1396770661}, // rhs = -1140219677
        TestCaseTwoArgs{lhs: 539593251, rhs: 0b10010110011101011010010110001110, expected: 539593251}, // rhs = -1770674802
        TestCaseTwoArgs{lhs: 1090027717, rhs: 0b11011000011001111001000101101110, expected: 1090027717}, // rhs = -664301202
        TestCaseTwoArgs{lhs: 0b11101001100111100010010110111101, rhs: 2073877349, expected: 2073877349}, // lhs = -375511619
        TestCaseTwoArgs{lhs: 430473397, rhs: 1076842446, expected: 1076842446},
        TestCaseTwoArgs{lhs: 0b10111111101001100001001001110111, rhs: 0b10000100000110011011011111100000, expected: 0b10111111101001100001001001110111}, // lhs = -1079635337 rhs = -2078689312 expected = -1079635337
        TestCaseTwoArgs{lhs: 0b10111111110001101111000000000100, rhs: 0b10110100011111000001001010011111, expected: 0b10111111110001101111000000000100}, // lhs = -1077481468 rhs = -1266937185 expected = -1077481468
        TestCaseTwoArgs{lhs: 1884564525, rhs: 0b11100100100000100001011010110010, expected: 1884564525}, // rhs = -461236558
        TestCaseTwoArgs{lhs: 1415410357, rhs: 1745201329, expected: 1745201329},
        TestCaseTwoArgs{lhs: 40573101, rhs: 0b10010100010010100000001111101011, expected: 40573101}, // rhs = -1807088661
        TestCaseTwoArgs{lhs: 2130449913, rhs: 657727581, expected: 2130449913},
        TestCaseTwoArgs{lhs: 578958677, rhs: 0b11001001001001111100010010000100, expected: 578958677}, // rhs = -920140668
        TestCaseTwoArgs{lhs: 1263947174, rhs: 0b11011110100010010111101101011111, expected: 1263947174}, // rhs = -561415329
        TestCaseTwoArgs{lhs: 979748334, rhs: 0b10100111001000110010000001101011, expected: 979748334}, // rhs = -1490870165
        TestCaseTwoArgs{lhs: 0b10110111110110101010111100000001, rhs: 854206107, expected: 854206107}, // lhs = -1210405119
        TestCaseTwoArgs{lhs: 0b11000110111110000101010100101011, rhs: 0b10111000111000000000111001011000, expected: 0b11000110111110000101010100101011}, // lhs = -956803797 rhs = -1193275816 expected = -956803797
        TestCaseTwoArgs{lhs: 150374787, rhs: 0b10011001010001010101010101011101, expected: 150374787}, // rhs = -1723509411
        TestCaseTwoArgs{lhs: 695496928, rhs: 257653612, expected: 695496928},
        TestCaseTwoArgs{lhs: 0b10110101110011110011110011110001, rhs: 0b10100111111101010111100111100100, expected: 0b10110101110011110011110011110001}, // lhs = -1244709647 rhs = -1477084700 expected = -1244709647
        TestCaseTwoArgs{lhs: 0b11101011001010011100010110001100, rhs: 0b11100010001100011101101010011111, expected: 0b11101011001010011100010110001100}, // lhs = -349583988 rhs = -500049249 expected = -349583988
        TestCaseTwoArgs{lhs: 764571660, rhs: 1158037029, expected: 1158037029},
        TestCaseTwoArgs{lhs: 1425933687, rhs: 1744225274, expected: 1744225274},
        TestCaseTwoArgs{lhs: 15647429, rhs: 0b11101100001001001010001111110111, expected: 15647429}, // rhs = -333143049
        TestCaseTwoArgs{lhs: 0b10101000011101000011100110011111, rhs: 0b10001011110111011100100111101011, expected: 0b10101000011101000011100110011111}, // lhs = -1468778081 rhs = -1948399125 expected = -1468778081
        TestCaseTwoArgs{lhs: 1519647808, rhs: 1337086810, expected: 1519647808},

        // Edge cases
        TestCaseTwoArgs{lhs: 0, rhs: 0, expected: 0},
        TestCaseTwoArgs{lhs: 0, rhs: 2147483647, expected: 2147483647},
        TestCaseTwoArgs{lhs: 0, rhs: 0b10000000000000000000000000000000, expected: 0}, // rhs = -2147483648
        TestCaseTwoArgs{lhs: 2147483647, rhs: 0, expected: 2147483647},
        TestCaseTwoArgs{lhs: 2147483647, rhs: 2147483647, expected: 2147483647},
        TestCaseTwoArgs{lhs: 2147483647, rhs: 0b10000000000000000000000000000000, expected: 2147483647}, // rhs = -2147483648
        TestCaseTwoArgs{lhs: 0b10000000000000000000000000000000, rhs: 0, expected: 0}, // lhs = -2147483648
        TestCaseTwoArgs{lhs: 0b10000000000000000000000000000000, rhs: 2147483647, expected: 2147483647}, // lhs = -2147483648
        TestCaseTwoArgs{lhs: 0b10000000000000000000000000000000, rhs: 0b10000000000000000000000000000000, expected: 0b10000000000000000000000000000000}, // lhs = -2147483648 rhs = -2147483648 expected = -2147483648
    ];
    #[test]
    fn test_i32() {
        for case in test_cases.span() {
            assert_eq!(__llvm_smax_i_i_i(*case.lhs, *case.rhs), *case.expected);
        }
    }
}

use crate::rtstate::RTState;
use crate::alu::usub_with_overflow::usub_with_overflow;

pub fn __llvm_usub_with_overflow_i_i_Sics(
    ref state: RTState, lhs: u128, rhs: u128,
) -> (u128, bool) {
    usub_with_overflow::<u32>(lhs, rhs)
}

#[cfg(test)]
mod tests {
    use crate::rtstate::RTStateOps;
    use super::__llvm_usub_with_overflow_i_i_Sics;
    use crate::alu::test_case::TestCaseTwoArgsTwoExpected;
    #[cairofmt::skip]
    pub const test_cases: [TestCaseTwoArgsTwoExpected; 124] = [
        // Random test cases
        TestCaseTwoArgsTwoExpected{lhs: 2755878519, rhs: 507170210, expected: (2248708309, false)},
        TestCaseTwoArgsTwoExpected{lhs: 1031088895, rhs: 1360850535, expected: (3965205656, true)},
        TestCaseTwoArgsTwoExpected{lhs: 1041637019, rhs: 1037998337, expected: (3638682, false)},
        TestCaseTwoArgsTwoExpected{lhs: 1926886669, rhs: 1787503026, expected: (139383643, false)},
        TestCaseTwoArgsTwoExpected{lhs: 268417717, rhs: 3766057549, expected: (797327464, true)},
        TestCaseTwoArgsTwoExpected{lhs: 712326101, rhs: 3459465978, expected: (1547827419, true)},
        TestCaseTwoArgsTwoExpected{lhs: 768959574, rhs: 2611114181, expected: (2452812689, true)},
        TestCaseTwoArgsTwoExpected{lhs: 1661965733, rhs: 2164205144, expected: (3792727885, true)},
        TestCaseTwoArgsTwoExpected{lhs: 3429714239, rhs: 3785615624, expected: (3939065911, true)},
        TestCaseTwoArgsTwoExpected{lhs: 2209189799, rhs: 3257706362, expected: (3246450733, true)},
        TestCaseTwoArgsTwoExpected{lhs: 3377212077, rhs: 1203559467, expected: (2173652610, false)},
        TestCaseTwoArgsTwoExpected{lhs: 2961969735, rhs: 2641761038, expected: (320208697, false)},
        TestCaseTwoArgsTwoExpected{lhs: 4115727036, rhs: 3609309586, expected: (506417450, false)},
        TestCaseTwoArgsTwoExpected{lhs: 3179042024, rhs: 2343006067, expected: (836035957, false)},
        TestCaseTwoArgsTwoExpected{lhs: 1609014637, rhs: 2195922702, expected: (3708059231, true)},
        TestCaseTwoArgsTwoExpected{lhs: 3094301842, rhs: 3255370242, expected: (4133898896, true)},
        TestCaseTwoArgsTwoExpected{lhs: 4090830262, rhs: 1717517808, expected: (2373312454, false)},
        TestCaseTwoArgsTwoExpected{lhs: 1700375993, rhs: 935618882, expected: (764757111, false)},
        TestCaseTwoArgsTwoExpected{lhs: 3262311948, rhs: 4262370448, expected: (3294908796, true)},
        TestCaseTwoArgsTwoExpected{lhs: 3591720567, rhs: 265427548, expected: (3326293019, false)},
        TestCaseTwoArgsTwoExpected{lhs: 226492576, rhs: 2981943035, expected: (1539516837, true)},
        TestCaseTwoArgsTwoExpected{lhs: 570422736, rhs: 141342709, expected: (429080027, false)},
        TestCaseTwoArgsTwoExpected{lhs: 2079071463, rhs: 1837301652, expected: (241769811, false)},
        TestCaseTwoArgsTwoExpected{lhs: 1514786006, rhs: 3620479561, expected: (2189273741, true)},
        TestCaseTwoArgsTwoExpected{lhs: 2424805450, rhs: 1480038027, expected: (944767423, false)},
        TestCaseTwoArgsTwoExpected{lhs: 1733604508, rhs: 3040091045, expected: (2988480759, true)},
        TestCaseTwoArgsTwoExpected{lhs: 1641602862, rhs: 3757498660, expected: (2179071498, true)},
        TestCaseTwoArgsTwoExpected{lhs: 1936387547, rhs: 3795542485, expected: (2435812358, true)},
        TestCaseTwoArgsTwoExpected{lhs: 3873229657, rhs: 3247954077, expected: (625275580, false)},
        TestCaseTwoArgsTwoExpected{lhs: 2088903338, rhs: 4272844712, expected: (2111025922, true)},
        TestCaseTwoArgsTwoExpected{lhs: 3218417466, rhs: 3718323150, expected: (3795061612, true)},
        TestCaseTwoArgsTwoExpected{lhs: 3075166870, rhs: 419075877, expected: (2656090993, false)},
        TestCaseTwoArgsTwoExpected{lhs: 2042345920, rhs: 858725691, expected: (1183620229, false)},
        TestCaseTwoArgsTwoExpected{lhs: 1817734512, rhs: 2587977240, expected: (3524724568, true)},
        TestCaseTwoArgsTwoExpected{lhs: 1829935155, rhs: 155659297, expected: (1674275858, false)},
        TestCaseTwoArgsTwoExpected{lhs: 708026275, rhs: 822388818, expected: (4180604753, true)},
        TestCaseTwoArgsTwoExpected{lhs: 2404047284, rhs: 494496811, expected: (1909550473, false)},
        TestCaseTwoArgsTwoExpected{lhs: 1499851840, rhs: 4073605172, expected: (1721213964, true)},
        TestCaseTwoArgsTwoExpected{lhs: 933074729, rhs: 4177908223, expected: (1050133802, true)},
        TestCaseTwoArgsTwoExpected{lhs: 230401960, rhs: 2714283822, expected: (1811085434, true)},
        TestCaseTwoArgsTwoExpected{lhs: 3638869620, rhs: 252785650, expected: (3386083970, false)},
        TestCaseTwoArgsTwoExpected{lhs: 1994912511, rhs: 4272743830, expected: (2017135977, true)},
        TestCaseTwoArgsTwoExpected{lhs: 3830476451, rhs: 2794571127, expected: (1035905324, false)},
        TestCaseTwoArgsTwoExpected{lhs: 2458977194, rhs: 1557236351, expected: (901740843, false)},
        TestCaseTwoArgsTwoExpected{lhs: 2241720440, rhs: 4067577426, expected: (2469110310, true)},
        TestCaseTwoArgsTwoExpected{lhs: 1760475617, rhs: 397796757, expected: (1362678860, false)},
        TestCaseTwoArgsTwoExpected{lhs: 4060303909, rhs: 2303532333, expected: (1756771576, false)},
        TestCaseTwoArgsTwoExpected{lhs: 4154230971, rhs: 3132823556, expected: (1021407415, false)},
        TestCaseTwoArgsTwoExpected{lhs: 2400219755, rhs: 3199252544, expected: (3495934507, true)},
        TestCaseTwoArgsTwoExpected{lhs: 1459303840, rhs: 851532857, expected: (607770983, false)},
        TestCaseTwoArgsTwoExpected{lhs: 2795164031, rhs: 1700897345, expected: (1094266686, false)},
        TestCaseTwoArgsTwoExpected{lhs: 1449362027, rhs: 3819596010, expected: (1924733313, true)},
        TestCaseTwoArgsTwoExpected{lhs: 722258994, rhs: 153408353, expected: (568850641, false)},
        TestCaseTwoArgsTwoExpected{lhs: 963052619, rhs: 2436459713, expected: (2821560202, true)},
        TestCaseTwoArgsTwoExpected{lhs: 1459567431, rhs: 3132614172, expected: (2621920555, true)},
        TestCaseTwoArgsTwoExpected{lhs: 794277202, rhs: 1579482205, expected: (3509762293, true)},
        TestCaseTwoArgsTwoExpected{lhs: 1876921695, rhs: 702132318, expected: (1174789377, false)},
        TestCaseTwoArgsTwoExpected{lhs: 2542545037, rhs: 2834679106, expected: (4002833227, true)},
        TestCaseTwoArgsTwoExpected{lhs: 1823531871, rhs: 4078754013, expected: (2039745154, true)},
        TestCaseTwoArgsTwoExpected{lhs: 2018376933, rhs: 1388050931, expected: (630326002, false)},
        TestCaseTwoArgsTwoExpected{lhs: 786288896, rhs: 3293339143, expected: (1787917049, true)},
        TestCaseTwoArgsTwoExpected{lhs: 3583121352, rhs: 812962914, expected: (2770158438, false)},
        TestCaseTwoArgsTwoExpected{lhs: 3850792288, rhs: 3642830904, expected: (207961384, false)},
        TestCaseTwoArgsTwoExpected{lhs: 2149224953, rhs: 2249004610, expected: (4195187639, true)},
        TestCaseTwoArgsTwoExpected{lhs: 21706574, rhs: 377442446, expected: (3939231424, true)},
        TestCaseTwoArgsTwoExpected{lhs: 1046277889, rhs: 2643831126, expected: (2697414059, true)},
        TestCaseTwoArgsTwoExpected{lhs: 348516715, rhs: 567534139, expected: (4075949872, true)},
        TestCaseTwoArgsTwoExpected{lhs: 775891494, rhs: 238069423, expected: (537822071, false)},
        TestCaseTwoArgsTwoExpected{lhs: 3716868627, rhs: 4179752752, expected: (3832083171, true)},
        TestCaseTwoArgsTwoExpected{lhs: 143278378, rhs: 2067262091, expected: (2370983583, true)},
        TestCaseTwoArgsTwoExpected{lhs: 839590557, rhs: 3853234481, expected: (1281323372, true)},
        TestCaseTwoArgsTwoExpected{lhs: 1905052376, rhs: 1605612141, expected: (299440235, false)},
        TestCaseTwoArgsTwoExpected{lhs: 2629019910, rhs: 2376121832, expected: (252898078, false)},
        TestCaseTwoArgsTwoExpected{lhs: 3317806344, rhs: 2373275956, expected: (944530388, false)},
        TestCaseTwoArgsTwoExpected{lhs: 4105624246, rhs: 2550743362, expected: (1554880884, false)},
        TestCaseTwoArgsTwoExpected{lhs: 1472278577, rhs: 3568790002, expected: (2198455871, true)},
        TestCaseTwoArgsTwoExpected{lhs: 2579878346, rhs: 1072449558, expected: (1507428788, false)},
        TestCaseTwoArgsTwoExpected{lhs: 525916686, rhs: 3439815057, expected: (1381068925, true)},
        TestCaseTwoArgsTwoExpected{lhs: 3880731970, rhs: 2637976728, expected: (1242755242, false)},
        TestCaseTwoArgsTwoExpected{lhs: 833357005, rhs: 3208682630, expected: (1919641671, true)},
        TestCaseTwoArgsTwoExpected{lhs: 1188554442, rhs: 4275919307, expected: (1207602431, true)},
        TestCaseTwoArgsTwoExpected{lhs: 1052700644, rhs: 1727626097, expected: (3620041843, true)},
        TestCaseTwoArgsTwoExpected{lhs: 2085125145, rhs: 555720901, expected: (1529404244, false)},
        TestCaseTwoArgsTwoExpected{lhs: 2139923874, rhs: 2333568381, expected: (4101322789, true)},
        TestCaseTwoArgsTwoExpected{lhs: 4107590090, rhs: 1770415904, expected: (2337174186, false)},
        TestCaseTwoArgsTwoExpected{lhs: 2738609671, rhs: 3737257941, expected: (3296319026, true)},
        TestCaseTwoArgsTwoExpected{lhs: 275241135, rhs: 4159138690, expected: (411069741, true)},
        TestCaseTwoArgsTwoExpected{lhs: 2773756592, rhs: 2440718673, expected: (333037919, false)},
        TestCaseTwoArgsTwoExpected{lhs: 1264699973, rhs: 882212919, expected: (382487054, false)},
        TestCaseTwoArgsTwoExpected{lhs: 3808588097, rhs: 923756126, expected: (2884831971, false)},
        TestCaseTwoArgsTwoExpected{lhs: 3771323152, rhs: 4199063092, expected: (3867227356, true)},
        TestCaseTwoArgsTwoExpected{lhs: 2724914056, rhs: 711116543, expected: (2013797513, false)},
        TestCaseTwoArgsTwoExpected{lhs: 1764726347, rhs: 2612219929, expected: (3447473714, true)},
        TestCaseTwoArgsTwoExpected{lhs: 820760398, rhs: 4181428745, expected: (934298949, true)},
        TestCaseTwoArgsTwoExpected{lhs: 1134502713, rhs: 2609638410, expected: (2819831599, true)},
        TestCaseTwoArgsTwoExpected{lhs: 3055649354, rhs: 1928969581, expected: (1126679773, false)},
        TestCaseTwoArgsTwoExpected{lhs: 3733092583, rhs: 744320331, expected: (2988772252, false)},
        TestCaseTwoArgsTwoExpected{lhs: 1091803861, rhs: 1754476995, expected: (3632294162, true)},
        TestCaseTwoArgsTwoExpected{lhs: 1273217354, rhs: 141184069, expected: (1132033285, false)},
        TestCaseTwoArgsTwoExpected{lhs: 1815973705, rhs: 2136609150, expected: (3974331851, true)},
        TestCaseTwoArgsTwoExpected{lhs: 3643126074, rhs: 2235096344, expected: (1408029730, false)},
        TestCaseTwoArgsTwoExpected{lhs: 3882614249, rhs: 1218393331, expected: (2664220918, false)},
        TestCaseTwoArgsTwoExpected{lhs: 1650092873, rhs: 1967847135, expected: (3977213034, true)},
        TestCaseTwoArgsTwoExpected{lhs: 1683353534, rhs: 2923619499, expected: (3054701331, true)},
        TestCaseTwoArgsTwoExpected{lhs: 2433212415, rhs: 3196980499, expected: (3531199212, true)},
        TestCaseTwoArgsTwoExpected{lhs: 2161402295, rhs: 3605539489, expected: (2850830102, true)},
        TestCaseTwoArgsTwoExpected{lhs: 4056350465, rhs: 1558428501, expected: (2497921964, false)},
        TestCaseTwoArgsTwoExpected{lhs: 431874935, rhs: 28834254, expected: (403040681, false)},
        TestCaseTwoArgsTwoExpected{lhs: 1309306868, rhs: 4095098699, expected: (1509175465, true)},
        TestCaseTwoArgsTwoExpected{lhs: 380092617, rhs: 2233507092, expected: (2441552821, true)},
        TestCaseTwoArgsTwoExpected{lhs: 3106072220, rhs: 2332370840, expected: (773701380, false)},
        TestCaseTwoArgsTwoExpected{lhs: 1670297379, rhs: 1887955427, expected: (4077309248, true)},
        TestCaseTwoArgsTwoExpected{lhs: 984008486, rhs: 775672773, expected: (208335713, false)},
        TestCaseTwoArgsTwoExpected{lhs: 2435387463, rhs: 371375785, expected: (2064011678, false)},
        TestCaseTwoArgsTwoExpected{lhs: 3411948237, rhs: 1278960245, expected: (2132987992, false)},
        TestCaseTwoArgsTwoExpected{lhs: 3200006521, rhs: 3676639494, expected: (3818334323, true)},
        TestCaseTwoArgsTwoExpected{lhs: 3010422430, rhs: 930338880, expected: (2080083550, false)},
        TestCaseTwoArgsTwoExpected{lhs: 1054846069, rhs: 48829818, expected: (1006016251, false)},
        TestCaseTwoArgsTwoExpected{lhs: 1917010439, rhs: 3432315682, expected: (2779662053, true)},
        TestCaseTwoArgsTwoExpected{lhs: 1236606219, rhs: 3881445128, expected: (1650128387, true)},

        // Edge cases
        TestCaseTwoArgsTwoExpected{lhs: 0, rhs: 0, expected: (0, false)},
        TestCaseTwoArgsTwoExpected{lhs: 0, rhs: 4294967295, expected: (1, true)},
        TestCaseTwoArgsTwoExpected{lhs: 4294967295, rhs: 0, expected: (4294967295, false)},
        TestCaseTwoArgsTwoExpected{lhs: 4294967295, rhs: 4294967295, expected: (0, false)},
    ];
    #[test]
    fn test_i32() {
        for case in test_cases.span() {
            let mut state = RTStateOps::new();
            assert_eq!(
                __llvm_usub_with_overflow_i_i_Sics(ref state, *case.lhs, *case.rhs), *case.expected,
            );
        }
    }
}

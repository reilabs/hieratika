use crate::alu::sext::sext;

pub fn __llvm_sext_i_to_o(value: u128) -> u128 {
    sext::<u32, u128>(value)
}

#[cfg(test)]
mod tests {
    use super::__llvm_sext_i_to_o;
    use crate::alu::test_case::TestCaseOneArg;
    #[cairofmt::skip]
    pub const test_cases: [TestCaseOneArg; 7] = [
        TestCaseOneArg { arg: 0b00000000000000000000000000000000, expected: 0b00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000 },
        TestCaseOneArg { arg: 0b00000000000000000000000000000001, expected: 0b00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000001 },
        TestCaseOneArg { arg: 0b00000000000000000000000001000001, expected: 0b00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000001000001 },
        TestCaseOneArg { arg: 0b11111111111111111111111110000000, expected: 0b11111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111110000000 },
        TestCaseOneArg { arg: 0b11111111111111111111111110000001, expected: 0b11111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111110000001 },
        TestCaseOneArg { arg: 0b11111111111111111111111111000001, expected: 0b11111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111000001 },
        TestCaseOneArg { arg: 0b11111111111111111111111111111111, expected: 0b11111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111 },
    ];
    #[test]
    fn test_i32_i128() {
        for case in test_cases.span() {
            assert_eq!(__llvm_sext_i_to_o(*case.arg), *case.expected);
        }
    }
}
